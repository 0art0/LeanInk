[{"tailPos":1873,"headPos":1850,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) → FG N"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nt' : Set M\nh : Set.Finite t'\n⊢ FG (LowerAdjoint.toFun (closure L) t')"],"content":"rintro ⟨t', h, rfl⟩"},{"tailPos":1929,"headPos":1878,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nt' : Set M\nh : Set.Finite t'\n⊢ FG (LowerAdjoint.toFun (closure L) t')"],"goalsAfter":["case intro.intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nt : Finset M\nh : Set.Finite ↑t\n⊢ FG (LowerAdjoint.toFun (closure L) ↑t)"],"content":"rcases Finite.exists_finset_coe h with ⟨t, rfl⟩"},{"tailPos":1952,"headPos":1934,"goalsBefore":["case intro.intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nt : Finset M\nh : Set.Finite ↑t\n⊢ FG (LowerAdjoint.toFun (closure L) ↑t)"],"goalsAfter":[],"content":"exact ⟨t, rfl⟩"},{"tailPos":1952,"headPos":1850,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) → FG N"],"goalsAfter":[],"content":"rintro ⟨t', h, rfl⟩\n    rcases Finite.exists_finset_coe h with ⟨t, rfl⟩\n    exact ⟨t, rfl⟩"},{"tailPos":1845,"headPos":1843,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) → FG N"],"goalsAfter":[],"content":"by"},{"tailPos":1952,"headPos":1843,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) → FG N"],"goalsAfter":[],"content":"by\n    rintro ⟨t', h, rfl⟩\n    rcases Finite.exists_finset_coe h with ⟨t, rfl⟩\n    exact ⟨t, rfl⟩"},{"tailPos":2201,"headPos":2195,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ FG N ↔ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) ↔ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"fg_def"},{"tailPos":2202,"headPos":2201,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) ↔ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) ↔ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"]"},{"tailPos":2202,"headPos":2191,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ FG N ↔ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) ↔ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"rw [fg_def]"},{"tailPos":2216,"headPos":2205,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) ↔ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["case mp\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) → ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N","case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ n s, LowerAdjoint.toFun (closure L) (range s) = N) → ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N"],"content":"constructor"},{"tailPos":2221,"headPos":2219,"goalsBefore":["case mp\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) → ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N","case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ n s, LowerAdjoint.toFun (closure L) (range s) = N) → ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mp\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) → ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"·"},{"tailPos":2246,"headPos":2222,"goalsBefore":["case mp\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) → ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["case mp.intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nSfin : Set.Finite S\nhS : LowerAdjoint.toFun (closure L) S = N\n⊢ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"rintro ⟨S, Sfin, hS⟩"},{"tailPos":2295,"headPos":2251,"goalsBefore":["case mp.intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nSfin : Set.Finite S\nhS : LowerAdjoint.toFun (closure L) S = N\n⊢ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["case mp.intro.intro.intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nn : ℕ\nf : Fin n ↪ M\nSfin : Set.Finite (range ↑f)\nhS : LowerAdjoint.toFun (closure L) (range ↑f) = N\n⊢ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"obtain ⟨n, f, rfl⟩ := Sfin.fin_embedding"},{"tailPos":2320,"headPos":2300,"goalsBefore":["case mp.intro.intro.intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nn : ℕ\nf : Fin n ↪ M\nSfin : Set.Finite (range ↑f)\nhS : LowerAdjoint.toFun (closure L) (range ↑f) = N\n⊢ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":[],"content":"exact ⟨n, f, hS⟩"},{"tailPos":2320,"headPos":2222,"goalsBefore":["case mp\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) → ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":[],"content":"rintro ⟨S, Sfin, hS⟩\n    obtain ⟨n, f, rfl⟩ := Sfin.fin_embedding\n    exact ⟨n, f, hS⟩"},{"tailPos":2320,"headPos":2219,"goalsBefore":["case mp\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N) → ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N","case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ n s, LowerAdjoint.toFun (closure L) (range s) = N) → ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ n s, LowerAdjoint.toFun (closure L) (range s) = N) → ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N"],"content":"· rintro ⟨S, Sfin, hS⟩\n    obtain ⟨n, f, rfl⟩ := Sfin.fin_embedding\n    exact ⟨n, f, hS⟩"},{"tailPos":2325,"headPos":2323,"goalsBefore":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ n s, LowerAdjoint.toFun (closure L) (range s) = N) → ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ n s, LowerAdjoint.toFun (closure L) (range s) = N) → ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N"],"content":"·"},{"tailPos":2347,"headPos":2326,"goalsBefore":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ n s, LowerAdjoint.toFun (closure L) (range s) = N) → ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mpr.intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nn : ℕ\ns : Fin n → M\nhs : LowerAdjoint.toFun (closure L) (range s) = N\n⊢ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N"],"content":"rintro ⟨n, s, hs⟩"},{"tailPos":2393,"headPos":2352,"goalsBefore":["case mpr.intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nn : ℕ\ns : Fin n → M\nhs : LowerAdjoint.toFun (closure L) (range s) = N\n⊢ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":[],"content":"refine' ⟨range s, finite_range s, hs⟩"},{"tailPos":2393,"headPos":2326,"goalsBefore":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ n s, LowerAdjoint.toFun (closure L) (range s) = N) → ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":[],"content":"rintro ⟨n, s, hs⟩\n    refine' ⟨range s, finite_range s, hs⟩"},{"tailPos":2393,"headPos":2323,"goalsBefore":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ n s, LowerAdjoint.toFun (closure L) (range s) = N) → ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":[],"content":"· rintro ⟨n, s, hs⟩\n    refine' ⟨range s, finite_range s, hs⟩"},{"tailPos":2393,"headPos":2191,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ FG N ↔ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":[],"content":"rw [fg_def]\n  constructor\n  · rintro ⟨S, Sfin, hS⟩\n    obtain ⟨n, f, rfl⟩ := Sfin.fin_embedding\n    exact ⟨n, f, hS⟩\n  · rintro ⟨n, s, hs⟩\n    refine' ⟨range s, finite_range s, hs⟩"},{"tailPos":2188,"headPos":2186,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ FG N ↔ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":[],"content":"by"},{"tailPos":2393,"headPos":2186,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ FG N ↔ ∃ n s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":[],"content":"by\n  rw [fg_def]\n  constructor\n  · rintro ⟨S, Sfin, hS⟩\n    obtain ⟨n, f, rfl⟩ := Sfin.fin_embedding\n    exact ⟨n, f, hS⟩\n  · rintro ⟨n, s, hs⟩\n    refine' ⟨range s, finite_range s, hs⟩"},{"tailPos":2623,"headPos":2606,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ LowerAdjoint.toFun (closure L) ↑∅ = ⊥"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ LowerAdjoint.toFun (closure L) ∅ = ⊥"],"content":"Finset.coe_empty,"},{"tailPos":2637,"headPos":2624,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ LowerAdjoint.toFun (closure L) ∅ = ⊥"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ ⊥ = ⊥"],"content":"closure_empty"},{"tailPos":2638,"headPos":2637,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ ⊥ = ⊥"],"goalsAfter":[],"content":"]"},{"tailPos":2638,"headPos":2602,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ LowerAdjoint.toFun (closure L) ↑∅ = ⊥"],"goalsAfter":[],"content":"rw [Finset.coe_empty, closure_empty]"},{"tailPos":2601,"headPos":2599,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ LowerAdjoint.toFun (closure L) ↑∅ = ⊥"],"goalsAfter":[],"content":"by"},{"tailPos":2638,"headPos":2599,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ LowerAdjoint.toFun (closure L) ↑∅ = ⊥"],"goalsAfter":[],"content":"by rw [Finset.coe_empty, closure_empty]"},{"tailPos":2840,"headPos":2825,"goalsBefore":["L : Language\nM : Type u_1\ninst✝ : Structure L M\ns : Set M\nhs : Set.Finite s\n⊢ LowerAdjoint.toFun (closure L) ↑(Finite.toFinset hs) = LowerAdjoint.toFun (closure L) s"],"goalsAfter":["L : Language\nM : Type u_1\ninst✝ : Structure L M\ns : Set M\nhs : Set.Finite s\n⊢ LowerAdjoint.toFun (closure L) s = LowerAdjoint.toFun (closure L) s"],"content":"hs.coe_toFinset"},{"tailPos":2841,"headPos":2840,"goalsBefore":["L : Language\nM : Type u_1\ninst✝ : Structure L M\ns : Set M\nhs : Set.Finite s\n⊢ LowerAdjoint.toFun (closure L) s = LowerAdjoint.toFun (closure L) s"],"goalsAfter":[],"content":"]"},{"tailPos":2841,"headPos":2821,"goalsBefore":["L : Language\nM : Type u_1\ninst✝ : Structure L M\ns : Set M\nhs : Set.Finite s\n⊢ LowerAdjoint.toFun (closure L) ↑(Finite.toFinset hs) = LowerAdjoint.toFun (closure L) s"],"goalsAfter":[],"content":"rw [hs.coe_toFinset]"},{"tailPos":2820,"headPos":2818,"goalsBefore":["L : Language\nM : Type u_1\ninst✝ : Structure L M\ns : Set M\nhs : Set.Finite s\n⊢ LowerAdjoint.toFun (closure L) ↑(Finite.toFinset hs) = LowerAdjoint.toFun (closure L) s"],"goalsAfter":[],"content":"by"},{"tailPos":2841,"headPos":2818,"goalsBefore":["L : Language\nM : Type u_1\ninst✝ : Structure L M\ns : Set M\nhs : Set.Finite s\n⊢ LowerAdjoint.toFun (closure L) ↑(Finite.toFinset hs) = LowerAdjoint.toFun (closure L) s"],"goalsAfter":[],"content":"by rw [hs.coe_toFinset]"},{"tailPos":3427,"headPos":3413,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : FG N₁\nhN₂ : FG N₂\nt₁ : Set M\nht₁ : Set.Finite t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Finite t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ LowerAdjoint.toFun (closure L) (t₁ ∪ t₂) = N₁ ⊔ N₂"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : FG N₁\nhN₂ : FG N₂\nt₁ : Set M\nht₁ : Set.Finite t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Finite t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ LowerAdjoint.toFun (closure L) t₁ ⊔ LowerAdjoint.toFun (closure L) t₂ = N₁ ⊔ N₂"],"content":"closure_union,"},{"tailPos":3436,"headPos":3428,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : FG N₁\nhN₂ : FG N₂\nt₁ : Set M\nht₁ : Set.Finite t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Finite t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ LowerAdjoint.toFun (closure L) t₁ ⊔ LowerAdjoint.toFun (closure L) t₂ = N₁ ⊔ N₂"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : FG N₁\nhN₂ : FG N₂\nt₁ : Set M\nht₁ : Set.Finite t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Finite t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ N₁ ⊔ LowerAdjoint.toFun (closure L) t₂ = N₁ ⊔ N₂"],"content":"ht₁.2,"},{"tailPos":3444,"headPos":3437,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : FG N₁\nhN₂ : FG N₂\nt₁ : Set M\nht₁ : Set.Finite t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Finite t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ N₁ ⊔ LowerAdjoint.toFun (closure L) t₂ = N₁ ⊔ N₂"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : FG N₁\nhN₂ : FG N₂\nt₁ : Set M\nht₁ : Set.Finite t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Finite t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ N₁ ⊔ N₂ = N₁ ⊔ N₂"],"content":"ht₂.2"},{"tailPos":3445,"headPos":3444,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : FG N₁\nhN₂ : FG N₂\nt₁ : Set M\nht₁ : Set.Finite t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Finite t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ N₁ ⊔ N₂ = N₁ ⊔ N₂"],"goalsAfter":[],"content":"]"},{"tailPos":3445,"headPos":3409,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : FG N₁\nhN₂ : FG N₂\nt₁ : Set M\nht₁ : Set.Finite t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Finite t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ LowerAdjoint.toFun (closure L) (t₁ ∪ t₂) = N₁ ⊔ N₂"],"goalsAfter":[],"content":"rw [closure_union, ht₁.2, ht₂.2]"},{"tailPos":3408,"headPos":3406,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : FG N₁\nhN₂ : FG N₂\nt₁ : Set M\nht₁ : Set.Finite t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Finite t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ LowerAdjoint.toFun (closure L) (t₁ ∪ t₂) = N₁ ⊔ N₂"],"goalsAfter":[],"content":"by"},{"tailPos":3445,"headPos":3406,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : FG N₁\nhN₂ : FG N₂\nt₁ : Set M\nht₁ : Set.Finite t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Finite t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ LowerAdjoint.toFun (closure L) (t₁ ∪ t₂) = N₁ ⊔ N₂"],"goalsAfter":[],"content":"by rw [closure_union, ht₁.2, ht₂.2]"},{"tailPos":3746,"headPos":3732,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : FG s\nt : Set M\nht : Set.Finite t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ LowerAdjoint.toFun (closure L) (↑f '' t) = Substructure.map f s"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : FG s\nt : Set M\nht : Set.Finite t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ Substructure.map f (LowerAdjoint.toFun (closure L) t) = Substructure.map f s"],"content":"closure_image,"},{"tailPos":3751,"headPos":3747,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : FG s\nt : Set M\nht : Set.Finite t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ Substructure.map f (LowerAdjoint.toFun (closure L) t) = Substructure.map f s"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : FG s\nt : Set M\nht : Set.Finite t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ Substructure.map f s = Substructure.map f s"],"content":"ht.2"},{"tailPos":3752,"headPos":3751,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : FG s\nt : Set M\nht : Set.Finite t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ Substructure.map f s = Substructure.map f s"],"goalsAfter":[],"content":"]"},{"tailPos":3752,"headPos":3728,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : FG s\nt : Set M\nht : Set.Finite t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ LowerAdjoint.toFun (closure L) (↑f '' t) = Substructure.map f s"],"goalsAfter":[],"content":"rw [closure_image, ht.2]"},{"tailPos":3727,"headPos":3725,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : FG s\nt : Set M\nht : Set.Finite t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ LowerAdjoint.toFun (closure L) (↑f '' t) = Substructure.map f s"],"goalsAfter":[],"content":"by"},{"tailPos":3752,"headPos":3725,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : FG s\nt : Set M\nht : Set.Finite t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ LowerAdjoint.toFun (closure L) (↑f '' t) = Substructure.map f s"],"goalsAfter":[],"content":"by rw [closure_image, ht.2]"},{"tailPos":4012,"headPos":3987,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nhs : FG (Substructure.map (Embedding.toHom f) s)\n⊢ FG s"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\n⊢ FG s"],"content":"rcases hs with ⟨t, h⟩"},{"tailPos":4025,"headPos":4019,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\n⊢ FG s"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\n⊢ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = s"],"content":"fg_def"},{"tailPos":4026,"headPos":4025,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\n⊢ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = s"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\n⊢ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = s"],"content":"]"},{"tailPos":4026,"headPos":4015,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\n⊢ FG s"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\n⊢ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = s"],"content":"rw [fg_def]"},{"tailPos":4103,"headPos":4029,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\n⊢ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = s"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\n⊢ LowerAdjoint.toFun (closure L) (↑f ⁻¹' ↑t) = s"],"content":"refine' ⟨f ⁻¹' t, t.finite_toSet.preimage (f.injective.injOn _), _⟩"},{"tailPos":4157,"headPos":4106,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\n⊢ LowerAdjoint.toFun (closure L) (↑f ⁻¹' ↑t) = s"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) (↑f ⁻¹' ↑t) = s"],"content":"have hf : Function.Injective f.toHom := f.injective"},{"tailPos":4199,"headPos":4160,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) (↑f ⁻¹' ↑t) = s"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ Substructure.map (Embedding.toHom f) (LowerAdjoint.toFun (closure L) (↑f ⁻¹' ↑t)) =\n    Substructure.map (Embedding.toHom f) s"],"content":"refine' map_injective_of_injective hf _"},{"tailPos":4212,"headPos":4206,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ Substructure.map (Embedding.toHom f) (LowerAdjoint.toFun (closure L) (↑f ⁻¹' ↑t)) =\n    Substructure.map (Embedding.toHom f) s"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ Substructure.map (Embedding.toHom f) (LowerAdjoint.toFun (closure L) (↑f ⁻¹' ↑t)) = LowerAdjoint.toFun (closure L) ↑t"],"content":"← h,"},{"tailPos":4225,"headPos":4213,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ Substructure.map (Embedding.toHom f) (LowerAdjoint.toFun (closure L) (↑f ⁻¹' ↑t)) = LowerAdjoint.toFun (closure L) ↑t"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) (↑(Embedding.toHom f) '' (↑f ⁻¹' ↑t)) = LowerAdjoint.toFun (closure L) ↑t"],"content":"map_closure,"},{"tailPos":4246,"headPos":4226,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) (↑(Embedding.toHom f) '' (↑f ⁻¹' ↑t)) = LowerAdjoint.toFun (closure L) ↑t"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) (↑f '' (↑f ⁻¹' ↑t)) = LowerAdjoint.toFun (closure L) ↑t"],"content":"Embedding.coe_toHom,"},{"tailPos":4274,"headPos":4247,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) (↑f '' (↑f ⁻¹' ↑t)) = LowerAdjoint.toFun (closure L) ↑t"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) ↑t = LowerAdjoint.toFun (closure L) ↑t","case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ ↑t ⊆ range ↑f"],"content":"image_preimage_eq_of_subset"},{"tailPos":4275,"headPos":4274,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) ↑t = LowerAdjoint.toFun (closure L) ↑t","case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ ↑t ⊆ range ↑f"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ ↑t ⊆ range ↑f"],"content":"]"},{"tailPos":4275,"headPos":4202,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ Substructure.map (Embedding.toHom f) (LowerAdjoint.toFun (closure L) (↑f ⁻¹' ↑t)) =\n    Substructure.map (Embedding.toHom f) s"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ ↑t ⊆ range ↑f"],"content":"rw [← h, map_closure, Embedding.coe_toHom, image_preimage_eq_of_subset]"},{"tailPos":4288,"headPos":4278,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ ↑t ⊆ range ↑f"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ ↑t\n⊢ x ∈ range ↑f"],"content":"intro x hx"},{"tailPos":4328,"headPos":4291,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ ↑t\n⊢ x ∈ range ↑f"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ ↑t\nh' : x ∈ ↑(LowerAdjoint.toFun (closure L) ↑t)\n⊢ x ∈ range ↑f"],"content":"have h' := subset_closure (L := L) hx"},{"tailPos":4336,"headPos":4335,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ ↑t\nh' : x ∈ ↑(LowerAdjoint.toFun (closure L) ↑t)\n⊢ x ∈ range ↑f"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ ↑t\nh' : x ∈ ↑(Substructure.map (Embedding.toHom f) s)\n⊢ x ∈ range ↑f"],"content":"h"},{"tailPos":4337,"headPos":4336,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ ↑t\nh' : x ∈ ↑(Substructure.map (Embedding.toHom f) s)\n⊢ x ∈ range ↑f"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ ↑t\nh' : x ∈ ↑(Substructure.map (Embedding.toHom f) s)\n⊢ x ∈ range ↑f"],"content":"]"},{"tailPos":4343,"headPos":4331,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ ↑t\nh' : x ∈ ↑(LowerAdjoint.toFun (closure L) ↑t)\n⊢ x ∈ range ↑f"],"goalsAfter":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ ↑t\nh' : x ∈ ↑(Substructure.map (Embedding.toHom f) s)\n⊢ x ∈ range ↑f"],"content":"rw [h] at h'"},{"tailPos":4371,"headPos":4346,"goalsBefore":["case intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Finset N\nh : LowerAdjoint.toFun (closure L) ↑t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ ↑t\nh' : x ∈ ↑(Substructure.map (Embedding.toHom f) s)\n⊢ x ∈ range ↑f"],"goalsAfter":[],"content":"exact Hom.map_le_range h'"},{"tailPos":4371,"headPos":3987,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nhs : FG (Substructure.map (Embedding.toHom f) s)\n⊢ FG s"],"goalsAfter":[],"content":"rcases hs with ⟨t, h⟩\n  rw [fg_def]\n  refine' ⟨f ⁻¹' t, t.finite_toSet.preimage (f.injective.injOn _), _⟩\n  have hf : Function.Injective f.toHom := f.injective\n  refine' map_injective_of_injective hf _\n  rw [← h, map_closure, Embedding.coe_toHom, image_preimage_eq_of_subset]\n  intro x hx\n  have h' := subset_closure (L := L) hx\n  rw [h] at h'\n  exact Hom.map_le_range h'"},{"tailPos":3984,"headPos":3982,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nhs : FG (Substructure.map (Embedding.toHom f) s)\n⊢ FG s"],"goalsAfter":[],"content":"by"},{"tailPos":4371,"headPos":3982,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nhs : FG (Substructure.map (Embedding.toHom f) s)\n⊢ FG s"],"goalsAfter":[],"content":"by\n  rcases hs with ⟨t, h⟩\n  rw [fg_def]\n  refine' ⟨f ⁻¹' t, t.finite_toSet.preimage (f.injective.injOn _), _⟩\n  have hf : Function.Injective f.toHom := f.injective\n  refine' map_injective_of_injective hf _\n  rw [← h, map_closure, Embedding.coe_toHom, image_preimage_eq_of_subset]\n  intro x hx\n  have h' := subset_closure (L := L) hx\n  rw [h] at h'\n  exact Hom.map_le_range h'"},{"tailPos":5061,"headPos":5024,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : FG N\n⊢ CG N"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\ns : Set M\nhf : Set.Finite s\nh : FG (LowerAdjoint.toFun (closure L) s)\n⊢ CG (LowerAdjoint.toFun (closure L) s)"],"content":"obtain ⟨s, hf, rfl⟩ := fg_def.1 h"},{"tailPos":5098,"headPos":5064,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\ns : Set M\nhf : Set.Finite s\nh : FG (LowerAdjoint.toFun (closure L) s)\n⊢ CG (LowerAdjoint.toFun (closure L) s)"],"goalsAfter":[],"content":"refine' ⟨s, hf.countable, rfl⟩"},{"tailPos":5098,"headPos":5024,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : FG N\n⊢ CG N"],"goalsAfter":[],"content":"obtain ⟨s, hf, rfl⟩ := fg_def.1 h\n  refine' ⟨s, hf.countable, rfl⟩"},{"tailPos":5021,"headPos":5019,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : FG N\n⊢ CG N"],"goalsAfter":[],"content":"by"},{"tailPos":5098,"headPos":5019,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : FG N\n⊢ CG N"],"goalsAfter":[],"content":"by\n  obtain ⟨s, hf, rfl⟩ := fg_def.1 h\n  refine' ⟨s, hf.countable, rfl⟩"},{"tailPos":5360,"headPos":5354,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ CG N ↔ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N) ↔\n    ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"cg_def"},{"tailPos":5361,"headPos":5360,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N) ↔\n    ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N) ↔\n    ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"]"},{"tailPos":5361,"headPos":5350,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ CG N ↔ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N) ↔\n    ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"rw [cg_def]"},{"tailPos":5375,"headPos":5364,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N) ↔\n    ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["case mp\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N) →\n    ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N","case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N) →\n    ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"content":"constructor"},{"tailPos":5380,"headPos":5378,"goalsBefore":["case mp\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N) →\n    ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N","case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N) →\n    ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mp\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N) →\n    ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"·"},{"tailPos":5407,"headPos":5381,"goalsBefore":["case mp\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N) →\n    ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["case mp.intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"rintro ⟨S, Scount, hS⟩"},{"tailPos":5460,"headPos":5412,"goalsBefore":["case mp.intro.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["case mp.intro.intro.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : ↑N = ∅\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N","case mp.intro.intro.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"cases' eq_empty_or_nonempty (N : Set M) with h h"},{"tailPos":5467,"headPos":5465,"goalsBefore":["case mp.intro.intro.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : ↑N = ∅\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N","case mp.intro.intro.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["case mp.intro.intro.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : ↑N = ∅\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"·"},{"tailPos":5491,"headPos":5468,"goalsBefore":["case mp.intro.intro.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : ↑N = ∅\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":[],"content":"exact Or.intro_left _ h"},{"tailPos":5491,"headPos":5465,"goalsBefore":["case mp.intro.intro.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : ↑N = ∅\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N","case mp.intro.intro.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["case mp.intro.intro.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"· exact Or.intro_left _ h"},{"tailPos":5627,"headPos":5496,"goalsBefore":["case mp.intro.intro.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"content":"obtain ⟨f, h'⟩ :=\n      (Scount.union (Set.countable_singleton h.some)).exists_eq_range\n        (singleton_nonempty h.some).inr"},{"tailPos":5667,"headPos":5632,"goalsBefore":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ LowerAdjoint.toFun (closure L) (range f) = N"],"content":"refine' Or.intro_right _ ⟨f, _⟩"},{"tailPos":5683,"headPos":5676,"goalsBefore":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ LowerAdjoint.toFun (closure L) (range f) = N"],"goalsAfter":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ LowerAdjoint.toFun (closure L) (S ∪ {Set.Nonempty.some h}) = N"],"content":"← h',"},{"tailPos":5698,"headPos":5684,"goalsBefore":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ LowerAdjoint.toFun (closure L) (S ∪ {Set.Nonempty.some h}) = N"],"goalsAfter":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ LowerAdjoint.toFun (closure L) S ⊔ LowerAdjoint.toFun (closure L) {Set.Nonempty.some h} = N"],"content":"closure_union,"},{"tailPos":5702,"headPos":5699,"goalsBefore":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ LowerAdjoint.toFun (closure L) S ⊔ LowerAdjoint.toFun (closure L) {Set.Nonempty.some h} = N"],"goalsAfter":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ N ⊔ LowerAdjoint.toFun (closure L) {Set.Nonempty.some h} = N"],"content":"hS,"},{"tailPos":5715,"headPos":5703,"goalsBefore":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ N ⊔ LowerAdjoint.toFun (closure L) {Set.Nonempty.some h} = N"],"goalsAfter":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ LowerAdjoint.toFun (closure L) {Set.Nonempty.some h} ≤ N"],"content":"sup_eq_left,"},{"tailPos":5726,"headPos":5716,"goalsBefore":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ LowerAdjoint.toFun (closure L) {Set.Nonempty.some h} ≤ N"],"goalsAfter":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ {Set.Nonempty.some h} ⊆ ↑N"],"content":"closure_le"},{"tailPos":5727,"headPos":5726,"goalsBefore":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ {Set.Nonempty.some h} ⊆ ↑N"],"goalsAfter":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ {Set.Nonempty.some h} ⊆ ↑N"],"content":"]"},{"tailPos":5727,"headPos":5672,"goalsBefore":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ LowerAdjoint.toFun (closure L) (range f) = N"],"goalsAfter":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ {Set.Nonempty.some h} ⊆ ↑N"],"content":"rw [← h', closure_union, hS, sup_eq_left, closure_le]"},{"tailPos":5771,"headPos":5732,"goalsBefore":["case mp.intro.intro.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nS : Set M\nScount : Set.Countable S\nhS : LowerAdjoint.toFun (closure L) S = N\nh : Set.Nonempty ↑N\nf : ℕ → M\nh' : S ∪ {Set.Nonempty.some h} = range f\n⊢ {Set.Nonempty.some h} ⊆ ↑N"],"goalsAfter":[],"content":"exact singleton_subset_iff.2 h.some_mem"},{"tailPos":5771,"headPos":5381,"goalsBefore":["case mp\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N) →\n    ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":[],"content":"rintro ⟨S, Scount, hS⟩\n    cases' eq_empty_or_nonempty (N : Set M) with h h\n    · exact Or.intro_left _ h\n    obtain ⟨f, h'⟩ :=\n      (Scount.union (Set.countable_singleton h.some)).exists_eq_range\n        (singleton_nonempty h.some).inr\n    refine' Or.intro_right _ ⟨f, _⟩\n    rw [← h', closure_union, hS, sup_eq_left, closure_le]\n    exact singleton_subset_iff.2 h.some_mem"},{"tailPos":5771,"headPos":5378,"goalsBefore":["case mp\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N) →\n    ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N","case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N) →\n    ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N) →\n    ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"content":"· rintro ⟨S, Scount, hS⟩\n    cases' eq_empty_or_nonempty (N : Set M) with h h\n    · exact Or.intro_left _ h\n    obtain ⟨f, h'⟩ :=\n      (Scount.union (Set.countable_singleton h.some)).exists_eq_range\n        (singleton_nonempty h.some).inr\n    refine' Or.intro_right _ ⟨f, _⟩\n    rw [← h', closure_union, hS, sup_eq_left, closure_le]\n    exact singleton_subset_iff.2 h.some_mem"},{"tailPos":5776,"headPos":5774,"goalsBefore":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N) →\n    ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N) →\n    ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"content":"·"},{"tailPos":5784,"headPos":5777,"goalsBefore":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N) →\n    ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"content":"intro h"},{"tailPos":5806,"headPos":5789,"goalsBefore":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N","case mpr.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ∃ s, LowerAdjoint.toFun (closure L) (range s) = N\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"content":"cases' h with h h"},{"tailPos":5813,"headPos":5811,"goalsBefore":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N","case mpr.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ∃ s, LowerAdjoint.toFun (closure L) (range s) = N\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"content":"·"},{"tailPos":5885,"headPos":5814,"goalsBefore":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ N ≤ LowerAdjoint.toFun (closure L) ∅"],"content":"refine' ⟨∅, countable_empty, closure_eq_of_le (empty_subset _) _⟩"},{"tailPos":5923,"headPos":5896,"goalsBefore":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ N ≤ LowerAdjoint.toFun (closure L) ∅"],"goalsAfter":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ ↑N ⊆ ↑(LowerAdjoint.toFun (closure L) ∅)"],"content":"← SetLike.coe_subset_coe,"},{"tailPos":5925,"headPos":5924,"goalsBefore":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ ↑N ⊆ ↑(LowerAdjoint.toFun (closure L) ∅)"],"goalsAfter":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ ∅ ⊆ ↑(LowerAdjoint.toFun (closure L) ∅)"],"content":"h"},{"tailPos":5926,"headPos":5925,"goalsBefore":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ ∅ ⊆ ↑(LowerAdjoint.toFun (closure L) ∅)"],"goalsAfter":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ ∅ ⊆ ↑(LowerAdjoint.toFun (closure L) ∅)"],"content":"]"},{"tailPos":5926,"headPos":5892,"goalsBefore":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ N ≤ LowerAdjoint.toFun (closure L) ∅"],"goalsAfter":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ ∅ ⊆ ↑(LowerAdjoint.toFun (closure L) ∅)"],"content":"rw [← SetLike.coe_subset_coe, h]"},{"tailPos":5953,"headPos":5933,"goalsBefore":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ ∅ ⊆ ↑(LowerAdjoint.toFun (closure L) ∅)"],"goalsAfter":[],"content":"exact empty_subset _"},{"tailPos":5953,"headPos":5814,"goalsBefore":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":[],"content":"refine' ⟨∅, countable_empty, closure_eq_of_le (empty_subset _) _⟩\n      rw [← SetLike.coe_subset_coe, h]\n      exact empty_subset _"},{"tailPos":5953,"headPos":5811,"goalsBefore":["case mpr.inl\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ↑N = ∅\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N","case mpr.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ∃ s, LowerAdjoint.toFun (closure L) (range s) = N\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mpr.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ∃ s, LowerAdjoint.toFun (closure L) (range s) = N\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"content":"· refine' ⟨∅, countable_empty, closure_eq_of_le (empty_subset _) _⟩\n      rw [← SetLike.coe_subset_coe, h]\n      exact empty_subset _"},{"tailPos":5960,"headPos":5958,"goalsBefore":["case mpr.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ∃ s, LowerAdjoint.toFun (closure L) (range s) = N\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mpr.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ∃ s, LowerAdjoint.toFun (closure L) (range s) = N\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"content":"·"},{"tailPos":5985,"headPos":5961,"goalsBefore":["case mpr.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ∃ s, LowerAdjoint.toFun (closure L) (range s) = N\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":["case mpr.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nf : ℕ → M\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = LowerAdjoint.toFun (closure L) (range f)"],"content":"obtain ⟨f, rfl⟩ := h"},{"tailPos":6035,"headPos":5992,"goalsBefore":["case mpr.inr.intro\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nf : ℕ → M\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = LowerAdjoint.toFun (closure L) (range f)"],"goalsAfter":[],"content":"exact ⟨range f, countable_range _, rfl⟩"},{"tailPos":6035,"headPos":5961,"goalsBefore":["case mpr.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ∃ s, LowerAdjoint.toFun (closure L) (range s) = N\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":[],"content":"obtain ⟨f, rfl⟩ := h\n      exact ⟨range f, countable_range _, rfl⟩"},{"tailPos":6035,"headPos":5958,"goalsBefore":["case mpr.inr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\nh : ∃ s, LowerAdjoint.toFun (closure L) (range s) = N\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":[],"content":"· obtain ⟨f, rfl⟩ := h\n      exact ⟨range f, countable_range _, rfl⟩"},{"tailPos":6035,"headPos":5777,"goalsBefore":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N) →\n    ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":[],"content":"intro h\n    cases' h with h h\n    · refine' ⟨∅, countable_empty, closure_eq_of_le (empty_subset _) _⟩\n      rw [← SetLike.coe_subset_coe, h]\n      exact empty_subset _\n    · obtain ⟨f, rfl⟩ := h\n      exact ⟨range f, countable_range _, rfl⟩"},{"tailPos":6035,"headPos":5774,"goalsBefore":["case mpr\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ (↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N) →\n    ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = N"],"goalsAfter":[],"content":"· intro h\n    cases' h with h h\n    · refine' ⟨∅, countable_empty, closure_eq_of_le (empty_subset _) _⟩\n      rw [← SetLike.coe_subset_coe, h]\n      exact empty_subset _\n    · obtain ⟨f, rfl⟩ := h\n      exact ⟨range f, countable_range _, rfl⟩"},{"tailPos":6035,"headPos":5350,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ CG N ↔ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":[],"content":"rw [cg_def]\n  constructor\n  · rintro ⟨S, Scount, hS⟩\n    cases' eq_empty_or_nonempty (N : Set M) with h h\n    · exact Or.intro_left _ h\n    obtain ⟨f, h'⟩ :=\n      (Scount.union (Set.countable_singleton h.some)).exists_eq_range\n        (singleton_nonempty h.some).inr\n    refine' Or.intro_right _ ⟨f, _⟩\n    rw [← h', closure_union, hS, sup_eq_left, closure_le]\n    exact singleton_subset_iff.2 h.some_mem\n  · intro h\n    cases' h with h h\n    · refine' ⟨∅, countable_empty, closure_eq_of_le (empty_subset _) _⟩\n      rw [← SetLike.coe_subset_coe, h]\n      exact empty_subset _\n    · obtain ⟨f, rfl⟩ := h\n      exact ⟨range f, countable_range _, rfl⟩"},{"tailPos":5347,"headPos":5345,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ CG N ↔ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":[],"content":"by"},{"tailPos":6035,"headPos":5345,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN : Substructure L M\n⊢ CG N ↔ ↑N = ∅ ∨ ∃ s, LowerAdjoint.toFun (closure L) (range s) = N"],"goalsAfter":[],"content":"by\n  rw [cg_def]\n  constructor\n  · rintro ⟨S, Scount, hS⟩\n    cases' eq_empty_or_nonempty (N : Set M) with h h\n    · exact Or.intro_left _ h\n    obtain ⟨f, h'⟩ :=\n      (Scount.union (Set.countable_singleton h.some)).exists_eq_range\n        (singleton_nonempty h.some).inr\n    refine' Or.intro_right _ ⟨f, _⟩\n    rw [← h', closure_union, hS, sup_eq_left, closure_le]\n    exact singleton_subset_iff.2 h.some_mem\n  · intro h\n    cases' h with h h\n    · refine' ⟨∅, countable_empty, closure_eq_of_le (empty_subset _) _⟩\n      rw [← SetLike.coe_subset_coe, h]\n      exact empty_subset _\n    · obtain ⟨f, rfl⟩ := h\n      exact ⟨range f, countable_range _, rfl⟩"},{"tailPos":7019,"headPos":7005,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : CG N₁\nhN₂ : CG N₂\nt₁ : Set M\nht₁ : Set.Countable t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Countable t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ LowerAdjoint.toFun (closure L) (t₁ ∪ t₂) = N₁ ⊔ N₂"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : CG N₁\nhN₂ : CG N₂\nt₁ : Set M\nht₁ : Set.Countable t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Countable t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ LowerAdjoint.toFun (closure L) t₁ ⊔ LowerAdjoint.toFun (closure L) t₂ = N₁ ⊔ N₂"],"content":"closure_union,"},{"tailPos":7028,"headPos":7020,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : CG N₁\nhN₂ : CG N₂\nt₁ : Set M\nht₁ : Set.Countable t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Countable t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ LowerAdjoint.toFun (closure L) t₁ ⊔ LowerAdjoint.toFun (closure L) t₂ = N₁ ⊔ N₂"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : CG N₁\nhN₂ : CG N₂\nt₁ : Set M\nht₁ : Set.Countable t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Countable t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ N₁ ⊔ LowerAdjoint.toFun (closure L) t₂ = N₁ ⊔ N₂"],"content":"ht₁.2,"},{"tailPos":7036,"headPos":7029,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : CG N₁\nhN₂ : CG N₂\nt₁ : Set M\nht₁ : Set.Countable t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Countable t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ N₁ ⊔ LowerAdjoint.toFun (closure L) t₂ = N₁ ⊔ N₂"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : CG N₁\nhN₂ : CG N₂\nt₁ : Set M\nht₁ : Set.Countable t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Countable t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ N₁ ⊔ N₂ = N₁ ⊔ N₂"],"content":"ht₂.2"},{"tailPos":7037,"headPos":7036,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : CG N₁\nhN₂ : CG N₂\nt₁ : Set M\nht₁ : Set.Countable t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Countable t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ N₁ ⊔ N₂ = N₁ ⊔ N₂"],"goalsAfter":[],"content":"]"},{"tailPos":7037,"headPos":7001,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : CG N₁\nhN₂ : CG N₂\nt₁ : Set M\nht₁ : Set.Countable t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Countable t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ LowerAdjoint.toFun (closure L) (t₁ ∪ t₂) = N₁ ⊔ N₂"],"goalsAfter":[],"content":"rw [closure_union, ht₁.2, ht₂.2]"},{"tailPos":7000,"headPos":6998,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : CG N₁\nhN₂ : CG N₂\nt₁ : Set M\nht₁ : Set.Countable t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Countable t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ LowerAdjoint.toFun (closure L) (t₁ ∪ t₂) = N₁ ⊔ N₂"],"goalsAfter":[],"content":"by"},{"tailPos":7037,"headPos":6998,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nN₁ N₂ : Substructure L M\nhN₁ : CG N₁\nhN₂ : CG N₂\nt₁ : Set M\nht₁ : Set.Countable t₁ ∧ LowerAdjoint.toFun (closure L) t₁ = N₁\nt₂ : Set M\nht₂ : Set.Countable t₂ ∧ LowerAdjoint.toFun (closure L) t₂ = N₂\n⊢ LowerAdjoint.toFun (closure L) (t₁ ∪ t₂) = N₁ ⊔ N₂"],"goalsAfter":[],"content":"by rw [closure_union, ht₁.2, ht₂.2]"},{"tailPos":7338,"headPos":7324,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : CG s\nt : Set M\nht : Set.Countable t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ LowerAdjoint.toFun (closure L) (↑f '' t) = Substructure.map f s"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : CG s\nt : Set M\nht : Set.Countable t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ Substructure.map f (LowerAdjoint.toFun (closure L) t) = Substructure.map f s"],"content":"closure_image,"},{"tailPos":7343,"headPos":7339,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : CG s\nt : Set M\nht : Set.Countable t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ Substructure.map f (LowerAdjoint.toFun (closure L) t) = Substructure.map f s"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : CG s\nt : Set M\nht : Set.Countable t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ Substructure.map f s = Substructure.map f s"],"content":"ht.2"},{"tailPos":7344,"headPos":7343,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : CG s\nt : Set M\nht : Set.Countable t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ Substructure.map f s = Substructure.map f s"],"goalsAfter":[],"content":"]"},{"tailPos":7344,"headPos":7320,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : CG s\nt : Set M\nht : Set.Countable t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ LowerAdjoint.toFun (closure L) (↑f '' t) = Substructure.map f s"],"goalsAfter":[],"content":"rw [closure_image, ht.2]"},{"tailPos":7319,"headPos":7317,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : CG s\nt : Set M\nht : Set.Countable t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ LowerAdjoint.toFun (closure L) (↑f '' t) = Substructure.map f s"],"goalsAfter":[],"content":"by"},{"tailPos":7344,"headPos":7317,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M →[L] N\ns : Substructure L M\nhs : CG s\nt : Set M\nht : Set.Countable t ∧ LowerAdjoint.toFun (closure L) t = s\n⊢ LowerAdjoint.toFun (closure L) (↑f '' t) = Substructure.map f s"],"goalsAfter":[],"content":"by rw [closure_image, ht.2]"},{"tailPos":7609,"headPos":7579,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nhs : CG (Substructure.map (Embedding.toHom f) s)\n⊢ CG s"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\n⊢ CG s"],"content":"rcases hs with ⟨t, h1, h2⟩"},{"tailPos":7622,"headPos":7616,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\n⊢ CG s"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = s"],"content":"cg_def"},{"tailPos":7623,"headPos":7622,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = s"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = s"],"content":"]"},{"tailPos":7623,"headPos":7612,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\n⊢ CG s"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = s"],"content":"rw [cg_def]"},{"tailPos":7678,"headPos":7626,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\n⊢ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = s"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\n⊢ LowerAdjoint.toFun (closure L) (↑f ⁻¹' t) = s"],"content":"refine' ⟨f ⁻¹' t, h1.preimage f.injective, _⟩"},{"tailPos":7732,"headPos":7681,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\n⊢ LowerAdjoint.toFun (closure L) (↑f ⁻¹' t) = s"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) (↑f ⁻¹' t) = s"],"content":"have hf : Function.Injective f.toHom := f.injective"},{"tailPos":7774,"headPos":7735,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) (↑f ⁻¹' t) = s"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ Substructure.map (Embedding.toHom f) (LowerAdjoint.toFun (closure L) (↑f ⁻¹' t)) =\n    Substructure.map (Embedding.toHom f) s"],"content":"refine' map_injective_of_injective hf _"},{"tailPos":7788,"headPos":7781,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ Substructure.map (Embedding.toHom f) (LowerAdjoint.toFun (closure L) (↑f ⁻¹' t)) =\n    Substructure.map (Embedding.toHom f) s"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ Substructure.map (Embedding.toHom f) (LowerAdjoint.toFun (closure L) (↑f ⁻¹' t)) = LowerAdjoint.toFun (closure L) t"],"content":"← h2,"},{"tailPos":7801,"headPos":7789,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ Substructure.map (Embedding.toHom f) (LowerAdjoint.toFun (closure L) (↑f ⁻¹' t)) = LowerAdjoint.toFun (closure L) t"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) (↑(Embedding.toHom f) '' (↑f ⁻¹' t)) = LowerAdjoint.toFun (closure L) t"],"content":"map_closure,"},{"tailPos":7822,"headPos":7802,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) (↑(Embedding.toHom f) '' (↑f ⁻¹' t)) = LowerAdjoint.toFun (closure L) t"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) (↑f '' (↑f ⁻¹' t)) = LowerAdjoint.toFun (closure L) t"],"content":"Embedding.coe_toHom,"},{"tailPos":7850,"headPos":7823,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) (↑f '' (↑f ⁻¹' t)) = LowerAdjoint.toFun (closure L) t"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) t = LowerAdjoint.toFun (closure L) t","case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ t ⊆ range ↑f"],"content":"image_preimage_eq_of_subset"},{"tailPos":7851,"headPos":7850,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ LowerAdjoint.toFun (closure L) t = LowerAdjoint.toFun (closure L) t","case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ t ⊆ range ↑f"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ t ⊆ range ↑f"],"content":"]"},{"tailPos":7851,"headPos":7777,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ Substructure.map (Embedding.toHom f) (LowerAdjoint.toFun (closure L) (↑f ⁻¹' t)) =\n    Substructure.map (Embedding.toHom f) s"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ t ⊆ range ↑f"],"content":"rw [← h2, map_closure, Embedding.coe_toHom, image_preimage_eq_of_subset]"},{"tailPos":7864,"headPos":7854,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\n⊢ t ⊆ range ↑f"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ t\n⊢ x ∈ range ↑f"],"content":"intro x hx"},{"tailPos":7904,"headPos":7867,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ t\n⊢ x ∈ range ↑f"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ t\nh' : x ∈ ↑(LowerAdjoint.toFun (closure L) t)\n⊢ x ∈ range ↑f"],"content":"have h' := subset_closure (L := L) hx"},{"tailPos":7913,"headPos":7911,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ t\nh' : x ∈ ↑(LowerAdjoint.toFun (closure L) t)\n⊢ x ∈ range ↑f"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ t\nh' : x ∈ ↑(Substructure.map (Embedding.toHom f) s)\n⊢ x ∈ range ↑f"],"content":"h2"},{"tailPos":7914,"headPos":7913,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ t\nh' : x ∈ ↑(Substructure.map (Embedding.toHom f) s)\n⊢ x ∈ range ↑f"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ t\nh' : x ∈ ↑(Substructure.map (Embedding.toHom f) s)\n⊢ x ∈ range ↑f"],"content":"]"},{"tailPos":7920,"headPos":7907,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ t\nh' : x ∈ ↑(LowerAdjoint.toFun (closure L) t)\n⊢ x ∈ range ↑f"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ t\nh' : x ∈ ↑(Substructure.map (Embedding.toHom f) s)\n⊢ x ∈ range ↑f"],"content":"rw [h2] at h'"},{"tailPos":7948,"headPos":7923,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nt : Set N\nh1 : Set.Countable t\nh2 : LowerAdjoint.toFun (closure L) t = Substructure.map (Embedding.toHom f) s\nhf : Function.Injective ↑(Embedding.toHom f)\nx : N\nhx : x ∈ t\nh' : x ∈ ↑(Substructure.map (Embedding.toHom f) s)\n⊢ x ∈ range ↑f"],"goalsAfter":[],"content":"exact Hom.map_le_range h'"},{"tailPos":7948,"headPos":7579,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nhs : CG (Substructure.map (Embedding.toHom f) s)\n⊢ CG s"],"goalsAfter":[],"content":"rcases hs with ⟨t, h1, h2⟩\n  rw [cg_def]\n  refine' ⟨f ⁻¹' t, h1.preimage f.injective, _⟩\n  have hf : Function.Injective f.toHom := f.injective\n  refine' map_injective_of_injective hf _\n  rw [← h2, map_closure, Embedding.coe_toHom, image_preimage_eq_of_subset]\n  intro x hx\n  have h' := subset_closure (L := L) hx\n  rw [h2] at h'\n  exact Hom.map_le_range h'"},{"tailPos":7576,"headPos":7574,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nhs : CG (Substructure.map (Embedding.toHom f) s)\n⊢ CG s"],"goalsAfter":[],"content":"by"},{"tailPos":7948,"headPos":7574,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nf : M ↪[L] N\ns : Substructure L M\nhs : CG (Substructure.map (Embedding.toHom f) s)\n⊢ CG s"],"goalsAfter":[],"content":"by\n  rcases hs with ⟨t, h1, h2⟩\n  rw [cg_def]\n  refine' ⟨f ⁻¹' t, h1.preimage f.injective, _⟩\n  have hf : Function.Injective f.toHom := f.injective\n  refine' map_injective_of_injective hf _\n  rw [← h2, map_closure, Embedding.coe_toHom, image_preimage_eq_of_subset]\n  intro x hx\n  have h' := subset_closure (L := L) hx\n  rw [h2] at h'\n  exact Hom.map_le_range h'"},{"tailPos":8237,"headPos":8180,"goalsBefore":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\ns : Substructure L M\n⊢ CG s ↔ Countable { x // x ∈ s }"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\ns : Substructure L M\n⊢ CG s → Countable { x // x ∈ s }"],"content":"refine' ⟨_, fun h => ⟨s, h.to_set, s.closure_eq⟩⟩"},{"tailPos":8262,"headPos":8240,"goalsBefore":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\ns : Substructure L M\n⊢ CG s → Countable { x // x ∈ s }"],"goalsAfter":["case intro.intro\nL : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\ns : Set M\nh : Set.Countable s\n⊢ Countable { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"content":"rintro ⟨s, h, rfl⟩"},{"tailPos":8295,"headPos":8265,"goalsBefore":["case intro.intro\nL : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\ns : Set M\nh : Set.Countable s\n⊢ Countable { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"goalsAfter":[],"content":"exact h.substructure_closure L"},{"tailPos":8295,"headPos":8180,"goalsBefore":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\ns : Substructure L M\n⊢ CG s ↔ Countable { x // x ∈ s }"],"goalsAfter":[],"content":"refine' ⟨_, fun h => ⟨s, h.to_set, s.closure_eq⟩⟩\n  rintro ⟨s, h, rfl⟩\n  exact h.substructure_closure L"},{"tailPos":8177,"headPos":8175,"goalsBefore":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\ns : Substructure L M\n⊢ CG s ↔ Countable { x // x ∈ s }"],"goalsAfter":[],"content":"by"},{"tailPos":8295,"headPos":8175,"goalsBefore":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\ns : Substructure L M\n⊢ CG s ↔ Countable { x // x ∈ s }"],"goalsAfter":[],"content":"by\n  refine' ⟨_, fun h => ⟨s, h.to_set, s.closure_eq⟩⟩\n  rintro ⟨s, h, rfl⟩\n  exact h.substructure_closure L"},{"tailPos":9362,"headPos":9355,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ FG L M ↔ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ Substructure.FG ⊤ ↔ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"content":"fg_def,"},{"tailPos":9382,"headPos":9363,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ Substructure.FG ⊤ ↔ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = ⊤) ↔ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"content":"Substructure.fg_def"},{"tailPos":9383,"headPos":9382,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ (∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = ⊤) ↔ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"goalsAfter":[],"content":"]"},{"tailPos":9383,"headPos":9351,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ FG L M ↔ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"goalsAfter":[],"content":"rw [fg_def, Substructure.fg_def]"},{"tailPos":9348,"headPos":9346,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ FG L M ↔ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"goalsAfter":[],"content":"by"},{"tailPos":9383,"headPos":9346,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ FG L M ↔ ∃ S, Set.Finite S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"goalsAfter":[],"content":"by\n  rw [fg_def, Substructure.fg_def]"},{"tailPos":9584,"headPos":9568,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\n⊢ Substructure.FG (Hom.range f)"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\n⊢ Substructure.FG (map f ⊤)"],"content":"Hom.range_eq_map"},{"tailPos":9585,"headPos":9584,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\n⊢ Substructure.FG (map f ⊤)"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\n⊢ Substructure.FG (map f ⊤)"],"content":"]"},{"tailPos":9585,"headPos":9564,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\n⊢ Substructure.FG (Hom.range f)"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\n⊢ Substructure.FG (map f ⊤)"],"content":"rw [Hom.range_eq_map]"},{"tailPos":9612,"headPos":9588,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\n⊢ Substructure.FG (map f ⊤)"],"goalsAfter":[],"content":"exact (fg_def.1 h).map f"},{"tailPos":9612,"headPos":9564,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\n⊢ Substructure.FG (Hom.range f)"],"goalsAfter":[],"content":"rw [Hom.range_eq_map]\n  exact (fg_def.1 h).map f"},{"tailPos":9561,"headPos":9559,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\n⊢ Substructure.FG (Hom.range f)"],"goalsAfter":[],"content":"by"},{"tailPos":9612,"headPos":9559,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\n⊢ Substructure.FG (Hom.range f)"],"goalsAfter":[],"content":"by\n  rw [Hom.range_eq_map]\n  exact (fg_def.1 h).map f"},{"tailPos":9862,"headPos":9842,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Function.Surjective ↑f\n⊢ FG L N"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ FG L N"],"content":"← Hom.range_eq_top"},{"tailPos":9863,"headPos":9862,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ FG L N"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ FG L N"],"content":"]"},{"tailPos":9869,"headPos":9838,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Function.Surjective ↑f\n⊢ FG L N"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ FG L N"],"content":"rw [← Hom.range_eq_top] at hs"},{"tailPos":9883,"headPos":9876,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ FG L N"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.FG ⊤"],"content":"fg_def,"},{"tailPos":9890,"headPos":9884,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.FG ⊤"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.FG (Hom.range f)"],"content":"← hs"},{"tailPos":9891,"headPos":9890,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.FG (Hom.range f)"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.FG (Hom.range f)"],"content":"]"},{"tailPos":9891,"headPos":9872,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ FG L N"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.FG (Hom.range f)"],"content":"rw [fg_def, ← hs]"},{"tailPos":9909,"headPos":9894,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.FG (Hom.range f)"],"goalsAfter":[],"content":"exact h.range f"},{"tailPos":9909,"headPos":9838,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Function.Surjective ↑f\n⊢ FG L N"],"goalsAfter":[],"content":"rw [← Hom.range_eq_top] at hs\n  rw [fg_def, ← hs]\n  exact h.range f"},{"tailPos":9835,"headPos":9833,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Function.Surjective ↑f\n⊢ FG L N"],"goalsAfter":[],"content":"by"},{"tailPos":9909,"headPos":9833,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : FG L M\nf : M →[L] N\nhs : Function.Surjective ↑f\n⊢ FG L N"],"goalsAfter":[],"content":"by\n  rw [← Hom.range_eq_top] at hs\n  rw [fg_def, ← hs]\n  exact h.range f"},{"tailPos":10370,"headPos":10363,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ CG L M ↔ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ Substructure.CG ⊤ ↔ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"content":"cg_def,"},{"tailPos":10390,"headPos":10371,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ Substructure.CG ⊤ ↔ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ (∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = ⊤) ↔\n    ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"content":"Substructure.cg_def"},{"tailPos":10391,"headPos":10390,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ (∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = ⊤) ↔\n    ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"goalsAfter":[],"content":"]"},{"tailPos":10391,"headPos":10359,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ CG L M ↔ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"goalsAfter":[],"content":"rw [cg_def, Substructure.cg_def]"},{"tailPos":10356,"headPos":10354,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ CG L M ↔ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"goalsAfter":[],"content":"by"},{"tailPos":10391,"headPos":10354,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\n⊢ CG L M ↔ ∃ S, Set.Countable S ∧ LowerAdjoint.toFun (closure L) S = ⊤"],"goalsAfter":[],"content":"by\n  rw [cg_def, Substructure.cg_def]"},{"tailPos":10592,"headPos":10576,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\n⊢ Substructure.CG (Hom.range f)"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\n⊢ Substructure.CG (map f ⊤)"],"content":"Hom.range_eq_map"},{"tailPos":10593,"headPos":10592,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\n⊢ Substructure.CG (map f ⊤)"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\n⊢ Substructure.CG (map f ⊤)"],"content":"]"},{"tailPos":10593,"headPos":10572,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\n⊢ Substructure.CG (Hom.range f)"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\n⊢ Substructure.CG (map f ⊤)"],"content":"rw [Hom.range_eq_map]"},{"tailPos":10620,"headPos":10596,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\n⊢ Substructure.CG (map f ⊤)"],"goalsAfter":[],"content":"exact (cg_def.1 h).map f"},{"tailPos":10620,"headPos":10572,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\n⊢ Substructure.CG (Hom.range f)"],"goalsAfter":[],"content":"rw [Hom.range_eq_map]\n  exact (cg_def.1 h).map f"},{"tailPos":10569,"headPos":10567,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\n⊢ Substructure.CG (Hom.range f)"],"goalsAfter":[],"content":"by"},{"tailPos":10620,"headPos":10567,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\n⊢ Substructure.CG (Hom.range f)"],"goalsAfter":[],"content":"by\n  rw [Hom.range_eq_map]\n  exact (cg_def.1 h).map f"},{"tailPos":10870,"headPos":10850,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Function.Surjective ↑f\n⊢ CG L N"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ CG L N"],"content":"← Hom.range_eq_top"},{"tailPos":10871,"headPos":10870,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ CG L N"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ CG L N"],"content":"]"},{"tailPos":10877,"headPos":10846,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Function.Surjective ↑f\n⊢ CG L N"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ CG L N"],"content":"rw [← Hom.range_eq_top] at hs"},{"tailPos":10891,"headPos":10884,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ CG L N"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.CG ⊤"],"content":"cg_def,"},{"tailPos":10898,"headPos":10892,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.CG ⊤"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.CG (Hom.range f)"],"content":"← hs"},{"tailPos":10899,"headPos":10898,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.CG (Hom.range f)"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.CG (Hom.range f)"],"content":"]"},{"tailPos":10899,"headPos":10880,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ CG L N"],"goalsAfter":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.CG (Hom.range f)"],"content":"rw [cg_def, ← hs]"},{"tailPos":10917,"headPos":10902,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Hom.range f = ⊤\n⊢ Substructure.CG (Hom.range f)"],"goalsAfter":[],"content":"exact h.range f"},{"tailPos":10917,"headPos":10846,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Function.Surjective ↑f\n⊢ CG L N"],"goalsAfter":[],"content":"rw [← Hom.range_eq_top] at hs\n  rw [cg_def, ← hs]\n  exact h.range f"},{"tailPos":10843,"headPos":10841,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Function.Surjective ↑f\n⊢ CG L N"],"goalsAfter":[],"content":"by"},{"tailPos":10917,"headPos":10841,"goalsBefore":["L : Language\nM : Type u_4\ninst✝¹ : Structure L M\nN : Type u_1\ninst✝ : Structure L N\nh : CG L M\nf : M →[L] N\nhs : Function.Surjective ↑f\n⊢ CG L N"],"goalsAfter":[],"content":"by\n  rw [← Hom.range_eq_top] at hs\n  rw [cg_def, ← hs]\n  exact h.range f"},{"tailPos":11131,"headPos":11124,"goalsBefore":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\n⊢ CG L M ↔ Countable M"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\n⊢ Substructure.CG ⊤ ↔ Countable M"],"content":"cg_def,"},{"tailPos":11162,"headPos":11132,"goalsBefore":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\n⊢ Substructure.CG ⊤ ↔ Countable M"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\n⊢ Countable { x // x ∈ ⊤ } ↔ Countable M"],"content":"Substructure.cg_iff_countable,"},{"tailPos":11193,"headPos":11163,"goalsBefore":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\n⊢ Countable { x // x ∈ ⊤ } ↔ Countable M"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\n⊢ Countable M ↔ Countable M"],"content":"topEquiv.toEquiv.countable_iff"},{"tailPos":11194,"headPos":11193,"goalsBefore":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\n⊢ Countable M ↔ Countable M"],"goalsAfter":[],"content":"]"},{"tailPos":11194,"headPos":11120,"goalsBefore":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\n⊢ CG L M ↔ Countable M"],"goalsAfter":[],"content":"rw [cg_def, Substructure.cg_iff_countable, topEquiv.toEquiv.countable_iff]"},{"tailPos":11117,"headPos":11115,"goalsBefore":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\n⊢ CG L M ↔ Countable M"],"goalsAfter":[],"content":"by"},{"tailPos":11194,"headPos":11115,"goalsBefore":["L : Language\nM : Type u_3\ninst✝¹ : Structure L M\ninst✝ : Countable ((l : ℕ) × Functions L l)\n⊢ CG L M ↔ Countable M"],"goalsAfter":[],"content":"by\n  rw [cg_def, Substructure.cg_iff_countable, topEquiv.toEquiv.countable_iff]"},{"tailPos":12063,"headPos":12047,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ FG S ↔ Structure.FG L { x // x ∈ S }"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ FG S ↔ FG ⊤"],"content":"Structure.fg_def"},{"tailPos":12064,"headPos":12063,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ FG S ↔ FG ⊤"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ FG S ↔ FG ⊤"],"content":"]"},{"tailPos":12064,"headPos":12043,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ FG S ↔ Structure.FG L { x // x ∈ S }"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ FG S ↔ FG ⊤"],"content":"rw [Structure.fg_def]"},{"tailPos":12133,"headPos":12067,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ FG S ↔ FG ⊤"],"goalsAfter":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG (map (Embedding.toHom (subtype S)) ⊤)","case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG ⊤\n⊢ FG S"],"content":"refine' ⟨fun h => FG.of_map_embedding S.subtype _, fun h => _⟩"},{"tailPos":12138,"headPos":12136,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG (map (Embedding.toHom (subtype S)) ⊤)","case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG ⊤\n⊢ FG S"],"goalsAfter":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG (map (Embedding.toHom (subtype S)) ⊤)"],"content":"·"},{"tailPos":12164,"headPos":12143,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG (map (Embedding.toHom (subtype S)) ⊤)"],"goalsAfter":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG (Hom.range (Embedding.toHom (subtype S)))"],"content":"← Hom.range_eq_map,"},{"tailPos":12178,"headPos":12165,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG (Hom.range (Embedding.toHom (subtype S)))"],"goalsAfter":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG S"],"content":"range_subtype"},{"tailPos":12179,"headPos":12178,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG S"],"goalsAfter":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG S"],"content":"]"},{"tailPos":12179,"headPos":12139,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG (map (Embedding.toHom (subtype S)) ⊤)"],"goalsAfter":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG S"],"content":"rw [← Hom.range_eq_map, range_subtype]"},{"tailPos":12191,"headPos":12184,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG S"],"goalsAfter":[],"content":"exact h"},{"tailPos":12191,"headPos":12139,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG (map (Embedding.toHom (subtype S)) ⊤)"],"goalsAfter":[],"content":"rw [← Hom.range_eq_map, range_subtype]\n    exact h"},{"tailPos":12191,"headPos":12136,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG S\n⊢ FG (map (Embedding.toHom (subtype S)) ⊤)","case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG ⊤\n⊢ FG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG ⊤\n⊢ FG S"],"content":"· rw [← Hom.range_eq_map, range_subtype]\n    exact h"},{"tailPos":12196,"headPos":12194,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG ⊤\n⊢ FG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG ⊤\n⊢ FG S"],"content":"·"},{"tailPos":12228,"headPos":12197,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG ⊤\n⊢ FG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : FG ⊤\nh : FG (map (Embedding.toHom (subtype S)) ⊤)\n⊢ FG S"],"content":"have h := h.map S.subtype.toHom"},{"tailPos":12258,"headPos":12237,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : FG ⊤\nh : FG (map (Embedding.toHom (subtype S)) ⊤)\n⊢ FG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : FG ⊤\nh : FG (Hom.range (Embedding.toHom (subtype S)))\n⊢ FG S"],"content":"← Hom.range_eq_map,"},{"tailPos":12272,"headPos":12259,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : FG ⊤\nh : FG (Hom.range (Embedding.toHom (subtype S)))\n⊢ FG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : FG ⊤\nh : FG S\n⊢ FG S"],"content":"range_subtype"},{"tailPos":12273,"headPos":12272,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : FG ⊤\nh : FG S\n⊢ FG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : FG ⊤\nh : FG S\n⊢ FG S"],"content":"]"},{"tailPos":12278,"headPos":12233,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : FG ⊤\nh : FG (map (Embedding.toHom (subtype S)) ⊤)\n⊢ FG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : FG ⊤\nh : FG S\n⊢ FG S"],"content":"rw [← Hom.range_eq_map, range_subtype] at h"},{"tailPos":12290,"headPos":12283,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : FG ⊤\nh : FG S\n⊢ FG S"],"goalsAfter":[],"content":"exact h"},{"tailPos":12290,"headPos":12197,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG ⊤\n⊢ FG S"],"goalsAfter":[],"content":"have h := h.map S.subtype.toHom\n    rw [← Hom.range_eq_map, range_subtype] at h\n    exact h"},{"tailPos":12290,"headPos":12194,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : FG ⊤\n⊢ FG S"],"goalsAfter":[],"content":"· have h := h.map S.subtype.toHom\n    rw [← Hom.range_eq_map, range_subtype] at h\n    exact h"},{"tailPos":12290,"headPos":12043,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ FG S ↔ Structure.FG L { x // x ∈ S }"],"goalsAfter":[],"content":"rw [Structure.fg_def]\n  refine' ⟨fun h => FG.of_map_embedding S.subtype _, fun h => _⟩\n  · rw [← Hom.range_eq_map, range_subtype]\n    exact h\n  · have h := h.map S.subtype.toHom\n    rw [← Hom.range_eq_map, range_subtype] at h\n    exact h"},{"tailPos":12040,"headPos":12038,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ FG S ↔ Structure.FG L { x // x ∈ S }"],"goalsAfter":[],"content":"by"},{"tailPos":12290,"headPos":12038,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ FG S ↔ Structure.FG L { x // x ∈ S }"],"goalsAfter":[],"content":"by\n  rw [Structure.fg_def]\n  refine' ⟨fun h => FG.of_map_embedding S.subtype _, fun h => _⟩\n  · rw [← Hom.range_eq_map, range_subtype]\n    exact h\n  · have h := h.map S.subtype.toHom\n    rw [← Hom.range_eq_map, range_subtype] at h\n    exact h"},{"tailPos":12896,"headPos":12880,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ CG S ↔ Structure.CG L { x // x ∈ S }"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ CG S ↔ CG ⊤"],"content":"Structure.cg_def"},{"tailPos":12897,"headPos":12896,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ CG S ↔ CG ⊤"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ CG S ↔ CG ⊤"],"content":"]"},{"tailPos":12897,"headPos":12876,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ CG S ↔ Structure.CG L { x // x ∈ S }"],"goalsAfter":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ CG S ↔ CG ⊤"],"content":"rw [Structure.cg_def]"},{"tailPos":12966,"headPos":12900,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ CG S ↔ CG ⊤"],"goalsAfter":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG (map (Embedding.toHom (subtype S)) ⊤)","case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG ⊤\n⊢ CG S"],"content":"refine' ⟨fun h => CG.of_map_embedding S.subtype _, fun h => _⟩"},{"tailPos":12971,"headPos":12969,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG (map (Embedding.toHom (subtype S)) ⊤)","case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG ⊤\n⊢ CG S"],"goalsAfter":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG (map (Embedding.toHom (subtype S)) ⊤)"],"content":"·"},{"tailPos":12997,"headPos":12976,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG (map (Embedding.toHom (subtype S)) ⊤)"],"goalsAfter":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG (Hom.range (Embedding.toHom (subtype S)))"],"content":"← Hom.range_eq_map,"},{"tailPos":13011,"headPos":12998,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG (Hom.range (Embedding.toHom (subtype S)))"],"goalsAfter":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG S"],"content":"range_subtype"},{"tailPos":13012,"headPos":13011,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG S"],"goalsAfter":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG S"],"content":"]"},{"tailPos":13012,"headPos":12972,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG (map (Embedding.toHom (subtype S)) ⊤)"],"goalsAfter":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG S"],"content":"rw [← Hom.range_eq_map, range_subtype]"},{"tailPos":13024,"headPos":13017,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG S"],"goalsAfter":[],"content":"exact h"},{"tailPos":13024,"headPos":12972,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG (map (Embedding.toHom (subtype S)) ⊤)"],"goalsAfter":[],"content":"rw [← Hom.range_eq_map, range_subtype]\n    exact h"},{"tailPos":13024,"headPos":12969,"goalsBefore":["case refine'_1\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG S\n⊢ CG (map (Embedding.toHom (subtype S)) ⊤)","case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG ⊤\n⊢ CG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG ⊤\n⊢ CG S"],"content":"· rw [← Hom.range_eq_map, range_subtype]\n    exact h"},{"tailPos":13029,"headPos":13027,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG ⊤\n⊢ CG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG ⊤\n⊢ CG S"],"content":"·"},{"tailPos":13061,"headPos":13030,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG ⊤\n⊢ CG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : CG ⊤\nh : CG (map (Embedding.toHom (subtype S)) ⊤)\n⊢ CG S"],"content":"have h := h.map S.subtype.toHom"},{"tailPos":13091,"headPos":13070,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : CG ⊤\nh : CG (map (Embedding.toHom (subtype S)) ⊤)\n⊢ CG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : CG ⊤\nh : CG (Hom.range (Embedding.toHom (subtype S)))\n⊢ CG S"],"content":"← Hom.range_eq_map,"},{"tailPos":13105,"headPos":13092,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : CG ⊤\nh : CG (Hom.range (Embedding.toHom (subtype S)))\n⊢ CG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : CG ⊤\nh : CG S\n⊢ CG S"],"content":"range_subtype"},{"tailPos":13106,"headPos":13105,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : CG ⊤\nh : CG S\n⊢ CG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : CG ⊤\nh : CG S\n⊢ CG S"],"content":"]"},{"tailPos":13111,"headPos":13066,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : CG ⊤\nh : CG (map (Embedding.toHom (subtype S)) ⊤)\n⊢ CG S"],"goalsAfter":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : CG ⊤\nh : CG S\n⊢ CG S"],"content":"rw [← Hom.range_eq_map, range_subtype] at h"},{"tailPos":13123,"headPos":13116,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh✝ : CG ⊤\nh : CG S\n⊢ CG S"],"goalsAfter":[],"content":"exact h"},{"tailPos":13123,"headPos":13030,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG ⊤\n⊢ CG S"],"goalsAfter":[],"content":"have h := h.map S.subtype.toHom\n    rw [← Hom.range_eq_map, range_subtype] at h\n    exact h"},{"tailPos":13123,"headPos":13027,"goalsBefore":["case refine'_2\nL : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\nh : CG ⊤\n⊢ CG S"],"goalsAfter":[],"content":"· have h := h.map S.subtype.toHom\n    rw [← Hom.range_eq_map, range_subtype] at h\n    exact h"},{"tailPos":13123,"headPos":12876,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ CG S ↔ Structure.CG L { x // x ∈ S }"],"goalsAfter":[],"content":"rw [Structure.cg_def]\n  refine' ⟨fun h => CG.of_map_embedding S.subtype _, fun h => _⟩\n  · rw [← Hom.range_eq_map, range_subtype]\n    exact h\n  · have h := h.map S.subtype.toHom\n    rw [← Hom.range_eq_map, range_subtype] at h\n    exact h"},{"tailPos":12873,"headPos":12871,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ CG S ↔ Structure.CG L { x // x ∈ S }"],"goalsAfter":[],"content":"by"},{"tailPos":13123,"headPos":12871,"goalsBefore":["L : Language\nM : Type u_3\ninst✝ : Structure L M\nS : Substructure L M\n⊢ CG S ↔ Structure.CG L { x // x ∈ S }"],"goalsAfter":[],"content":"by\n  rw [Structure.cg_def]\n  refine' ⟨fun h => CG.of_map_embedding S.subtype _, fun h => _⟩\n  · rw [← Hom.range_eq_map, range_subtype]\n    exact h\n  · have h := h.map S.subtype.toHom\n    rw [← Hom.range_eq_map, range_subtype] at h\n    exact h"}]