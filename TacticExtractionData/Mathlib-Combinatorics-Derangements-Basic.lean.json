[{"tailPos":2148,"headPos":2141,"goalsBefore":["α : Type ?u.391\nβ : Type ?u.394\ne : α ≃ β\nf : Perm α\n⊢ ∀ {x : α}, ↑f x ≠ x ↔ ↑(↑(permCongr e) f) (↑e x) ≠ ↑e x"],"goalsAfter":["α : Type ?u.391\nβ : Type ?u.394\ne : α ≃ β\nf : Perm α\nb : α\n⊢ ↑f b ≠ b ↔ ↑(↑(permCongr e) f) (↑e b) ≠ ↑e b"],"content":"intro b"},{"tailPos":2149,"headPos":2148,"goalsBefore":["α : Type ?u.391\nβ : Type ?u.394\ne : α ≃ β\nf : Perm α\nb : α\n⊢ ↑f b ≠ b ↔ ↑(↑(permCongr e) f) (↑e b) ≠ ↑e b"],"goalsAfter":["α : Type ?u.391\nβ : Type ?u.394\ne : α ≃ β\nf : Perm α\nb : α\n⊢ ↑f b ≠ b ↔ ↑(↑(permCongr e) f) (↑e b) ≠ ↑e b"],"content":";"},{"tailPos":2233,"headPos":2150,"goalsBefore":["α : Type ?u.391\nβ : Type ?u.394\ne : α ≃ β\nf : Perm α\nb : α\n⊢ ↑f b ≠ b ↔ ↑(↑(permCongr e) f) (↑e b) ≠ ↑e b"],"goalsAfter":[],"content":"simp only [ne_eq, permCongr_apply, symm_apply_apply, EmbeddingLike.apply_eq_iff_eq]"},{"tailPos":2233,"headPos":2141,"goalsBefore":["α : Type ?u.391\nβ : Type ?u.394\ne : α ≃ β\nf : Perm α\n⊢ ∀ {x : α}, ↑f x ≠ x ↔ ↑(↑(permCongr e) f) (↑e x) ≠ ↑e x"],"goalsAfter":[],"content":"intro b; simp only [ne_eq, permCongr_apply, symm_apply_apply, EmbeddingLike.apply_eq_iff_eq]"},{"tailPos":2137,"headPos":2135,"goalsBefore":["α : Type ?u.391\nβ : Type ?u.394\ne : α ≃ β\nf : Perm α\n⊢ ∀ {x : α}, ↑f x ≠ x ↔ ↑(↑(permCongr e) f) (↑e x) ≠ ↑e x"],"goalsAfter":[],"content":"by"},{"tailPos":2233,"headPos":2135,"goalsBefore":["α : Type ?u.391\nβ : Type ?u.394\ne : α ≃ β\nf : Perm α\n⊢ ∀ {x : α}, ↑f x ≠ x ↔ ↑(↑(permCongr e) f) (↑e x) ≠ ↑e x"],"goalsAfter":[],"content":"by\n   intro b; simp only [ne_eq, permCongr_apply, symm_apply_apply, EmbeddingLike.apply_eq_iff_eq]"},{"tailPos":2869,"headPos":2777,"goalsBefore":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\n⊢ ↑(derangements (Subtype p)) ≃ { f // ∀ (a : α), a ∈ fixedPoints ↑↑f → ¬p a }"],"goalsAfter":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nhfa : a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)\nha : p a\n⊢ False","case refine'_2\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\n⊢ (∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a) → f ∈ derangements (Subtype p)"],"content":"refine' (Perm.subtypeEquivSubtypePerm p).subtypeEquiv fun f => ⟨fun hf a hfa ha => _, _⟩"},{"tailPos":2878,"headPos":2876,"goalsBefore":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nhfa : a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)\nha : p a\n⊢ False","case refine'_2\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\n⊢ (∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a) → f ∈ derangements (Subtype p)"],"goalsAfter":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nhfa : a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)\nha : p a\n⊢ False"],"content":"·"},{"tailPos":2917,"headPos":2879,"goalsBefore":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nhfa : a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)\nha : p a\n⊢ False"],"goalsAfter":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nhfa : a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)\nha : p a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"content":"refine' hf ⟨a, ha⟩ (Subtype.ext _)"},{"tailPos":2935,"headPos":2926,"goalsBefore":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nhfa : a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)\nha : p a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"goalsAfter":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nhfa : a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)\nha : p a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"content":"simp_rw ["},{"tailPos":2951,"headPos":2935,"goalsBefore":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nhfa : a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)\nha : p a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"goalsAfter":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nha : p a\nhfa : IsFixedPt (↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)) a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"content":"mem_fixedPoints,"},{"tailPos":2962,"headPos":2952,"goalsBefore":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nha : p a\nhfa : IsFixedPt (↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)) a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"goalsAfter":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nha : p a\nhfa : ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) a = a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"content":"IsFixedPt,"},{"tailPos":2992,"headPos":2963,"goalsBefore":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nha : p a\nhfa : ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) a = a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"goalsAfter":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nha : p a\nhfa :\n  ↑↑(↑{ toFun := fun f => { val := ↑Perm.ofSubtype f, property := (_ : ∀ (x : α), ¬p x → ↑(↑Perm.ofSubtype f) x = x) },\n                invFun := fun f => Perm.subtypePerm ↑f (_ : ∀ (a : α), p a ↔ p (↑↑f a)),\n                left_inv :=\n                  (_ :\n                    ∀ (f : Perm (Subtype p)),\n                      Perm.subtypePerm (↑Perm.ofSubtype f) (_ : ∀ (x : α), p x ↔ p (↑(↑Perm.ofSubtype f) x)) = f),\n                right_inv :=\n                  (_ :\n                    ∀ (f : { f // ∀ (a : α), ¬p a → ↑f a = a }),\n                      (fun f =>\n                            { val := ↑Perm.ofSubtype f,\n                              property := (_ : ∀ (x : α), ¬p x → ↑(↑Perm.ofSubtype f) x = x) })\n                          ((fun f => Perm.subtypePerm ↑f (_ : ∀ (a : α), p a ↔ p (↑↑f a))) f) =\n                        f) }\n            f)\n      a =\n    a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"content":"Perm.subtypeEquivSubtypePerm,"},{"tailPos":3017,"headPos":3001,"goalsBefore":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nha : p a\nhfa :\n  ↑↑(↑{ toFun := fun f => { val := ↑Perm.ofSubtype f, property := (_ : ∀ (x : α), ¬p x → ↑(↑Perm.ofSubtype f) x = x) },\n                invFun := fun f => Perm.subtypePerm ↑f (_ : ∀ (a : α), p a ↔ p (↑↑f a)),\n                left_inv :=\n                  (_ :\n                    ∀ (f : Perm (Subtype p)),\n                      Perm.subtypePerm (↑Perm.ofSubtype f) (_ : ∀ (x : α), p x ↔ p (↑(↑Perm.ofSubtype f) x)) = f),\n                right_inv :=\n                  (_ :\n                    ∀ (f : { f // ∀ (a : α), ¬p a → ↑f a = a }),\n                      (fun f =>\n                            { val := ↑Perm.ofSubtype f,\n                              property := (_ : ∀ (x : α), ¬p x → ↑(↑Perm.ofSubtype f) x = x) })\n                          ((fun f => Perm.subtypePerm ↑f (_ : ∀ (a : α), p a ↔ p (↑↑f a))) f) =\n                        f) }\n            f)\n      a =\n    a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"goalsAfter":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nha : p a\nhfa : ↑(↑Perm.ofSubtype f) a = a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"content":"Equiv.coe_fn_mk,"},{"tailPos":3050,"headPos":3018,"goalsBefore":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nha : p a\nhfa : ↑(↑Perm.ofSubtype f) a = a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"goalsAfter":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nha : p a\nhfa : ↑(↑f { val := a, property := ha }) = a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"content":"simp only [Perm.ofSubtype_apply_of_mem _ ha] at hfa "},{"tailPos":3058,"headPos":2926,"goalsBefore":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nhfa : a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)\nha : p a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"goalsAfter":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nha : p a\nhfa : ↑(↑f { val := a, property := ha }) = a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"content":"simp_rw [mem_fixedPoints, IsFixedPt, Perm.subtypeEquivSubtypePerm,\n        Equiv.coe_fn_mk, Perm.ofSubtype_apply_of_mem _ ha] at hfa"},{"tailPos":3077,"headPos":3067,"goalsBefore":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nha : p a\nhfa : ↑(↑f { val := a, property := ha }) = a\n⊢ ↑(↑f { val := a, property := ha }) = ↑{ val := a, property := ha }"],"goalsAfter":[],"content":"assumption"},{"tailPos":3077,"headPos":2879,"goalsBefore":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nhfa : a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)\nha : p a\n⊢ False"],"goalsAfter":[],"content":"refine' hf ⟨a, ha⟩ (Subtype.ext _)\n        simp_rw [mem_fixedPoints, IsFixedPt, Perm.subtypeEquivSubtypePerm,\n        Equiv.coe_fn_mk, Perm.ofSubtype_apply_of_mem _ ha] at hfa\n        assumption"},{"tailPos":3077,"headPos":2876,"goalsBefore":["case refine'_1\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : f ∈ derangements (Subtype p)\na : α\nhfa : a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)\nha : p a\n⊢ False","case refine'_2\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\n⊢ (∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a) → f ∈ derangements (Subtype p)"],"goalsAfter":["case refine'_2\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\n⊢ (∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a) → f ∈ derangements (Subtype p)"],"content":"· refine' hf ⟨a, ha⟩ (Subtype.ext _)\n        simp_rw [mem_fixedPoints, IsFixedPt, Perm.subtypeEquivSubtypePerm,\n        Equiv.coe_fn_mk, Perm.ofSubtype_apply_of_mem _ ha] at hfa\n        assumption"},{"tailPos":3109,"headPos":3084,"goalsBefore":["case refine'_2\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\n⊢ (∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a) → f ∈ derangements (Subtype p)"],"goalsAfter":["case refine'_2.mk\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : ∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a\na : α\nha : p a\nhfa : ↑f { val := a, property := ha } = { val := a, property := ha }\n⊢ False"],"content":"rintro hf ⟨a, ha⟩ hfa"},{"tailPos":3133,"headPos":3116,"goalsBefore":["case refine'_2.mk\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : ∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a\na : α\nha : p a\nhfa : ↑f { val := a, property := ha } = { val := a, property := ha }\n⊢ False"],"goalsAfter":["case refine'_2.mk\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : ∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a\na : α\nha : p a\nhfa : ↑f { val := a, property := ha } = { val := a, property := ha }\n⊢ a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)"],"content":"refine' hf _ _ ha"},{"tailPos":3207,"headPos":3140,"goalsBefore":["case refine'_2.mk\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : ∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a\na : α\nha : p a\nhfa : ↑f { val := a, property := ha } = { val := a, property := ha }\n⊢ a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f)"],"goalsAfter":["case refine'_2.mk\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : ∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a\na : α\nha : p a\nhfa : ↑f { val := a, property := ha } = { val := a, property := ha }\n⊢ IsFixedPt (↑(↑Perm.ofSubtype f)) a"],"content":"simp only [Perm.subtypeEquivSubtypePerm_apply_coe, mem_fixedPoints]"},{"tailPos":3231,"headPos":3214,"goalsBefore":["case refine'_2.mk\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : ∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a\na : α\nha : p a\nhfa : ↑f { val := a, property := ha } = { val := a, property := ha }\n⊢ IsFixedPt (↑(↑Perm.ofSubtype f)) a"],"goalsAfter":["case refine'_2.mk\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : ∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a\na : α\nha : p a\nhfa : ↑f { val := a, property := ha } = { val := a, property := ha }\n⊢ ↑(↑Perm.ofSubtype f) a = a"],"content":"dsimp [IsFixedPt]"},{"tailPos":3247,"headPos":3238,"goalsBefore":["case refine'_2.mk\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : ∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a\na : α\nha : p a\nhfa : ↑f { val := a, property := ha } = { val := a, property := ha }\n⊢ ↑(↑Perm.ofSubtype f) a = a"],"goalsAfter":["case refine'_2.mk\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : ∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a\na : α\nha : p a\nhfa : ↑f { val := a, property := ha } = { val := a, property := ha }\n⊢ ↑(↑Perm.ofSubtype f) a = a"],"content":"simp_rw ["},{"tailPos":3280,"headPos":3247,"goalsBefore":["case refine'_2.mk\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : ∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a\na : α\nha : p a\nhfa : ↑f { val := a, property := ha } = { val := a, property := ha }\n⊢ ↑(↑Perm.ofSubtype f) a = a"],"goalsAfter":["case refine'_2.mk\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : ∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a\na : α\nha : p a\nhfa : ↑f { val := a, property := ha } = { val := a, property := ha }\n⊢ ↑(↑f { val := a, property := ha }) = a"],"content":"Perm.ofSubtype_apply_of_mem _ ha,"},{"tailPos":3284,"headPos":3281,"goalsBefore":["case refine'_2.mk\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : ∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a\na : α\nha : p a\nhfa : ↑f { val := a, property := ha } = { val := a, property := ha }\n⊢ ↑(↑f { val := a, property := ha }) = a"],"goalsAfter":[],"content":"simp only [hfa]"},{"tailPos":3285,"headPos":3238,"goalsBefore":["case refine'_2.mk\nα : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm (Subtype p)\nhf : ∀ (a : α), a ∈ fixedPoints ↑↑(↑(Perm.subtypeEquivSubtypePerm p) f) → ¬p a\na : α\nha : p a\nhfa : ↑f { val := a, property := ha } = { val := a, property := ha }\n⊢ ↑(↑Perm.ofSubtype f) a = a"],"goalsAfter":[],"content":"simp_rw [Perm.ofSubtype_apply_of_mem _ ha, hfa]"},{"tailPos":3285,"headPos":2777,"goalsBefore":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\n⊢ ↑(derangements (Subtype p)) ≃ { f // ∀ (a : α), a ∈ fixedPoints ↑↑f → ¬p a }"],"goalsAfter":[],"content":"refine' (Perm.subtypeEquivSubtypePerm p).subtypeEquiv fun f => ⟨fun hf a hfa ha => _, _⟩\n      · refine' hf ⟨a, ha⟩ (Subtype.ext _)\n        simp_rw [mem_fixedPoints, IsFixedPt, Perm.subtypeEquivSubtypePerm,\n        Equiv.coe_fn_mk, Perm.ofSubtype_apply_of_mem _ ha] at hfa\n        assumption\n      rintro hf ⟨a, ha⟩ hfa\n      refine' hf _ _ ha\n      simp only [Perm.subtypeEquivSubtypePerm_apply_coe, mem_fixedPoints]\n      dsimp [IsFixedPt]\n      simp_rw [Perm.ofSubtype_apply_of_mem _ ha, hfa]"},{"tailPos":2770,"headPos":2768,"goalsBefore":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\n⊢ ↑(derangements (Subtype p)) ≃ { f // ∀ (a : α), a ∈ fixedPoints ↑↑f → ¬p a }"],"goalsAfter":[],"content":"by"},{"tailPos":3285,"headPos":2768,"goalsBefore":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\n⊢ ↑(derangements (Subtype p)) ≃ { f // ∀ (a : α), a ∈ fixedPoints ↑↑f → ¬p a }"],"goalsAfter":[],"content":"by\n      refine' (Perm.subtypeEquivSubtypePerm p).subtypeEquiv fun f => ⟨fun hf a hfa ha => _, _⟩\n      · refine' hf ⟨a, ha⟩ (Subtype.ext _)\n        simp_rw [mem_fixedPoints, IsFixedPt, Perm.subtypeEquivSubtypePerm,\n        Equiv.coe_fn_mk, Perm.ofSubtype_apply_of_mem _ ha] at hfa\n        assumption\n      rintro hf ⟨a, ha⟩ hfa\n      refine' hf _ _ ha\n      simp only [Perm.subtypeEquivSubtypePerm_apply_coe, mem_fixedPoints]\n      dsimp [IsFixedPt]\n      simp_rw [Perm.ofSubtype_apply_of_mem _ ha, hfa]"},{"tailPos":3567,"headPos":3558,"goalsBefore":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm α\n⊢ (∃ h, ∀ (a : α), a ∈ fixedPoints ↑f → ¬p a) ↔ ∀ (a : α), ¬p a ↔ a ∈ fixedPoints ↑f"],"goalsAfter":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm α\n⊢ (∃ h, ∀ (a : α), a ∈ fixedPoints ↑f → ¬p a) ↔ ∀ (a : α), ¬p a ↔ a ∈ fixedPoints ↑f"],"content":"simp_rw ["},{"tailPos":3579,"headPos":3567,"goalsBefore":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm α\n⊢ (∃ h, ∀ (a : α), a ∈ fixedPoints ↑f → ¬p a) ↔ ∀ (a : α), ¬p a ↔ a ∈ fixedPoints ↑f"],"goalsAfter":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm α\n⊢ ((∀ (a : α), ¬p a → a ∈ fixedPoints ↑f) ∧ ∀ (a : α), a ∈ fixedPoints ↑f → ¬p a) ↔ ∀ (a : α), ¬p a ↔ a ∈ fixedPoints ↑f"],"content":"exists_prop,"},{"tailPos":3595,"headPos":3580,"goalsBefore":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm α\n⊢ ((∀ (a : α), ¬p a → a ∈ fixedPoints ↑f) ∧ ∀ (a : α), a ∈ fixedPoints ↑f → ¬p a) ↔ ∀ (a : α), ¬p a ↔ a ∈ fixedPoints ↑f"],"goalsAfter":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm α\n⊢ (∀ (x : α), (¬p x → x ∈ fixedPoints ↑f) ∧ (x ∈ fixedPoints ↑f → ¬p x)) ↔ ∀ (a : α), ¬p a ↔ a ∈ fixedPoints ↑f"],"content":"← forall_and,"},{"tailPos":3627,"headPos":3596,"goalsBefore":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm α\n⊢ (∀ (x : α), (¬p x → x ∈ fixedPoints ↑f) ∧ (x ∈ fixedPoints ↑f → ¬p x)) ↔ ∀ (a : α), ¬p a ↔ a ∈ fixedPoints ↑f"],"goalsAfter":[],"content":"← iff_iff_implies_and_implies"},{"tailPos":3628,"headPos":3558,"goalsBefore":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm α\n⊢ (∃ _h, ∀ (a : α), a ∈ fixedPoints ↑f → ¬p a) ↔ ∀ (a : α), ¬p a ↔ a ∈ fixedPoints ↑f"],"goalsAfter":[],"content":"simp_rw [exists_prop, ← forall_and, ← iff_iff_implies_and_implies]"},{"tailPos":3549,"headPos":3547,"goalsBefore":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm α\n⊢ (∃ _h, ∀ (a : α), a ∈ fixedPoints ↑f → ¬p a) ↔ ∀ (a : α), ¬p a ↔ a ∈ fixedPoints ↑f"],"goalsAfter":[],"content":"by"},{"tailPos":3628,"headPos":3547,"goalsBefore":["α : Type ?u.1560\nβ : Type ?u.1563\np : α → Prop\ninst✝ : DecidablePred p\nf : Perm α\n⊢ (∃ _h, ∀ (a : α), a ∈ fixedPoints ↑f → ¬p a) ↔ ∀ (a : α), ¬p a ↔ a ∈ fixedPoints ↑f"],"goalsAfter":[],"content":"by\n        simp_rw [exists_prop, ← forall_and, ← iff_iff_implies_and_implies]"},{"tailPos":4580,"headPos":4554,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // a ∈ fixedPoints ↑↑f } ⊕ { f // ¬a ∈ fixedPoints ↑↑f } ≃\n    { f // fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f } ⊕ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f }"],"goalsAfter":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // a ∈ fixedPoints ↑↑f } ≃ { f // fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f }","case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // ¬a ∈ fixedPoints ↑↑f } ≃ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f }"],"content":"refine' Equiv.sumCongr _ _"},{"tailPos":4588,"headPos":4587,"goalsBefore":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // a ∈ fixedPoints ↑↑f } ≃ { f // fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f }","case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // ¬a ∈ fixedPoints ↑↑f } ≃ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f }"],"goalsAfter":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // a ∈ fixedPoints ↑↑f } ≃ { f // fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f }"],"content":"."},{"tailPos":4712,"headPos":4589,"goalsBefore":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // a ∈ fixedPoints ↑↑f } ≃ { f // fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f }"],"goalsAfter":[],"content":"exact subtypeSubtypeEquivSubtypeInter\n          (fun x : Perm α => fixedPoints x ⊆ {a})\n          (a ∈ fixedPoints ·)"},{"tailPos":4712,"headPos":4587,"goalsBefore":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // a ∈ fixedPoints ↑↑f } ≃ { f // fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f }","case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // ¬a ∈ fixedPoints ↑↑f } ≃ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f }"],"goalsAfter":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // ¬a ∈ fixedPoints ↑↑f } ≃ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f }"],"content":". exact subtypeSubtypeEquivSubtypeInter\n          (fun x : Perm α => fixedPoints x ⊆ {a})\n          (a ∈ fixedPoints ·)"},{"tailPos":4720,"headPos":4719,"goalsBefore":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // ¬a ∈ fixedPoints ↑↑f } ≃ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f }"],"goalsAfter":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // ¬a ∈ fixedPoints ↑↑f } ≃ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f }"],"content":"."},{"tailPos":4846,"headPos":4721,"goalsBefore":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // ¬a ∈ fixedPoints ↑↑f } ≃ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f }"],"goalsAfter":[],"content":"exact subtypeSubtypeEquivSubtypeInter\n          (fun x : Perm α => fixedPoints x ⊆ {a})\n          (¬a ∈ fixedPoints ·)"},{"tailPos":4846,"headPos":4719,"goalsBefore":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // ¬a ∈ fixedPoints ↑↑f } ≃ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f }"],"goalsAfter":[],"content":". exact subtypeSubtypeEquivSubtypeInter\n          (fun x : Perm α => fixedPoints x ⊆ {a})\n          (¬a ∈ fixedPoints ·)"},{"tailPos":4846,"headPos":4554,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // a ∈ fixedPoints ↑↑f } ⊕ { f // ¬a ∈ fixedPoints ↑↑f } ≃\n    { f // fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f } ⊕ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f }"],"goalsAfter":[],"content":"refine' Equiv.sumCongr _ _\n      . exact subtypeSubtypeEquivSubtypeInter\n          (fun x : Perm α => fixedPoints x ⊆ {a})\n          (a ∈ fixedPoints ·)\n      . exact subtypeSubtypeEquivSubtypeInter\n          (fun x : Perm α => fixedPoints x ⊆ {a})\n          (¬a ∈ fixedPoints ·)"},{"tailPos":4451,"headPos":4449,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // a ∈ fixedPoints ↑↑f } ⊕ { f // ¬a ∈ fixedPoints ↑↑f } ≃\n    { f // fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f } ⊕ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f }"],"goalsAfter":[],"content":"by"},{"tailPos":4846,"headPos":4449,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // a ∈ fixedPoints ↑↑f } ⊕ { f // ¬a ∈ fixedPoints ↑↑f } ≃\n    { f // fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f } ⊕ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f }"],"goalsAfter":[],"content":"by\n      -- porting note: `subtypeSubtypeEquivSubtypeInter` no longer works with placeholder `_`s.\n      refine' Equiv.sumCongr _ _\n      . exact subtypeSubtypeEquivSubtypeInter\n          (fun x : Perm α => fixedPoints x ⊆ {a})\n          (a ∈ fixedPoints ·)\n      . exact subtypeSubtypeEquivSubtypeInter\n          (fun x : Perm α => fixedPoints x ⊆ {a})\n          (¬a ∈ fixedPoints ·)"},{"tailPos":5035,"headPos":4951,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f } ⊕ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f } ≃\n    { f // fixedPoints ↑f = {a} } ⊕ { f // fixedPoints ↑f = ∅ }"],"goalsAfter":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = {a}","case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = ∅"],"content":"refine' Equiv.sumCongr (subtypeEquivRight fun f => _) (subtypeEquivRight fun f => _)"},{"tailPos":5044,"headPos":5042,"goalsBefore":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = {a}","case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = ∅"],"goalsAfter":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = {a}"],"content":"·"},{"tailPos":5081,"headPos":5049,"goalsBefore":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = {a}"],"goalsAfter":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f ↔ a ∈ fixedPoints ↑f ∧ ∀ (x : α), x ∈ fixedPoints ↑f → x = a"],"content":"Set.eq_singleton_iff_unique_mem,"},{"tailPos":5090,"headPos":5082,"goalsBefore":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f ↔ a ∈ fixedPoints ↑f ∧ ∀ (x : α), x ∈ fixedPoints ↑f → x = a"],"goalsAfter":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ a ∈ fixedPoints ↑f ∧ fixedPoints ↑f ⊆ {a} ↔ a ∈ fixedPoints ↑f ∧ ∀ (x : α), x ∈ fixedPoints ↑f → x = a"],"content":"and_comm"},{"tailPos":5091,"headPos":5090,"goalsBefore":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ a ∈ fixedPoints ↑f ∧ fixedPoints ↑f ⊆ {a} ↔ a ∈ fixedPoints ↑f ∧ ∀ (x : α), x ∈ fixedPoints ↑f → x = a"],"goalsAfter":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ a ∈ fixedPoints ↑f ∧ fixedPoints ↑f ⊆ {a} ↔ a ∈ fixedPoints ↑f ∧ ∀ (x : α), x ∈ fixedPoints ↑f → x = a"],"content":"]"},{"tailPos":5091,"headPos":5045,"goalsBefore":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = {a}"],"goalsAfter":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ a ∈ fixedPoints ↑f ∧ fixedPoints ↑f ⊆ {a} ↔ a ∈ fixedPoints ↑f ∧ ∀ (x : α), x ∈ fixedPoints ↑f → x = a"],"content":"rw [Set.eq_singleton_iff_unique_mem, and_comm]"},{"tailPos":5103,"headPos":5100,"goalsBefore":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ a ∈ fixedPoints ↑f ∧ fixedPoints ↑f ⊆ {a} ↔ a ∈ fixedPoints ↑f ∧ ∀ (x : α), x ∈ fixedPoints ↑f → x = a"],"goalsAfter":[],"content":"rfl"},{"tailPos":5103,"headPos":5045,"goalsBefore":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = {a}"],"goalsAfter":[],"content":"rw [Set.eq_singleton_iff_unique_mem, and_comm]\n        rfl"},{"tailPos":5103,"headPos":5042,"goalsBefore":["case refine'_1\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = {a}","case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = ∅"],"goalsAfter":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = ∅"],"content":"· rw [Set.eq_singleton_iff_unique_mem, and_comm]\n        rfl"},{"tailPos":5112,"headPos":5110,"goalsBefore":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = ∅"],"goalsAfter":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = ∅"],"content":"·"},{"tailPos":5148,"headPos":5117,"goalsBefore":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = ∅"],"goalsAfter":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ ∀ (x : α), ¬x ∈ fixedPoints ↑f"],"content":"Set.eq_empty_iff_forall_not_mem"},{"tailPos":5149,"headPos":5148,"goalsBefore":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ ∀ (x : α), ¬x ∈ fixedPoints ↑f"],"goalsAfter":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ ∀ (x : α), ¬x ∈ fixedPoints ↑f"],"content":"]"},{"tailPos":5149,"headPos":5113,"goalsBefore":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = ∅"],"goalsAfter":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ ∀ (x : α), ¬x ∈ fixedPoints ↑f"],"content":"rw [Set.eq_empty_iff_forall_not_mem]"},{"tailPos":5252,"headPos":5158,"goalsBefore":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ ∀ (x : α), ¬x ∈ fixedPoints ↑f"],"goalsAfter":[],"content":"refine' ⟨fun h x hx => h.2 (h.1 hx ▸ hx), fun h => ⟨fun x hx => (h _ hx).elim, h _⟩⟩"},{"tailPos":5252,"headPos":5113,"goalsBefore":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = ∅"],"goalsAfter":[],"content":"rw [Set.eq_empty_iff_forall_not_mem]\n        refine' ⟨fun h x hx => h.2 (h.1 hx ▸ hx), fun h => ⟨fun x hx => (h _ hx).elim, h _⟩⟩"},{"tailPos":5252,"headPos":5110,"goalsBefore":["case refine'_2\nα : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f ↔ fixedPoints ↑f = ∅"],"goalsAfter":[],"content":"· rw [Set.eq_empty_iff_forall_not_mem]\n        refine' ⟨fun h x hx => h.2 (h.1 hx ▸ hx), fun h => ⟨fun x hx => (h _ hx).elim, h _⟩⟩"},{"tailPos":5252,"headPos":4951,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f } ⊕ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f } ≃\n    { f // fixedPoints ↑f = {a} } ⊕ { f // fixedPoints ↑f = ∅ }"],"goalsAfter":[],"content":"refine' Equiv.sumCongr (subtypeEquivRight fun f => _) (subtypeEquivRight fun f => _)\n      · rw [Set.eq_singleton_iff_unique_mem, and_comm]\n        rfl\n      · rw [Set.eq_empty_iff_forall_not_mem]\n        refine' ⟨fun h x hx => h.2 (h.1 hx ▸ hx), fun h => ⟨fun x hx => (h _ hx).elim, h _⟩⟩"},{"tailPos":4944,"headPos":4942,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f } ⊕ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f } ≃\n    { f // fixedPoints ↑f = {a} } ⊕ { f // fixedPoints ↑f = ∅ }"],"goalsAfter":[],"content":"by"},{"tailPos":5252,"headPos":4942,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // fixedPoints ↑f ⊆ {a} ∧ a ∈ fixedPoints ↑f } ⊕ { f // fixedPoints ↑f ⊆ {a} ∧ ¬a ∈ fixedPoints ↑f } ≃\n    { f // fixedPoints ↑f = {a} } ⊕ { f // fixedPoints ↑f = ∅ }"],"goalsAfter":[],"content":"by\n      refine' Equiv.sumCongr (subtypeEquivRight fun f => _) (subtypeEquivRight fun f => _)\n      · rw [Set.eq_singleton_iff_unique_mem, and_comm]\n        rfl\n      · rw [Set.eq_empty_iff_forall_not_mem]\n        refine' ⟨fun h x hx => h.2 (h.1 hx ▸ hx), fun h => ⟨fun x hx => (h _ hx).elim, h _⟩⟩"},{"tailPos":5658,"headPos":5430,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // fixedPoints ↑f = {a} } ⊕ { f // fixedPoints ↑f = ∅ } ≃ ↑(derangements ↑({a}ᶜ)) ⊕ ↑(derangements α)"],"goalsAfter":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬a_1 ∈ {a}ᶜ ↔ a_1 ∈ fixedPoints ↑x) ↔ fixedPoints ↑x = {a}"],"content":"refine'\n        Equiv.sumCongr ((derangements.subtypeEquiv (· ∈ ({a}ᶜ : Set α))).trans <|\n            subtypeEquivRight fun x => _).symm\n          (subtypeEquivRight fun f => mem_derangements_iff_fixedPoints_eq_empty.symm)"},{"tailPos":5677,"headPos":5669,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬a_1 ∈ {a}ᶜ ↔ a_1 ∈ fixedPoints ↑x) ↔ fixedPoints ↑x = {a}"],"goalsAfter":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬a_1 ∈ {a}ᶜ ↔ a_1 ∈ fixedPoints ↑x) ↔ {a} = fixedPoints ↑x"],"content":"eq_comm,"},{"tailPos":5689,"headPos":5678,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬a_1 ∈ {a}ᶜ ↔ a_1 ∈ fixedPoints ↑x) ↔ {a} = fixedPoints ↑x"],"goalsAfter":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬a_1 ∈ {a}ᶜ ↔ a_1 ∈ fixedPoints ↑x) ↔ ∀ (x_1 : α), x_1 ∈ {a} ↔ x_1 ∈ fixedPoints ↑x"],"content":"Set.ext_iff"},{"tailPos":5690,"headPos":5689,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬a_1 ∈ {a}ᶜ ↔ a_1 ∈ fixedPoints ↑x) ↔ ∀ (x_1 : α), x_1 ∈ {a} ↔ x_1 ∈ fixedPoints ↑x"],"goalsAfter":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬a_1 ∈ {a}ᶜ ↔ a_1 ∈ fixedPoints ↑x) ↔ ∀ (x_1 : α), x_1 ∈ {a} ↔ x_1 ∈ fixedPoints ↑x"],"content":"]"},{"tailPos":5690,"headPos":5665,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬a_1 ∈ {a}ᶜ ↔ a_1 ∈ fixedPoints ↑x) ↔ fixedPoints ↑x = {a}"],"goalsAfter":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬a_1 ∈ {a}ᶜ ↔ a_1 ∈ fixedPoints ↑x) ↔ ∀ (x_1 : α), x_1 ∈ {a} ↔ x_1 ∈ fixedPoints ↑x"],"content":"rw [eq_comm, Set.ext_iff]"},{"tailPos":5706,"headPos":5697,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬a_1 ∈ {a}ᶜ ↔ a_1 ∈ fixedPoints ↑x) ↔ ∀ (x_1 : α), x_1 ∈ {a} ↔ x_1 ∈ fixedPoints ↑x"],"goalsAfter":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬a_1 ∈ {a}ᶜ ↔ a_1 ∈ fixedPoints ↑x) ↔ ∀ (x_1 : α), x_1 ∈ {a} ↔ x_1 ∈ fixedPoints ↑x"],"content":"simp_rw ["},{"tailPos":5724,"headPos":5706,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬a_1 ∈ {a}ᶜ ↔ a_1 ∈ fixedPoints ↑x) ↔ ∀ (x_1 : α), x_1 ∈ {a} ↔ x_1 ∈ fixedPoints ↑x"],"goalsAfter":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬¬a_1 ∈ {a} ↔ a_1 ∈ fixedPoints ↑x) ↔ ∀ (x_1 : α), x_1 ∈ {a} ↔ x_1 ∈ fixedPoints ↑x"],"content":"Set.mem_compl_iff,"},{"tailPos":5742,"headPos":5725,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬¬a_1 ∈ {a} ↔ a_1 ∈ fixedPoints ↑x) ↔ ∀ (x_1 : α), x_1 ∈ {a} ↔ x_1 ∈ fixedPoints ↑x"],"goalsAfter":[],"content":"simp only [not_not]"},{"tailPos":5743,"headPos":5697,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\nx : Perm α\n⊢ (∀ (a_1 : α), ¬a_1 ∈ {a}ᶜ ↔ a_1 ∈ fixedPoints ↑x) ↔ ∀ (x_1 : α), x_1 ∈ {a} ↔ x_1 ∈ fixedPoints ↑x"],"goalsAfter":[],"content":"simp_rw [Set.mem_compl_iff, Classical.not_not]"},{"tailPos":5743,"headPos":5430,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // fixedPoints ↑f = {a} } ⊕ { f // fixedPoints ↑f = ∅ } ≃ ↑(derangements ↑({a}ᶜ)) ⊕ ↑(derangements α)"],"goalsAfter":[],"content":"refine'\n        Equiv.sumCongr ((derangements.subtypeEquiv (· ∈ ({a}ᶜ : Set α))).trans <|\n            subtypeEquivRight fun x => _).symm\n          (subtypeEquivRight fun f => mem_derangements_iff_fixedPoints_eq_empty.symm)\n      rw [eq_comm, Set.ext_iff]\n      simp_rw [Set.mem_compl_iff, Classical.not_not]"},{"tailPos":5323,"headPos":5321,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // fixedPoints ↑f = {a} } ⊕ { f // fixedPoints ↑f = ∅ } ≃ ↑(derangements ↑({a}ᶜ)) ⊕ ↑(derangements α)"],"goalsAfter":[],"content":"by"},{"tailPos":5743,"headPos":5321,"goalsBefore":["α : Type ?u.25864\nβ : Type ?u.25867\ninst✝ : DecidableEq α\na : α\n⊢ { f // fixedPoints ↑f = {a} } ⊕ { f // fixedPoints ↑f = ∅ } ≃ ↑(derangements ↑({a}ᶜ)) ⊕ ↑(derangements α)"],"goalsAfter":[],"content":"by\n      -- porting note: was `subtypeEquiv _` but now needs the placeholder to be provided explicitly\n      refine'\n        Equiv.sumCongr ((derangements.subtypeEquiv (· ∈ ({a}ᶜ : Set α))).trans <|\n            subtypeEquivRight fun x => _).symm\n          (subtypeEquivRight fun f => mem_derangements_iff_fixedPoints_eq_empty.symm)\n      rw [eq_comm, Set.ext_iff]\n      simp_rw [Set.mem_compl_iff, Classical.not_not]"},{"tailPos":6498,"headPos":6461,"goalsBefore":["α : Type u_1\nβ : Type ?u.70902\ninst✝ : DecidableEq α\na : Option α\nf : Perm α\n⊢ f ∈ fiber a ↔ ∃ F, F ∈ derangements (Option α) ∧ ↑F none = a ∧ removeNone F = f"],"goalsAfter":[],"content":"simp [RemoveNone.fiber, derangements]"},{"tailPos":6460,"headPos":6458,"goalsBefore":["α : Type u_1\nβ : Type ?u.70902\ninst✝ : DecidableEq α\na : Option α\nf : Perm α\n⊢ f ∈ fiber a ↔ ∃ F, F ∈ derangements (Option α) ∧ ↑F none = a ∧ removeNone F = f"],"goalsAfter":[],"content":"by"},{"tailPos":6498,"headPos":6458,"goalsBefore":["α : Type u_1\nβ : Type ?u.70902\ninst✝ : DecidableEq α\na : Option α\nf : Perm α\n⊢ f ∈ fiber a ↔ ∃ F, F ∈ derangements (Option α) ∧ ↑F none = a ∧ removeNone F = f"],"goalsAfter":[],"content":"by simp [RemoveNone.fiber, derangements]"},{"tailPos":6697,"headPos":6666,"goalsBefore":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\n⊢ fiber none = ∅"],"goalsAfter":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\n⊢ ∀ (x : Perm α), ¬x ∈ fiber none"],"content":"Set.eq_empty_iff_forall_not_mem"},{"tailPos":6698,"headPos":6697,"goalsBefore":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\n⊢ ∀ (x : Perm α), ¬x ∈ fiber none"],"goalsAfter":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\n⊢ ∀ (x : Perm α), ¬x ∈ fiber none"],"content":"]"},{"tailPos":6698,"headPos":6662,"goalsBefore":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\n⊢ fiber none = ∅"],"goalsAfter":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\n⊢ ∀ (x : Perm α), ¬x ∈ fiber none"],"content":"rw [Set.eq_empty_iff_forall_not_mem]"},{"tailPos":6712,"headPos":6701,"goalsBefore":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\n⊢ ∀ (x : Perm α), ¬x ∈ fiber none"],"goalsAfter":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\nf : Perm α\nhyp : f ∈ fiber none\n⊢ False"],"content":"intro f hyp"},{"tailPos":6739,"headPos":6719,"goalsBefore":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\nf : Perm α\nhyp : f ∈ fiber none\n⊢ False"],"goalsAfter":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\nf : Perm α\nhyp : ∃ F, F ∈ derangements (Option α) ∧ ↑F none = none ∧ removeNone F = f\n⊢ False"],"content":"RemoveNone.mem_fiber"},{"tailPos":6740,"headPos":6739,"goalsBefore":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\nf : Perm α\nhyp : ∃ F, F ∈ derangements (Option α) ∧ ↑F none = none ∧ removeNone F = f\n⊢ False"],"goalsAfter":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\nf : Perm α\nhyp : ∃ F, F ∈ derangements (Option α) ∧ ↑F none = none ∧ removeNone F = f\n⊢ False"],"content":"]"},{"tailPos":6747,"headPos":6715,"goalsBefore":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\nf : Perm α\nhyp : f ∈ fiber none\n⊢ False"],"goalsAfter":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\nf : Perm α\nhyp : ∃ F, F ∈ derangements (Option α) ∧ ↑F none = none ∧ removeNone F = f\n⊢ False"],"content":"rw [RemoveNone.mem_fiber] at hyp"},{"tailPos":6799,"headPos":6750,"goalsBefore":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\nf : Perm α\nhyp : ∃ F, F ∈ derangements (Option α) ∧ ↑F none = none ∧ removeNone F = f\n⊢ False"],"goalsAfter":["case intro.intro.intro\nα : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\nf : Perm α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = none\nright✝ : removeNone F = f\n⊢ False"],"content":"rcases hyp with ⟨F, F_derangement, F_none, _⟩"},{"tailPos":6833,"headPos":6802,"goalsBefore":["case intro.intro.intro\nα : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\nf : Perm α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = none\nright✝ : removeNone F = f\n⊢ False"],"goalsAfter":[],"content":"exact F_derangement none F_none"},{"tailPos":6833,"headPos":6662,"goalsBefore":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\n⊢ fiber none = ∅"],"goalsAfter":[],"content":"rw [Set.eq_empty_iff_forall_not_mem]\n  intro f hyp\n  rw [RemoveNone.mem_fiber] at hyp\n  rcases hyp with ⟨F, F_derangement, F_none, _⟩\n  exact F_derangement none F_none"},{"tailPos":6659,"headPos":6657,"goalsBefore":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\n⊢ fiber none = ∅"],"goalsAfter":[],"content":"by"},{"tailPos":6833,"headPos":6657,"goalsBefore":["α : Type u_1\nβ : Type ?u.80928\ninst✝ : DecidableEq α\n⊢ fiber none = ∅"],"goalsAfter":[],"content":"by\n  rw [Set.eq_empty_iff_forall_not_mem]\n  intro f hyp\n  rw [RemoveNone.mem_fiber] at hyp\n  rcases hyp with ⟨F, F_derangement, F_none, _⟩\n  exact F_derangement none F_none"},{"tailPos":7175,"headPos":7170,"goalsBefore":["α : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\n⊢ fiber (some a) = {f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":["case h\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ fiber (some a) ↔ f ∈ {f | fixedPoints ↑f ⊆ {a}}"],"content":"ext f"},{"tailPos":7189,"headPos":7178,"goalsBefore":["case h\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ fiber (some a) ↔ f ∈ {f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":["case h.mp\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ fiber (some a) → f ∈ {f | fixedPoints ↑f ⊆ {a}}","case h.mpr\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ {f | fixedPoints ↑f ⊆ {a}} → f ∈ fiber (some a)"],"content":"constructor"},{"tailPos":7194,"headPos":7192,"goalsBefore":["case h.mp\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ fiber (some a) → f ∈ {f | fixedPoints ↑f ⊆ {a}}","case h.mpr\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ {f | fixedPoints ↑f ⊆ {a}} → f ∈ fiber (some a)"],"goalsAfter":["case h.mp\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ fiber (some a) → f ∈ {f | fixedPoints ↑f ⊆ {a}}"],"content":"·"},{"tailPos":7219,"headPos":7199,"goalsBefore":["case h.mp\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ fiber (some a) → f ∈ {f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":["case h.mp\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ (∃ F, F ∈ derangements (Option α) ∧ ↑F none = some a ∧ removeNone F = f) → f ∈ {f | fixedPoints ↑f ⊆ {a}}"],"content":"RemoveNone.mem_fiber"},{"tailPos":7220,"headPos":7219,"goalsBefore":["case h.mp\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ (∃ F, F ∈ derangements (Option α) ∧ ↑F none = some a ∧ removeNone F = f) → f ∈ {f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":["case h.mp\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ (∃ F, F ∈ derangements (Option α) ∧ ↑F none = some a ∧ removeNone F = f) → f ∈ {f | fixedPoints ↑f ⊆ {a}}"],"content":"]"},{"tailPos":7220,"headPos":7195,"goalsBefore":["case h.mp\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ fiber (some a) → f ∈ {f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":["case h.mp\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ (∃ F, F ∈ derangements (Option α) ∧ ↑F none = some a ∧ removeNone F = f) → f ∈ {f | fixedPoints ↑f ⊆ {a}}"],"content":"rw [RemoveNone.mem_fiber]"},{"tailPos":7277,"headPos":7225,"goalsBefore":["case h.mp\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ (∃ F, F ∈ derangements (Option α) ∧ ↑F none = some a ∧ removeNone F = f) → f ∈ {f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":["case h.mp.intro.intro.intro\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : x ∈ fixedPoints ↑(removeNone F)\n⊢ x ∈ {a}"],"content":"rintro ⟨F, F_derangement, F_none, rfl⟩ x x_fixed"},{"tailPos":7305,"headPos":7286,"goalsBefore":["case h.mp.intro.intro.intro\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : x ∈ fixedPoints ↑(removeNone F)\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : ↑(removeNone F) x = x\n⊢ x ∈ {a}"],"content":"mem_fixedPoints_iff"},{"tailPos":7306,"headPos":7305,"goalsBefore":["case h.mp.intro.intro.intro\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : ↑(removeNone F) x = x\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : ↑(removeNone F) x = x\n⊢ x ∈ {a}"],"content":"]"},{"tailPos":7317,"headPos":7282,"goalsBefore":["case h.mp.intro.intro.intro\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : x ∈ fixedPoints ↑(removeNone F)\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : ↑(removeNone F) x = x\n⊢ x ∈ {a}"],"content":"rw [mem_fixedPoints_iff] at x_fixed"},{"tailPos":7348,"headPos":7322,"goalsBefore":["case h.mp.intro.intro.intro\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : ↑(removeNone F) x = x\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\n⊢ x ∈ {a}"],"content":"apply_fun some  at x_fixed"},{"tailPos":7382,"headPos":7353,"goalsBefore":["case h.mp.intro.intro.intro\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\nFx : ↑F (some x) = none\n⊢ x ∈ {a}","case h.mp.intro.intro.intro.some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ x ∈ {a}"],"content":"cases' Fx : F (some x) with y"},{"tailPos":7389,"headPos":7387,"goalsBefore":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\nFx : ↑F (some x) = none\n⊢ x ∈ {a}","case h.mp.intro.intro.intro.some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\nFx : ↑F (some x) = none\n⊢ x ∈ {a}"],"content":"·"},{"tailPos":7416,"headPos":7395,"goalsBefore":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\nFx : ↑F (some x) = none\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : ↑F none = some x\nFx : ↑F (some x) = none\n⊢ x ∈ {a}"],"content":"removeNone_none F Fx,"},{"tailPos":7424,"headPos":7417,"goalsBefore":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : ↑F none = some x\nFx : ↑F (some x) = none\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some a = some x\nFx : ↑F (some x) = none\n⊢ x ∈ {a}"],"content":"F_none,"},{"tailPos":7441,"headPos":7425,"goalsBefore":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some a = some x\nFx : ↑F (some x) = none\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : a = x\nFx : ↑F (some x) = none\n⊢ x ∈ {a}"],"content":"Option.some_inj,"},{"tailPos":7449,"headPos":7442,"goalsBefore":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : a = x\nFx : ↑F (some x) = none\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : x = a\nFx : ↑F (some x) = none\n⊢ x ∈ {a}"],"content":"eq_comm"},{"tailPos":7450,"headPos":7449,"goalsBefore":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : x = a\nFx : ↑F (some x) = none\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : x = a\nFx : ↑F (some x) = none\n⊢ x ∈ {a}"],"content":"]"},{"tailPos":7461,"headPos":7390,"goalsBefore":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\nFx : ↑F (some x) = none\n⊢ x ∈ {a}"],"goalsAfter":[],"content":"rwa [removeNone_none F Fx, F_none, Option.some_inj, eq_comm] at x_fixed"},{"tailPos":7461,"headPos":7387,"goalsBefore":["case h.mp.intro.intro.intro.none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\nFx : ↑F (some x) = none\n⊢ x ∈ {a}","case h.mp.intro.intro.intro.some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro.some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ x ∈ {a}"],"content":"· rwa [removeNone_none F Fx, F_none, Option.some_inj, eq_comm] at x_fixed"},{"tailPos":7468,"headPos":7466,"goalsBefore":["case h.mp.intro.intro.intro.some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro.some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ x ∈ {a}"],"content":"·"},{"tailPos":7476,"headPos":7469,"goalsBefore":["case h.mp.intro.intro.intro.some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ x ∈ {a}"],"goalsAfter":["case h.mp.intro.intro.intro.some.h\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ False"],"content":"exfalso"},{"tailPos":7516,"headPos":7487,"goalsBefore":["case h.mp.intro.intro.intro.some.h\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ False"],"goalsAfter":["case h.mp.intro.intro.intro.some.h\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : ↑F (some x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ False"],"content":"removeNone_some F ⟨y, Fx⟩"},{"tailPos":7517,"headPos":7516,"goalsBefore":["case h.mp.intro.intro.intro.some.h\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : ↑F (some x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ False"],"goalsAfter":["case h.mp.intro.intro.intro.some.h\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : ↑F (some x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ False"],"content":"]"},{"tailPos":7528,"headPos":7483,"goalsBefore":["case h.mp.intro.intro.intro.some.h\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ False"],"goalsAfter":["case h.mp.intro.intro.intro.some.h\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : ↑F (some x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ False"],"content":"rw [removeNone_some F ⟨y, Fx⟩] at x_fixed"},{"tailPos":7564,"headPos":7535,"goalsBefore":["case h.mp.intro.intro.intro.some.h\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : ↑F (some x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ False"],"goalsAfter":[],"content":"exact F_derangement _ x_fixed"},{"tailPos":7564,"headPos":7469,"goalsBefore":["case h.mp.intro.intro.intro.some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ x ∈ {a}"],"goalsAfter":[],"content":"exfalso\n      rw [removeNone_some F ⟨y, Fx⟩] at x_fixed\n      exact F_derangement _ x_fixed"},{"tailPos":7564,"headPos":7466,"goalsBefore":["case h.mp.intro.intro.intro.some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nF : Perm (Option α)\nF_derangement : F ∈ derangements (Option α)\nF_none : ↑F none = some a\nx : α\nx_fixed : some (↑(removeNone F) x) = some x\ny : α\nFx : ↑F (some x) = some y\n⊢ x ∈ {a}"],"goalsAfter":[],"content":"· exfalso\n      rw [removeNone_some F ⟨y, Fx⟩] at x_fixed\n      exact F_derangement _ x_fixed"},{"tailPos":7564,"headPos":7195,"goalsBefore":["case h.mp\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ fiber (some a) → f ∈ {f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":[],"content":"rw [RemoveNone.mem_fiber]\n    rintro ⟨F, F_derangement, F_none, rfl⟩ x x_fixed\n    rw [mem_fixedPoints_iff] at x_fixed\n    apply_fun some  at x_fixed\n    cases' Fx : F (some x) with y\n    · rwa [removeNone_none F Fx, F_none, Option.some_inj, eq_comm] at x_fixed\n    · exfalso\n      rw [removeNone_some F ⟨y, Fx⟩] at x_fixed\n      exact F_derangement _ x_fixed"},{"tailPos":7564,"headPos":7192,"goalsBefore":["case h.mp\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ fiber (some a) → f ∈ {f | fixedPoints ↑f ⊆ {a}}","case h.mpr\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ {f | fixedPoints ↑f ⊆ {a}} → f ∈ fiber (some a)"],"goalsAfter":["case h.mpr\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ {f | fixedPoints ↑f ⊆ {a}} → f ∈ fiber (some a)"],"content":"· rw [RemoveNone.mem_fiber]\n    rintro ⟨F, F_derangement, F_none, rfl⟩ x x_fixed\n    rw [mem_fixedPoints_iff] at x_fixed\n    apply_fun some  at x_fixed\n    cases' Fx : F (some x) with y\n    · rwa [removeNone_none F Fx, F_none, Option.some_inj, eq_comm] at x_fixed\n    · exfalso\n      rw [removeNone_some F ⟨y, Fx⟩] at x_fixed\n      exact F_derangement _ x_fixed"},{"tailPos":7569,"headPos":7567,"goalsBefore":["case h.mpr\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ {f | fixedPoints ↑f ⊆ {a}} → f ∈ fiber (some a)"],"goalsAfter":["case h.mpr\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ {f | fixedPoints ↑f ⊆ {a}} → f ∈ fiber (some a)"],"content":"·"},{"tailPos":7582,"headPos":7570,"goalsBefore":["case h.mpr\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ {f | fixedPoints ↑f ⊆ {a}} → f ∈ fiber (some a)"],"goalsAfter":["case h.mpr\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ f ∈ fiber (some a)"],"content":"intro h_opfp"},{"tailPos":7634,"headPos":7587,"goalsBefore":["case h.mpr\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ f ∈ fiber (some a)"],"goalsAfter":["case h.mpr\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption.symm (some a, f) ∈ derangements (Option α) ∧\n    ↑Perm.decomposeOption (↑Perm.decomposeOption.symm (some a, f)) = (some a, f)"],"content":"use Equiv.Perm.decomposeOption.symm (some a, f)"},{"tailPos":7650,"headPos":7639,"goalsBefore":["case h.mpr\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption.symm (some a, f) ∈ derangements (Option α) ∧\n    ↑Perm.decomposeOption (↑Perm.decomposeOption.symm (some a, f)) = (some a, f)"],"goalsAfter":["case h.mpr.left\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption.symm (some a, f) ∈ derangements (Option α)","case h.mpr.right\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption (↑Perm.decomposeOption.symm (some a, f)) = (some a, f)"],"content":"constructor"},{"tailPos":7657,"headPos":7655,"goalsBefore":["case h.mpr.left\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption.symm (some a, f) ∈ derangements (Option α)","case h.mpr.right\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption (↑Perm.decomposeOption.symm (some a, f)) = (some a, f)"],"goalsAfter":["case h.mpr.left\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption.symm (some a, f) ∈ derangements (Option α)"],"content":"·"},{"tailPos":7665,"headPos":7658,"goalsBefore":["case h.mpr.left\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption.symm (some a, f) ∈ derangements (Option α)"],"goalsAfter":["case h.mpr.left\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : Option α\n⊢ ↑(↑Perm.decomposeOption.symm (some a, f)) x ≠ x"],"content":"intro x"},{"tailPos":7717,"headPos":7672,"goalsBefore":["case h.mpr.left\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : Option α\n⊢ ↑(↑Perm.decomposeOption.symm (some a, f)) x ≠ x"],"goalsAfter":["α : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : Option α\n⊢ (fun x => ↑(Equiv.swap none (some a)) x) (↑(↑Perm.decomposeOption.symm (some a, f)) x) ≠\n    (fun x => ↑(Equiv.swap none (some a)) x) x"],"content":"apply_fun fun x => Equiv.swap none (some a) x"},{"tailPos":7798,"headPos":7724,"goalsBefore":["α : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : Option α\n⊢ (fun x => ↑(Equiv.swap none (some a)) x) (↑(↑Perm.decomposeOption.symm (some a, f)) x) ≠\n    (fun x => ↑(Equiv.swap none (some a)) x) x"],"goalsAfter":["α : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : Option α\n⊢ ↑(Equiv.swap none (some a)) ((↑(Equiv.swap none (some a)) ∘ ↑(optionCongr f)) x) ≠ ↑(Equiv.swap none (some a)) x"],"content":"simp only [Perm.decomposeOption_symm_apply, swap_apply_self, Perm.coe_mul]"},{"tailPos":7820,"headPos":7805,"goalsBefore":["α : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : Option α\n⊢ ↑(Equiv.swap none (some a)) ((↑(Equiv.swap none (some a)) ∘ ↑(optionCongr f)) x) ≠ ↑(Equiv.swap none (some a)) x"],"goalsAfter":["case none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑(Equiv.swap none (some a)) ((↑(Equiv.swap none (some a)) ∘ ↑(optionCongr f)) none) ≠ ↑(Equiv.swap none (some a)) none","case some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\n⊢ ↑(Equiv.swap none (some a)) ((↑(Equiv.swap none (some a)) ∘ ↑(optionCongr f)) (some x)) ≠\n    ↑(Equiv.swap none (some a)) (some x)"],"content":"cases' x with x"},{"tailPos":7829,"headPos":7827,"goalsBefore":["case none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑(Equiv.swap none (some a)) ((↑(Equiv.swap none (some a)) ∘ ↑(optionCongr f)) none) ≠ ↑(Equiv.swap none (some a)) none","case some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\n⊢ ↑(Equiv.swap none (some a)) ((↑(Equiv.swap none (some a)) ∘ ↑(optionCongr f)) (some x)) ≠\n    ↑(Equiv.swap none (some a)) (some x)"],"goalsAfter":["case none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑(Equiv.swap none (some a)) ((↑(Equiv.swap none (some a)) ∘ ↑(optionCongr f)) none) ≠ ↑(Equiv.swap none (some a)) none"],"content":"·"},{"tailPos":7834,"headPos":7830,"goalsBefore":["case none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑(Equiv.swap none (some a)) ((↑(Equiv.swap none (some a)) ∘ ↑(optionCongr f)) none) ≠ ↑(Equiv.swap none (some a)) none"],"goalsAfter":[],"content":"simp only [comp_apply, optionCongr_apply, Option.map_none', swap_apply_left, swap_apply_right, ne_eq,\n  not_false_eq_true]"},{"tailPos":7834,"headPos":7827,"goalsBefore":["case none\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑(Equiv.swap none (some a)) ((↑(Equiv.swap none (some a)) ∘ ↑(optionCongr f)) none) ≠ ↑(Equiv.swap none (some a)) none","case some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\n⊢ ↑(Equiv.swap none (some a)) ((↑(Equiv.swap none (some a)) ∘ ↑(optionCongr f)) (some x)) ≠\n    ↑(Equiv.swap none (some a)) (some x)"],"goalsAfter":["case some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\n⊢ ↑(Equiv.swap none (some a)) ((↑(Equiv.swap none (some a)) ∘ ↑(optionCongr f)) (some x)) ≠\n    ↑(Equiv.swap none (some a)) (some x)"],"content":"· simp"},{"tailPos":7911,"headPos":7841,"goalsBefore":["case some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\n⊢ ↑(Equiv.swap none (some a)) ((↑(Equiv.swap none (some a)) ∘ ↑(optionCongr f)) (some x)) ≠\n    ↑(Equiv.swap none (some a)) (some x)"],"goalsAfter":["case some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"content":"simp only [comp, optionCongr_apply, Option.map_some', swap_apply_self]"},{"tailPos":7941,"headPos":7918,"goalsBefore":["case some\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"goalsAfter":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)","case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"content":"by_cases x_vs_a : x = a"},{"tailPos":7950,"headPos":7948,"goalsBefore":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)","case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"goalsAfter":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"content":"·"},{"tailPos":7962,"headPos":7955,"goalsBefore":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"goalsAfter":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f a) ≠ ↑(Equiv.swap none (some a)) (some a)"],"content":"x_vs_a,"},{"tailPos":7979,"headPos":7963,"goalsBefore":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f a) ≠ ↑(Equiv.swap none (some a)) (some a)"],"goalsAfter":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f a) ≠ none"],"content":"swap_apply_right"},{"tailPos":7980,"headPos":7979,"goalsBefore":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f a) ≠ none"],"goalsAfter":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f a) ≠ none"],"content":"]"},{"tailPos":7980,"headPos":7951,"goalsBefore":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"goalsAfter":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f a) ≠ none"],"content":"rw [x_vs_a, swap_apply_right]"},{"tailPos":8014,"headPos":7989,"goalsBefore":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f a) ≠ none"],"goalsAfter":[],"content":"apply Option.some_ne_none"},{"tailPos":8014,"headPos":7951,"goalsBefore":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"goalsAfter":[],"content":"rw [x_vs_a, swap_apply_right]\n        apply Option.some_ne_none"},{"tailPos":8014,"headPos":7948,"goalsBefore":["case pos\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : x = a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)","case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"goalsAfter":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"content":"· rw [x_vs_a, swap_apply_right]\n        apply Option.some_ne_none"},{"tailPos":8073,"headPos":8021,"goalsBefore":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"goalsAfter":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"content":"have ne_1 : some x ≠ none := Option.some_ne_none _"},{"tailPos":8157,"headPos":8080,"goalsBefore":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"goalsAfter":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\nne_2 : some x ≠ some a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"content":"have ne_2 : some x ≠ some a := (Option.some_injective α).ne_iff.mpr x_vs_a"},{"tailPos":8201,"headPos":8168,"goalsBefore":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\nne_2 : some x ≠ some a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"goalsAfter":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\nne_2 : some x ≠ some a\n⊢ some (↑f x) ≠ some x"],"content":"swap_apply_of_ne_of_ne ne_1 ne_2,"},{"tailPos":8235,"headPos":8202,"goalsBefore":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\nne_2 : some x ≠ some a\n⊢ some (↑f x) ≠ some x"],"goalsAfter":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\nne_2 : some x ≠ some a\n⊢ ↑f x ≠ x"],"content":"(Option.some_injective α).ne_iff"},{"tailPos":8236,"headPos":8235,"goalsBefore":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\nne_2 : some x ≠ some a\n⊢ ↑f x ≠ x"],"goalsAfter":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\nne_2 : some x ≠ some a\n⊢ ↑f x ≠ x"],"content":"]"},{"tailPos":8236,"headPos":8164,"goalsBefore":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\nne_2 : some x ≠ some a\n⊢ some (↑f x) ≠ ↑(Equiv.swap none (some a)) (some x)"],"goalsAfter":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\nne_2 : some x ≠ some a\n⊢ ↑f x ≠ x"],"content":"rw [swap_apply_of_ne_of_ne ne_1 ne_2, (Option.some_injective α).ne_iff]"},{"tailPos":8255,"headPos":8243,"goalsBefore":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\nne_2 : some x ≠ some a\n⊢ ↑f x ≠ x"],"goalsAfter":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\nne_2 : some x ≠ some a\ncontra : ↑f x = x\n⊢ False"],"content":"intro contra"},{"tailPos":8290,"headPos":8262,"goalsBefore":["case neg\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\nx : α\nx_vs_a : ¬x = a\nne_1 : some x ≠ none\nne_2 : some x ≠ some a\ncontra : ↑f x = x\n⊢ False"],"goalsAfter":[],"content":"exact x_vs_a (h_opfp contra)"},{"tailPos":8290,"headPos":7658,"goalsBefore":["case h.mpr.left\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption.symm (some a, f) ∈ derangements (Option α)"],"goalsAfter":[],"content":"intro x\n      apply_fun fun x => Equiv.swap none (some a) x\n      simp only [Perm.decomposeOption_symm_apply, swap_apply_self, Perm.coe_mul]\n      cases' x with x\n      · simp\n      simp only [comp, optionCongr_apply, Option.map_some', swap_apply_self]\n      by_cases x_vs_a : x = a\n      · rw [x_vs_a, swap_apply_right]\n        apply Option.some_ne_none\n      have ne_1 : some x ≠ none := Option.some_ne_none _\n      have ne_2 : some x ≠ some a := (Option.some_injective α).ne_iff.mpr x_vs_a\n      rw [swap_apply_of_ne_of_ne ne_1 ne_2, (Option.some_injective α).ne_iff]\n      intro contra\n      exact x_vs_a (h_opfp contra)"},{"tailPos":8290,"headPos":7655,"goalsBefore":["case h.mpr.left\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption.symm (some a, f) ∈ derangements (Option α)","case h.mpr.right\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption (↑Perm.decomposeOption.symm (some a, f)) = (some a, f)"],"goalsAfter":["case h.mpr.right\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption (↑Perm.decomposeOption.symm (some a, f)) = (some a, f)"],"content":"· intro x\n      apply_fun fun x => Equiv.swap none (some a) x\n      simp only [Perm.decomposeOption_symm_apply, swap_apply_self, Perm.coe_mul]\n      cases' x with x\n      · simp\n      simp only [comp, optionCongr_apply, Option.map_some', swap_apply_self]\n      by_cases x_vs_a : x = a\n      · rw [x_vs_a, swap_apply_right]\n        apply Option.some_ne_none\n      have ne_1 : some x ≠ none := Option.some_ne_none _\n      have ne_2 : some x ≠ some a := (Option.some_injective α).ne_iff.mpr x_vs_a\n      rw [swap_apply_of_ne_of_ne ne_1 ne_2, (Option.some_injective α).ne_iff]\n      intro contra\n      exact x_vs_a (h_opfp contra)"},{"tailPos":8297,"headPos":8295,"goalsBefore":["case h.mpr.right\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption (↑Perm.decomposeOption.symm (some a, f)) = (some a, f)"],"goalsAfter":["case h.mpr.right\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption (↑Perm.decomposeOption.symm (some a, f)) = (some a, f)"],"content":"·"},{"tailPos":8318,"headPos":8302,"goalsBefore":["case h.mpr.right\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption (↑Perm.decomposeOption.symm (some a, f)) = (some a, f)"],"goalsAfter":["case h.mpr.right\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ (some a, f) = (some a, f)"],"content":"apply_symm_apply"},{"tailPos":8319,"headPos":8318,"goalsBefore":["case h.mpr.right\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ (some a, f) = (some a, f)"],"goalsAfter":[],"content":"]"},{"tailPos":8319,"headPos":8298,"goalsBefore":["case h.mpr.right\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption (↑Perm.decomposeOption.symm (some a, f)) = (some a, f)"],"goalsAfter":[],"content":"rw [apply_symm_apply]"},{"tailPos":8319,"headPos":8295,"goalsBefore":["case h.mpr.right\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\nh_opfp : f ∈ {f | fixedPoints ↑f ⊆ {a}}\n⊢ ↑Perm.decomposeOption (↑Perm.decomposeOption.symm (some a, f)) = (some a, f)"],"goalsAfter":[],"content":"· rw [apply_symm_apply]"},{"tailPos":8319,"headPos":7570,"goalsBefore":["case h.mpr\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ {f | fixedPoints ↑f ⊆ {a}} → f ∈ fiber (some a)"],"goalsAfter":[],"content":"intro h_opfp\n    use Equiv.Perm.decomposeOption.symm (some a, f)\n    constructor\n    · intro x\n      apply_fun fun x => Equiv.swap none (some a) x\n      simp only [Perm.decomposeOption_symm_apply, swap_apply_self, Perm.coe_mul]\n      cases' x with x\n      · simp\n      simp only [comp, optionCongr_apply, Option.map_some', swap_apply_self]\n      by_cases x_vs_a : x = a\n      · rw [x_vs_a, swap_apply_right]\n        apply Option.some_ne_none\n      have ne_1 : some x ≠ none := Option.some_ne_none _\n      have ne_2 : some x ≠ some a := (Option.some_injective α).ne_iff.mpr x_vs_a\n      rw [swap_apply_of_ne_of_ne ne_1 ne_2, (Option.some_injective α).ne_iff]\n      intro contra\n      exact x_vs_a (h_opfp contra)\n    · rw [apply_symm_apply]"},{"tailPos":8319,"headPos":7567,"goalsBefore":["case h.mpr\nα : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\nf : Perm α\n⊢ f ∈ {f | fixedPoints ↑f ⊆ {a}} → f ∈ fiber (some a)"],"goalsAfter":[],"content":"· intro h_opfp\n    use Equiv.Perm.decomposeOption.symm (some a, f)\n    constructor\n    · intro x\n      apply_fun fun x => Equiv.swap none (some a) x\n      simp only [Perm.decomposeOption_symm_apply, swap_apply_self, Perm.coe_mul]\n      cases' x with x\n      · simp\n      simp only [comp, optionCongr_apply, Option.map_some', swap_apply_self]\n      by_cases x_vs_a : x = a\n      · rw [x_vs_a, swap_apply_right]\n        apply Option.some_ne_none\n      have ne_1 : some x ≠ none := Option.some_ne_none _\n      have ne_2 : some x ≠ some a := (Option.some_injective α).ne_iff.mpr x_vs_a\n      rw [swap_apply_of_ne_of_ne ne_1 ne_2, (Option.some_injective α).ne_iff]\n      intro contra\n      exact x_vs_a (h_opfp contra)\n    · rw [apply_symm_apply]"},{"tailPos":8319,"headPos":7170,"goalsBefore":["α : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\n⊢ fiber (some a) = {f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":[],"content":"ext f\n  constructor\n  · rw [RemoveNone.mem_fiber]\n    rintro ⟨F, F_derangement, F_none, rfl⟩ x x_fixed\n    rw [mem_fixedPoints_iff] at x_fixed\n    apply_fun some  at x_fixed\n    cases' Fx : F (some x) with y\n    · rwa [removeNone_none F Fx, F_none, Option.some_inj, eq_comm] at x_fixed\n    · exfalso\n      rw [removeNone_some F ⟨y, Fx⟩] at x_fixed\n      exact F_derangement _ x_fixed\n  · intro h_opfp\n    use Equiv.Perm.decomposeOption.symm (some a, f)\n    constructor\n    · intro x\n      apply_fun fun x => Equiv.swap none (some a) x\n      simp only [Perm.decomposeOption_symm_apply, swap_apply_self, Perm.coe_mul]\n      cases' x with x\n      · simp\n      simp only [comp, optionCongr_apply, Option.map_some', swap_apply_self]\n      by_cases x_vs_a : x = a\n      · rw [x_vs_a, swap_apply_right]\n        apply Option.some_ne_none\n      have ne_1 : some x ≠ none := Option.some_ne_none _\n      have ne_2 : some x ≠ some a := (Option.some_injective α).ne_iff.mpr x_vs_a\n      rw [swap_apply_of_ne_of_ne ne_1 ne_2, (Option.some_injective α).ne_iff]\n      intro contra\n      exact x_vs_a (h_opfp contra)\n    · rw [apply_symm_apply]"},{"tailPos":7167,"headPos":7165,"goalsBefore":["α : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\n⊢ fiber (some a) = {f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":[],"content":"by"},{"tailPos":8319,"headPos":7165,"goalsBefore":["α : Type u_1\nβ : Type ?u.81438\ninst✝ : DecidableEq α\na : α\n⊢ fiber (some a) = {f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":[],"content":"by\n  ext f\n  constructor\n  · rw [RemoveNone.mem_fiber]\n    rintro ⟨F, F_derangement, F_none, rfl⟩ x x_fixed\n    rw [mem_fixedPoints_iff] at x_fixed\n    apply_fun some  at x_fixed\n    cases' Fx : F (some x) with y\n    · rwa [removeNone_none F Fx, F_none, Option.some_inj, eq_comm] at x_fixed\n    · exfalso\n      rw [removeNone_some F ⟨y, Fx⟩] at x_fixed\n      exact F_derangement _ x_fixed\n  · intro h_opfp\n    use Equiv.Perm.decomposeOption.symm (some a, f)\n    constructor\n    · intro x\n      apply_fun fun x => Equiv.swap none (some a) x\n      simp only [Perm.decomposeOption_symm_apply, swap_apply_self, Perm.coe_mul]\n      cases' x with x\n      · simp\n      simp only [comp, optionCongr_apply, Option.map_some', swap_apply_self]\n      by_cases x_vs_a : x = a\n      · rw [x_vs_a, swap_apply_right]\n        apply Option.some_ne_none\n      have ne_1 : some x ≠ none := Option.some_ne_none _\n      have ne_2 : some x ≠ some a := (Option.some_injective α).ne_iff.mpr x_vs_a\n      rw [swap_apply_of_ne_of_ne ne_1 ne_2, (Option.some_injective α).ne_iff]\n      intro contra\n      exact x_vs_a (h_opfp contra)\n    · rw [apply_symm_apply]"},{"tailPos":8871,"headPos":8844,"goalsBefore":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑(Equiv.RemoveNone.fiber none) → False"],"goalsAfter":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑∅ → False"],"content":"Equiv.RemoveNone.fiber_none"},{"tailPos":8872,"headPos":8871,"goalsBefore":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑∅ → False"],"goalsAfter":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑∅ → False"],"content":"]"},{"tailPos":8872,"headPos":8840,"goalsBefore":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑(Equiv.RemoveNone.fiber none) → False"],"goalsAfter":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑∅ → False"],"content":"rw [Equiv.RemoveNone.fiber_none]"},{"tailPos":8896,"headPos":8877,"goalsBefore":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑∅ → False"],"goalsAfter":[],"content":"exact IsEmpty.false"},{"tailPos":8896,"headPos":8840,"goalsBefore":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑(Equiv.RemoveNone.fiber none) → False"],"goalsAfter":[],"content":"rw [Equiv.RemoveNone.fiber_none]\n    exact IsEmpty.false"},{"tailPos":8835,"headPos":8833,"goalsBefore":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑(Equiv.RemoveNone.fiber none) → False"],"goalsAfter":[],"content":"by"},{"tailPos":8896,"headPos":8833,"goalsBefore":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑(Equiv.RemoveNone.fiber none) → False"],"goalsAfter":[],"content":"by\n    rw [Equiv.RemoveNone.fiber_none]\n    exact IsEmpty.false"},{"tailPos":8896,"headPos":8759,"goalsBefore":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑(derangements (Option α)) ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\nfiber_none_is_false : ↑(Equiv.RemoveNone.fiber none) → False\n⊢ ↑(derangements (Option α)) ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"content":"have fiber_none_is_false : Equiv.RemoveNone.fiber (@none α) → False := by\n    rw [Equiv.RemoveNone.fiber_none]\n    exact IsEmpty.false"},{"tailPos":9289,"headPos":9280,"goalsBefore":["α : Type ?u.86287\nβ : Type ?u.84597\ninst✝ : DecidableEq α\nfiber_none_is_false : ↑(Equiv.RemoveNone.fiber none) → False\n⊢ (a : α) × ↑(Equiv.RemoveNone.fiber (some a)) ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":["α : Type ?u.86287\nβ : Type ?u.84597\ninst✝ : DecidableEq α\nfiber_none_is_false : ↑(Equiv.RemoveNone.fiber none) → False\n⊢ (a : α) × ↑(Equiv.RemoveNone.fiber (some a)) ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"content":"simp_rw ["},{"tailPos":9316,"headPos":9289,"goalsBefore":["α : Type ?u.86287\nβ : Type ?u.84597\ninst✝ : DecidableEq α\nfiber_none_is_false : ↑(Equiv.RemoveNone.fiber none) → False\n⊢ (a : α) × ↑(Equiv.RemoveNone.fiber (some a)) ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":["α : Type ?u.86287\nβ : Type ?u.84597\ninst✝ : DecidableEq α\nfiber_none_is_false : ↑(Equiv.RemoveNone.fiber none) → False\n⊢ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}} ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"content":"simp only [Equiv.RemoveNone.fiber_some]"},{"tailPos":9317,"headPos":9280,"goalsBefore":["α : Type ?u.86287\nβ : Type ?u.84597\ninst✝ : DecidableEq α\nfiber_none_is_false : ↑(Equiv.RemoveNone.fiber none) → False\n⊢ (a : α) × ↑(Equiv.RemoveNone.fiber (some a)) ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":["α : Type ?u.86287\nβ : Type ?u.84597\ninst✝ : DecidableEq α\nfiber_none_is_false : ↑(Equiv.RemoveNone.fiber none) → False\n⊢ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}} ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"content":"simp_rw [Equiv.RemoveNone.fiber_some]"},{"tailPos":9327,"headPos":9324,"goalsBefore":["α : Type ?u.86287\nβ : Type ?u.84597\ninst✝ : DecidableEq α\nfiber_none_is_false : ↑(Equiv.RemoveNone.fiber none) → False\n⊢ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}} ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":[],"content":"rfl"},{"tailPos":9327,"headPos":9280,"goalsBefore":["α : Type ?u.86287\nβ : Type ?u.84597\ninst✝ : DecidableEq α\nfiber_none_is_false : ↑(Equiv.RemoveNone.fiber none) → False\n⊢ (a : α) × ↑(Equiv.RemoveNone.fiber (some a)) ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":[],"content":"simp_rw [Equiv.RemoveNone.fiber_some]\n      rfl"},{"tailPos":9273,"headPos":9271,"goalsBefore":["α : Type ?u.86287\nβ : Type ?u.84597\ninst✝ : DecidableEq α\nfiber_none_is_false : ↑(Equiv.RemoveNone.fiber none) → False\n⊢ (a : α) × ↑(Equiv.RemoveNone.fiber (some a)) ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":[],"content":"by"},{"tailPos":9327,"headPos":9271,"goalsBefore":["α : Type ?u.86287\nβ : Type ?u.84597\ninst✝ : DecidableEq α\nfiber_none_is_false : ↑(Equiv.RemoveNone.fiber none) → False\n⊢ (a : α) × ↑(Equiv.RemoveNone.fiber (some a)) ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":[],"content":"by\n      simp_rw [Equiv.RemoveNone.fiber_some]\n      rfl"},{"tailPos":9327,"headPos":8899,"goalsBefore":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\nfiber_none_is_false : ↑(Equiv.RemoveNone.fiber none) → False\n⊢ ↑(derangements (Option α)) ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":[],"content":"calc\n    derangements (Option α) ≃ Equiv.Perm.decomposeOption '' derangements (Option α) :=\n      Equiv.image _ _\n    _ ≃ Σa : Option α, ↥(Equiv.RemoveNone.fiber a) := setProdEquivSigma _\n    _ ≃ Σa : α, ↥(Equiv.RemoveNone.fiber (some a)) :=\n      sigmaOptionEquivOfSome _ fiber_none_is_false\n    _ ≃ Σa : α, { f : Perm α | fixedPoints f ⊆ {a} } := by\n      simp_rw [Equiv.RemoveNone.fiber_some]\n      rfl"},{"tailPos":9327,"headPos":8759,"goalsBefore":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑(derangements (Option α)) ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":[],"content":"have fiber_none_is_false : Equiv.RemoveNone.fiber (@none α) → False := by\n    rw [Equiv.RemoveNone.fiber_none]\n    exact IsEmpty.false\n  calc\n    derangements (Option α) ≃ Equiv.Perm.decomposeOption '' derangements (Option α) :=\n      Equiv.image _ _\n    _ ≃ Σa : Option α, ↥(Equiv.RemoveNone.fiber a) := setProdEquivSigma _\n    _ ≃ Σa : α, ↥(Equiv.RemoveNone.fiber (some a)) :=\n      sigmaOptionEquivOfSome _ fiber_none_is_false\n    _ ≃ Σa : α, { f : Perm α | fixedPoints f ⊆ {a} } := by\n      simp_rw [Equiv.RemoveNone.fiber_some]\n      rfl"},{"tailPos":8756,"headPos":8754,"goalsBefore":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑(derangements (Option α)) ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":[],"content":"by"},{"tailPos":9327,"headPos":8754,"goalsBefore":["α : Type ?u.84594\nβ : Type ?u.84597\ninst✝ : DecidableEq α\n⊢ ↑(derangements (Option α)) ≃ (a : α) × ↑{f | fixedPoints ↑f ⊆ {a}}"],"goalsAfter":[],"content":"by\n  have fiber_none_is_false : Equiv.RemoveNone.fiber (@none α) → False := by\n    rw [Equiv.RemoveNone.fiber_none]\n    exact IsEmpty.false\n  calc\n    derangements (Option α) ≃ Equiv.Perm.decomposeOption '' derangements (Option α) :=\n      Equiv.image _ _\n    _ ≃ Σa : Option α, ↥(Equiv.RemoveNone.fiber a) := setProdEquivSigma _\n    _ ≃ Σa : α, ↥(Equiv.RemoveNone.fiber (some a)) :=\n      sigmaOptionEquivOfSome _ fiber_none_is_false\n    _ ≃ Σa : α, { f : Perm α | fixedPoints f ⊆ {a} } := by\n      simp_rw [Equiv.RemoveNone.fiber_some]\n      rfl"}]