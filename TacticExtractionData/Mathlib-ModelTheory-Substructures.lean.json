[{"tailPos":4209,"headPos":4202,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.12946\nP : Type ?u.12949\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\np q : Substructure L M\nh : ↑p = ↑q\n⊢ p = q"],"goalsAfter":["case mk\nL : Language\nM : Type w\nN : Type ?u.12946\nP : Type ?u.12949\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nq : Substructure L M\ncarrier✝ : Set M\nfun_mem✝ : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f carrier✝\nh : ↑{ carrier := carrier✝, fun_mem := fun_mem✝ } = ↑q\n⊢ { carrier := carrier✝, fun_mem := fun_mem✝ } = q"],"content":"cases p"},{"tailPos":4210,"headPos":4209,"goalsBefore":["case mk\nL : Language\nM : Type w\nN : Type ?u.12946\nP : Type ?u.12949\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nq : Substructure L M\ncarrier✝ : Set M\nfun_mem✝ : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f carrier✝\nh : ↑{ carrier := carrier✝, fun_mem := fun_mem✝ } = ↑q\n⊢ { carrier := carrier✝, fun_mem := fun_mem✝ } = q"],"goalsAfter":["case mk\nL : Language\nM : Type w\nN : Type ?u.12946\nP : Type ?u.12949\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nq : Substructure L M\ncarrier✝ : Set M\nfun_mem✝ : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f carrier✝\nh : ↑{ carrier := carrier✝, fun_mem := fun_mem✝ } = ↑q\n⊢ { carrier := carrier✝, fun_mem := fun_mem✝ } = q"],"content":";"},{"tailPos":4218,"headPos":4211,"goalsBefore":["case mk\nL : Language\nM : Type w\nN : Type ?u.12946\nP : Type ?u.12949\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nq : Substructure L M\ncarrier✝ : Set M\nfun_mem✝ : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f carrier✝\nh : ↑{ carrier := carrier✝, fun_mem := fun_mem✝ } = ↑q\n⊢ { carrier := carrier✝, fun_mem := fun_mem✝ } = q"],"goalsAfter":["case mk.mk\nL : Language\nM : Type w\nN : Type ?u.12946\nP : Type ?u.12949\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\ncarrier✝¹ : Set M\nfun_mem✝¹ : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f carrier✝¹\ncarrier✝ : Set M\nfun_mem✝ : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f carrier✝\nh : ↑{ carrier := carrier✝¹, fun_mem := fun_mem✝¹ } = ↑{ carrier := carrier✝, fun_mem := fun_mem✝ }\n⊢ { carrier := carrier✝¹, fun_mem := fun_mem✝¹ } = { carrier := carrier✝, fun_mem := fun_mem✝ }"],"content":"cases q"},{"tailPos":4219,"headPos":4218,"goalsBefore":["case mk.mk\nL : Language\nM : Type w\nN : Type ?u.12946\nP : Type ?u.12949\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\ncarrier✝¹ : Set M\nfun_mem✝¹ : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f carrier✝¹\ncarrier✝ : Set M\nfun_mem✝ : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f carrier✝\nh : ↑{ carrier := carrier✝¹, fun_mem := fun_mem✝¹ } = ↑{ carrier := carrier✝, fun_mem := fun_mem✝ }\n⊢ { carrier := carrier✝¹, fun_mem := fun_mem✝¹ } = { carrier := carrier✝, fun_mem := fun_mem✝ }"],"goalsAfter":["case mk.mk\nL : Language\nM : Type w\nN : Type ?u.12946\nP : Type ?u.12949\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\ncarrier✝¹ : Set M\nfun_mem✝¹ : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f carrier✝¹\ncarrier✝ : Set M\nfun_mem✝ : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f carrier✝\nh : ↑{ carrier := carrier✝¹, fun_mem := fun_mem✝¹ } = ↑{ carrier := carrier✝, fun_mem := fun_mem✝ }\n⊢ { carrier := carrier✝¹, fun_mem := fun_mem✝¹ } = { carrier := carrier✝, fun_mem := fun_mem✝ }"],"content":";"},{"tailPos":4225,"headPos":4220,"goalsBefore":["case mk.mk\nL : Language\nM : Type w\nN : Type ?u.12946\nP : Type ?u.12949\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\ncarrier✝¹ : Set M\nfun_mem✝¹ : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f carrier✝¹\ncarrier✝ : Set M\nfun_mem✝ : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f carrier✝\nh : ↑{ carrier := carrier✝¹, fun_mem := fun_mem✝¹ } = ↑{ carrier := carrier✝, fun_mem := fun_mem✝ }\n⊢ { carrier := carrier✝¹, fun_mem := fun_mem✝¹ } = { carrier := carrier✝, fun_mem := fun_mem✝ }"],"goalsAfter":[],"content":"congr"},{"tailPos":4225,"headPos":4202,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.12946\nP : Type ?u.12949\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\np q : Substructure L M\nh : ↑p = ↑q\n⊢ p = q"],"goalsAfter":[],"content":"cases p; cases q; congr"},{"tailPos":4201,"headPos":4199,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.12946\nP : Type ?u.12949\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\np q : Substructure L M\nh : ↑p = ↑q\n⊢ p = q"],"goalsAfter":[],"content":"by"},{"tailPos":4225,"headPos":4199,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.12946\nP : Type ?u.12949\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\np q : Substructure L M\nh : ↑p = ↑q\n⊢ p = q"],"goalsAfter":[],"content":"by cases p; cases q; congr"},{"tailPos":5553,"headPos":5524,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nt : Term L α\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\n⊢ realize xs t ∈ S"],"goalsAfter":["case var\nL : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\na : α\n⊢ realize xs (var a) ∈ S","case func\nL : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\nn : ℕ\nf : Functions L n\nts : Fin n → Term L α\nih : ∀ (a : Fin n), realize xs (ts a) ∈ S\n⊢ realize xs (func f ts) ∈ S"],"content":"induction' t with a n f ts ih"},{"tailPos":5558,"headPos":5556,"goalsBefore":["case var\nL : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\na : α\n⊢ realize xs (var a) ∈ S","case func\nL : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\nn : ℕ\nf : Functions L n\nts : Fin n → Term L α\nih : ∀ (a : Fin n), realize xs (ts a) ∈ S\n⊢ realize xs (func f ts) ∈ S"],"goalsAfter":["case var\nL : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\na : α\n⊢ realize xs (var a) ∈ S"],"content":"·"},{"tailPos":5568,"headPos":5559,"goalsBefore":["case var\nL : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\na : α\n⊢ realize xs (var a) ∈ S"],"goalsAfter":[],"content":"exact h a"},{"tailPos":5568,"headPos":5556,"goalsBefore":["case var\nL : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\na : α\n⊢ realize xs (var a) ∈ S","case func\nL : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\nn : ℕ\nf : Functions L n\nts : Fin n → Term L α\nih : ∀ (a : Fin n), realize xs (ts a) ∈ S\n⊢ realize xs (func f ts) ∈ S"],"goalsAfter":["case func\nL : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\nn : ℕ\nf : Functions L n\nts : Fin n → Term L α\nih : ∀ (a : Fin n), realize xs (ts a) ∈ S\n⊢ realize xs (func f ts) ∈ S"],"content":"· exact h a"},{"tailPos":5573,"headPos":5571,"goalsBefore":["case func\nL : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\nn : ℕ\nf : Functions L n\nts : Fin n → Term L α\nih : ∀ (a : Fin n), realize xs (ts a) ∈ S\n⊢ realize xs (func f ts) ∈ S"],"goalsAfter":["case func\nL : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\nn : ℕ\nf : Functions L n\nts : Fin n → Term L α\nih : ∀ (a : Fin n), realize xs (ts a) ∈ S\n⊢ realize xs (func f ts) ∈ S"],"content":"·"},{"tailPos":5609,"headPos":5574,"goalsBefore":["case func\nL : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\nn : ℕ\nf : Functions L n\nts : Fin n → Term L α\nih : ∀ (a : Fin n), realize xs (ts a) ∈ S\n⊢ realize xs (func f ts) ∈ S"],"goalsAfter":[],"content":"exact Substructure.fun_mem _ _ _ ih"},{"tailPos":5609,"headPos":5571,"goalsBefore":["case func\nL : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\nn : ℕ\nf : Functions L n\nts : Fin n → Term L α\nih : ∀ (a : Fin n), realize xs (ts a) ∈ S\n⊢ realize xs (func f ts) ∈ S"],"goalsAfter":[],"content":"· exact Substructure.fun_mem _ _ _ ih"},{"tailPos":5609,"headPos":5524,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nt : Term L α\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\n⊢ realize xs t ∈ S"],"goalsAfter":[],"content":"induction' t with a n f ts ih\n  · exact h a\n  · exact Substructure.fun_mem _ _ _ ih"},{"tailPos":5521,"headPos":5519,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nt : Term L α\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\n⊢ realize xs t ∈ S"],"goalsAfter":[],"content":"by"},{"tailPos":5609,"headPos":5519,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.14398\nP : Type ?u.14401\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nα : Type u_1\nt : Term L α\nxs : α → M\nh : ∀ (a : α), xs a ∈ S\n⊢ realize xs t ∈ S"],"goalsAfter":[],"content":"by\n  induction' t with a n f ts ih\n  · exact h a\n  · exact Substructure.fun_mem _ _ _ ih"},{"tailPos":8048,"headPos":8027,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\n⊢ ∀ (s_1 : Set M), (s_1 ∈ Set.range fun t => ⋂ (_ : t ∈ s), ↑t) → ClosedUnder f s_1"],"goalsAfter":["case intro\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)"],"content":"rintro _ ⟨t, rfl⟩"},{"tailPos":8081,"headPos":8061,"goalsBefore":["case intro\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)"],"goalsAfter":["case pos\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\nh : t ∈ s\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)","case neg\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\nh : ¬t ∈ s\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)"],"content":"by_cases h : t ∈ s"},{"tailPos":8096,"headPos":8094,"goalsBefore":["case pos\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\nh : t ∈ s\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)","case neg\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\nh : ¬t ∈ s\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)"],"goalsAfter":["case pos\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\nh : t ∈ s\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)"],"content":"·"},{"tailPos":8124,"headPos":8097,"goalsBefore":["case pos\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\nh : t ∈ s\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)"],"goalsAfter":[],"content":"simpa only [h, Set.iInter_true] using t.fun_mem f"},{"tailPos":8124,"headPos":8094,"goalsBefore":["case pos\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\nh : t ∈ s\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)","case neg\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\nh : ¬t ∈ s\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)"],"goalsAfter":["case neg\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\nh : ¬t ∈ s\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)"],"content":"· simpa [h] using t.fun_mem f"},{"tailPos":8139,"headPos":8137,"goalsBefore":["case neg\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\nh : ¬t ∈ s\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)"],"goalsAfter":["case neg\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\nh : ¬t ∈ s\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)"],"content":"·"},{"tailPos":8148,"headPos":8140,"goalsBefore":["case neg\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\nh : ¬t ∈ s\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)"],"goalsAfter":[],"content":"simp [h]"},{"tailPos":8148,"headPos":8137,"goalsBefore":["case neg\nL : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\nt : Substructure L M\nh : ¬t ∈ s\n⊢ ClosedUnder f ((fun t => ⋂ (_ : t ∈ s), ↑t) t)"],"goalsAfter":[],"content":"· simp [h]"},{"tailPos":8148,"headPos":8027,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\n⊢ ∀ (s_1 : Set M), (s_1 ∈ Set.range fun t => ⋂ (_ : t ∈ s), ↑t) → ClosedUnder f s_1"],"goalsAfter":[],"content":"rintro _ ⟨t, rfl⟩\n            by_cases h : t ∈ s\n            · simpa [h] using t.fun_mem f\n            · simp [h]"},{"tailPos":8014,"headPos":8012,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\n⊢ ∀ (s_1 : Set M), (s_1 ∈ Set.range fun t => ⋂ (_ : t ∈ s), ↑t) → ClosedUnder f s_1"],"goalsAfter":[],"content":"by"},{"tailPos":8148,"headPos":8012,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.17474\nP : Type ?u.17477\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set (Substructure L M)\nn : ℕ\nf : Functions L n\n⊢ ∀ (s_1 : Set M), (s_1 ∈ Set.range fun t => ⋂ (_ : t ∈ s), ↑t) → ClosedUnder f s_1"],"goalsAfter":[],"content":"by\n            rintro _ ⟨t, rfl⟩\n            by_cases h : t ∈ s\n            · simpa [h] using t.fun_mem f\n            · simp [h]"},{"tailPos":8862,"headPos":8814,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.19040\nP : Type ?u.19043\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\nι : Sort u_1\nS : ι → Substructure L M\nx : M\n⊢ (x ∈ ⨅ (i : ι), S i) ↔ ∀ (i : ι), x ∈ S i"],"goalsAfter":[],"content":"simp only [iInf, mem_sInf, Set.forall_range_iff]"},{"tailPos":8813,"headPos":8811,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.19040\nP : Type ?u.19043\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\nι : Sort u_1\nS : ι → Substructure L M\nx : M\n⊢ (x ∈ ⨅ (i : ι), S i) ↔ ∀ (i : ι), x ∈ S i"],"goalsAfter":[],"content":"by"},{"tailPos":8862,"headPos":8811,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.19040\nP : Type ?u.19043\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\nι : Sort u_1\nS : ι → Substructure L M\nx : M\n⊢ (x ∈ ⨅ (i : ι), S i) ↔ ∀ (i : ι), x ∈ S i"],"goalsAfter":[],"content":"by simp only [iInf, mem_sInf, Set.forall_range_iff]"},{"tailPos":9160,"headPos":9115,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.19468\nP : Type ?u.19471\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\nι : Sort u_1\nS : ι → Substructure L M\n⊢ ↑(⨅ (i : ι), S i) = ⋂ (i : ι), ↑(S i)"],"goalsAfter":[],"content":"simp only [iInf, coe_sInf, Set.biInter_range]"},{"tailPos":9112,"headPos":9110,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.19468\nP : Type ?u.19471\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\nι : Sort u_1\nS : ι → Substructure L M\n⊢ ↑(⨅ (i : ι), S i) = ⋂ (i : ι), ↑(S i)"],"goalsAfter":[],"content":"by"},{"tailPos":9160,"headPos":9110,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.19468\nP : Type ?u.19471\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\nι : Sort u_1\nS : ι → Substructure L M\n⊢ ↑(⨅ (i : ι), S i) = ⋂ (i : ι), ↑(S i)"],"goalsAfter":[],"content":"by\n  simp only [iInf, coe_sInf, Set.biInter_range]"},{"tailPos":12461,"headPos":12435,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)\n⊢ funMap f x ∈ range (Term.realize Subtype.val)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), ∃ y, Term.realize Subtype.val y = x i\n⊢ ∃ y, Term.realize Subtype.val y = funMap f x"],"content":"simp only [mem_range] at *"},{"tailPos":12522,"headPos":12466,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), ∃ y, Term.realize Subtype.val y = x i\n⊢ ∃ y, Term.realize Subtype.val y = funMap f x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), ∃ y, Term.realize Subtype.val y = x i\n⊢ Term.realize Subtype.val (func f fun i => Classical.choose (_ : ∃ y, Term.realize Subtype.val y = x i)) = funMap f x"],"content":"refine' ⟨func f fun i => Classical.choose (hx i), _⟩"},{"tailPos":12590,"headPos":12527,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), ∃ y, Term.realize Subtype.val y = x i\n⊢ Term.realize Subtype.val (func f fun i => Classical.choose (_ : ∃ y, Term.realize Subtype.val y = x i)) = funMap f x"],"goalsAfter":[],"content":"simp only [Term.realize, fun i => Classical.choose_spec (hx i)]"},{"tailPos":12590,"headPos":12435,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)\n⊢ funMap f x ∈ range (Term.realize Subtype.val)"],"goalsAfter":[],"content":"simp only [mem_range] at *\n    refine' ⟨func f fun i => Classical.choose (hx i), _⟩\n    simp only [Term.realize, fun i => Classical.choose_spec (hx i)]"},{"tailPos":12430,"headPos":12428,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)\n⊢ funMap f x ∈ range (Term.realize Subtype.val)"],"goalsAfter":[],"content":"by"},{"tailPos":12590,"headPos":12428,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)\n⊢ funMap f x ∈ range (Term.realize Subtype.val)"],"goalsAfter":[],"content":"by\n    simp only [mem_range] at *\n    refine' ⟨func f fun i => Classical.choose (hx i), _⟩\n    simp only [Term.realize, fun i => Classical.choose_spec (hx i)]"},{"tailPos":12593,"headPos":12330,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ ↑(LowerAdjoint.toFun (closure L) s) = range (Term.realize Subtype.val)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\n⊢ ↑(LowerAdjoint.toFun (closure L) s) = range (Term.realize Subtype.val)"],"content":"let S : L.Substructure M := ⟨range (Term.realize (L := L) ((↑) : s → M)), fun {n} f x hx => by\n    simp only [mem_range] at *\n    refine' ⟨func f fun i => Classical.choose (hx i), _⟩\n    simp only [Term.realize, fun i => Classical.choose_spec (hx i)]⟩"},{"tailPos":12618,"headPos":12596,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\n⊢ ↑(LowerAdjoint.toFun (closure L) s) = range (Term.realize Subtype.val)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\n⊢ ↑(LowerAdjoint.toFun (closure L) s) = ↑S"],"content":"change _ = (S : Set M)"},{"tailPos":12645,"headPos":12625,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\n⊢ ↑(LowerAdjoint.toFun (closure L) s) = ↑S"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\n⊢ LowerAdjoint.toFun (closure L) s = S"],"content":"← SetLike.ext'_iff"},{"tailPos":12646,"headPos":12645,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\n⊢ LowerAdjoint.toFun (closure L) s = S"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\n⊢ LowerAdjoint.toFun (closure L) s = S"],"content":"]"},{"tailPos":12646,"headPos":12621,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\n⊢ ↑(LowerAdjoint.toFun (closure L) s) = ↑S"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\n⊢ LowerAdjoint.toFun (closure L) s = S"],"content":"rw [← SetLike.ext'_iff]"},{"tailPos":12740,"headPos":12649,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\n⊢ LowerAdjoint.toFun (closure L) s = S"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\nS' : Substructure L M\nhS' : S' ∈ {S | s ⊆ ↑S}\n⊢ S ≤ S'"],"content":"refine' closure_eq_of_le (fun x hx => ⟨var ⟨x, hx⟩, rfl⟩) (le_sInf fun S' hS' => _)"},{"tailPos":12745,"headPos":12743,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\nS' : Substructure L M\nhS' : S' ∈ {S | s ⊆ ↑S}\n⊢ S ≤ S'"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\nS' : Substructure L M\nhS' : S' ∈ {S | s ⊆ ↑S}\n⊢ S ≤ S'"],"content":"·"},{"tailPos":12767,"headPos":12746,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\nS' : Substructure L M\nhS' : S' ∈ {S | s ⊆ ↑S}\n⊢ S ≤ S'"],"goalsAfter":["case intro\nL : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\nS' : Substructure L M\nhS' : S' ∈ {S | s ⊆ ↑S}\nt : Term L { x // x ∈ s }\n⊢ Term.realize Subtype.val t ∈ S'"],"content":"rintro _ ⟨t, rfl⟩"},{"tailPos":12810,"headPos":12772,"goalsBefore":["case intro\nL : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\nS' : Substructure L M\nhS' : S' ∈ {S | s ⊆ ↑S}\nt : Term L { x // x ∈ s }\n⊢ Term.realize Subtype.val t ∈ S'"],"goalsAfter":[],"content":"exact t.realize_mem _ fun i => hS' i.2"},{"tailPos":12810,"headPos":12746,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\nS' : Substructure L M\nhS' : S' ∈ {S | s ⊆ ↑S}\n⊢ S ≤ S'"],"goalsAfter":[],"content":"rintro _ ⟨t, rfl⟩\n    exact t.realize_mem _ fun i => hS' i.2"},{"tailPos":12810,"headPos":12743,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L M :=\n  { carrier := range (Term.realize Subtype.val),\n    fun_mem :=\n      (_ :\n        ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M),\n          (∀ (i : Fin n), x i ∈ range (Term.realize Subtype.val)) → funMap f x ∈ range (Term.realize Subtype.val)) }\nS' : Substructure L M\nhS' : S' ∈ {S | s ⊆ ↑S}\n⊢ S ≤ S'"],"goalsAfter":[],"content":"· rintro _ ⟨t, rfl⟩\n    exact t.realize_mem _ fun i => hS' i.2"},{"tailPos":12810,"headPos":12330,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ ↑(LowerAdjoint.toFun (closure L) s) = range (Term.realize Subtype.val)"],"goalsAfter":[],"content":"let S : L.Substructure M := ⟨range (Term.realize (L := L) ((↑) : s → M)), fun {n} f x hx => by\n    simp only [mem_range] at *\n    refine' ⟨func f fun i => Classical.choose (hx i), _⟩\n    simp only [Term.realize, fun i => Classical.choose_spec (hx i)]⟩\n  change _ = (S : Set M)\n  rw [← SetLike.ext'_iff]\n  refine' closure_eq_of_le (fun x hx => ⟨var ⟨x, hx⟩, rfl⟩) (le_sInf fun S' hS' => _)\n  · rintro _ ⟨t, rfl⟩\n    exact t.realize_mem _ fun i => hS' i.2"},{"tailPos":12327,"headPos":12325,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ ↑(LowerAdjoint.toFun (closure L) s) = range (Term.realize Subtype.val)"],"goalsAfter":[],"content":"by"},{"tailPos":12810,"headPos":12325,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.30865\nP : Type ?u.30868\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ ↑(LowerAdjoint.toFun (closure L) s) = range (Term.realize Subtype.val)"],"goalsAfter":[],"content":"by\n  let S : L.Substructure M := ⟨range (Term.realize (L := L) ((↑) : s → M)), fun {n} f x hx => by\n    simp only [mem_range] at *\n    refine' ⟨func f fun i => Classical.choose (hx i), _⟩\n    simp only [Term.realize, fun i => Classical.choose_spec (hx i)]⟩\n  change _ = (S : Set M)\n  rw [← SetLike.ext'_iff]\n  refine' closure_eq_of_le (fun x hx => ⟨var ⟨x, hx⟩, rfl⟩) (le_sInf fun S' hS' => _)\n  · rintro _ ⟨t, rfl⟩\n    exact t.realize_mem _ fun i => hS' i.2"},{"tailPos":13054,"headPos":13029,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.32817\nP : Type ?u.32820\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Small ↑s\n⊢ Small { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.32817\nP : Type ?u.32820\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Small ↑s\n⊢ Small ↑↑(LowerAdjoint.toFun (closure L) s)"],"content":"← SetLike.coe_sort_coe,"},{"tailPos":13101,"headPos":13055,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.32817\nP : Type ?u.32820\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Small ↑s\n⊢ Small ↑↑(LowerAdjoint.toFun (closure L) s)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.32817\nP : Type ?u.32820\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Small ↑s\n⊢ Small ↑(range (Term.realize Subtype.val))"],"content":"Substructure.coe_closure_eq_range_term_realize"},{"tailPos":13102,"headPos":13101,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.32817\nP : Type ?u.32820\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Small ↑s\n⊢ Small ↑(range (Term.realize Subtype.val))"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.32817\nP : Type ?u.32820\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Small ↑s\n⊢ Small ↑(range (Term.realize Subtype.val))"],"content":"]"},{"tailPos":13102,"headPos":13025,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.32817\nP : Type ?u.32820\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Small ↑s\n⊢ Small { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.32817\nP : Type ?u.32820\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Small ↑s\n⊢ Small ↑(range (Term.realize Subtype.val))"],"content":"rw [← SetLike.coe_sort_coe, Substructure.coe_closure_eq_range_term_realize]"},{"tailPos":13124,"headPos":13105,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.32817\nP : Type ?u.32820\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Small ↑s\n⊢ Small ↑(range (Term.realize Subtype.val))"],"goalsAfter":[],"content":"exact small_range _"},{"tailPos":13124,"headPos":13025,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.32817\nP : Type ?u.32820\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Small ↑s\n⊢ Small { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"goalsAfter":[],"content":"rw [← SetLike.coe_sort_coe, Substructure.coe_closure_eq_range_term_realize]\n  exact small_range _"},{"tailPos":13022,"headPos":13020,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.32817\nP : Type ?u.32820\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Small ↑s\n⊢ Small { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"goalsAfter":[],"content":"by"},{"tailPos":13124,"headPos":13020,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.32817\nP : Type ?u.32820\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Small ↑s\n⊢ Small { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"goalsAfter":[],"content":"by\n  rw [← SetLike.coe_sort_coe, Substructure.coe_closure_eq_range_term_realize]\n  exact small_range _"},{"tailPos":13382,"headPos":13362,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.33484\nP : Type ?u.33487\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nx : M\n⊢ x ∈ LowerAdjoint.toFun (closure L) s ↔ ∃ t, Term.realize Subtype.val t = x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.33484\nP : Type ?u.33487\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nx : M\n⊢ x ∈ ↑(LowerAdjoint.toFun (closure L) s) ↔ ∃ t, Term.realize Subtype.val t = x"],"content":"← SetLike.mem_coe,"},{"tailPos":13417,"headPos":13383,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.33484\nP : Type ?u.33487\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nx : M\n⊢ x ∈ ↑(LowerAdjoint.toFun (closure L) s) ↔ ∃ t, Term.realize Subtype.val t = x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.33484\nP : Type ?u.33487\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nx : M\n⊢ x ∈ range (Term.realize Subtype.val) ↔ ∃ t, Term.realize Subtype.val t = x"],"content":"coe_closure_eq_range_term_realize,"},{"tailPos":13427,"headPos":13418,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.33484\nP : Type ?u.33487\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nx : M\n⊢ x ∈ range (Term.realize Subtype.val) ↔ ∃ t, Term.realize Subtype.val t = x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.33484\nP : Type ?u.33487\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nx : M\n⊢ (∃ y, Term.realize Subtype.val y = x) ↔ ∃ t, Term.realize Subtype.val t = x"],"content":"mem_range"},{"tailPos":13428,"headPos":13427,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.33484\nP : Type ?u.33487\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nx : M\n⊢ (∃ y, Term.realize Subtype.val y = x) ↔ ∃ t, Term.realize Subtype.val t = x"],"goalsAfter":[],"content":"]"},{"tailPos":13428,"headPos":13358,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.33484\nP : Type ?u.33487\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nx : M\n⊢ x ∈ LowerAdjoint.toFun (closure L) s ↔ ∃ t, Term.realize Subtype.val t = x"],"goalsAfter":[],"content":"rw [← SetLike.mem_coe, coe_closure_eq_range_term_realize, mem_range]"},{"tailPos":13355,"headPos":13353,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.33484\nP : Type ?u.33487\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nx : M\n⊢ x ∈ LowerAdjoint.toFun (closure L) s ↔ ∃ t, Term.realize Subtype.val t = x"],"goalsAfter":[],"content":"by"},{"tailPos":13428,"headPos":13353,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.33484\nP : Type ?u.33487\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nx : M\n⊢ x ∈ LowerAdjoint.toFun (closure L) s ↔ ∃ t, Term.realize Subtype.val t = x"],"goalsAfter":[],"content":"by\n  rw [← SetLike.mem_coe, coe_closure_eq_range_term_realize, mem_range]"},{"tailPos":13693,"headPos":13668,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ (#Term L ↑s)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#↑↑(LowerAdjoint.toFun (closure L) s)) ≤ (#Term L ↑s)"],"content":"← SetLike.coe_sort_coe,"},{"tailPos":13727,"headPos":13694,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#↑↑(LowerAdjoint.toFun (closure L) s)) ≤ (#Term L ↑s)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#↑(range (Term.realize Subtype.val))) ≤ (#Term L ↑s)"],"content":"coe_closure_eq_range_term_realize"},{"tailPos":13728,"headPos":13727,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#↑(range (Term.realize Subtype.val))) ≤ (#Term L ↑s)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#↑(range (Term.realize Subtype.val))) ≤ (#Term L ↑s)"],"content":"]"},{"tailPos":13728,"headPos":13664,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ (#Term L ↑s)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#↑(range (Term.realize Subtype.val))) ≤ (#Term L ↑s)"],"content":"rw [← SetLike.coe_sort_coe, coe_closure_eq_range_term_realize]"},{"tailPos":13781,"headPos":13735,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#↑(range (Term.realize Subtype.val))) ≤ (#Term L ↑s)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#↑(range (Term.realize Subtype.val))) ≤ lift (#Term L ↑s)"],"content":"← Cardinal.lift_id'.{w, max u w} (#L.Term s)"},{"tailPos":13782,"headPos":13781,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#↑(range (Term.realize Subtype.val))) ≤ lift (#Term L ↑s)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#↑(range (Term.realize Subtype.val))) ≤ lift (#Term L ↑s)"],"content":"]"},{"tailPos":13782,"headPos":13731,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#↑(range (Term.realize Subtype.val))) ≤ (#Term L ↑s)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#↑(range (Term.realize Subtype.val))) ≤ lift (#Term L ↑s)"],"content":"rw [← Cardinal.lift_id'.{w, max u w} (#L.Term s)]"},{"tailPos":13816,"headPos":13785,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#↑(range (Term.realize Subtype.val))) ≤ lift (#Term L ↑s)"],"goalsAfter":[],"content":"exact Cardinal.mk_range_le_lift"},{"tailPos":13816,"headPos":13664,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ (#Term L ↑s)"],"goalsAfter":[],"content":"rw [← SetLike.coe_sort_coe, coe_closure_eq_range_term_realize]\n  rw [← Cardinal.lift_id'.{w, max u w} (#L.Term s)]\n  exact Cardinal.mk_range_le_lift"},{"tailPos":13661,"headPos":13659,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ (#Term L ↑s)"],"goalsAfter":[],"content":"by"},{"tailPos":13816,"headPos":13659,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34066\nP : Type ?u.34069\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ (#Term L ↑s)"],"goalsAfter":[],"content":"by\n  rw [← SetLike.coe_sort_coe, coe_closure_eq_range_term_realize]\n  rw [← Cardinal.lift_id'.{w, max u w} (#L.Term s)]\n  exact Cardinal.mk_range_le_lift"},{"tailPos":14144,"headPos":14131,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"content":"← lift_umax"},{"tailPos":14145,"headPos":14144,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"content":"]"},{"tailPos":14145,"headPos":14127,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"content":"rw [← lift_umax]"},{"tailPos":14215,"headPos":14148,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ max ℵ₀ (#↑s ⊕ (i : ℕ) × Functions L i) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"content":"refine' lift_card_closure_le_card_term.trans (Term.card_le.trans _)"},{"tailPos":14229,"headPos":14222,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ max ℵ₀ (#↑s ⊕ (i : ℕ) × Functions L i) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i)) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"content":"mk_sum,"},{"tailPos":14246,"headPos":14230,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i)) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i)) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"content":"lift_umax.{w, u}"},{"tailPos":14247,"headPos":14246,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i)) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"goalsAfter":[],"content":"]"},{"tailPos":14247,"headPos":14218,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ max ℵ₀ (#↑s ⊕ (i : ℕ) × Functions L i) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"goalsAfter":[],"content":"rw [mk_sum, lift_umax.{w, u}]"},{"tailPos":14247,"headPos":14127,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"goalsAfter":[],"content":"rw [← lift_umax]\n  refine' lift_card_closure_le_card_term.trans (Term.card_le.trans _)\n  rw [mk_sum, lift_umax.{w, u}]"},{"tailPos":14124,"headPos":14122,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"goalsAfter":[],"content":"by"},{"tailPos":14247,"headPos":14122,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.34936\nP : Type ?u.34939\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ max ℵ₀ (lift (#↑s) + lift (#(i : ℕ) × Functions L i))"],"goalsAfter":[],"content":"by\n  rw [← lift_umax]\n  refine' lift_card_closure_le_card_term.trans (Term.card_le.trans _)\n  rw [mk_sum, lift_umax.{w, u}]"},{"tailPos":14561,"headPos":14526,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\n⊢ Countable { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\nthis : Countable ↑s\n⊢ Countable { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"content":"haveI : Countable s := h.to_subtype"},{"tailPos":14589,"headPos":14568,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\nthis : Countable ↑s\n⊢ Countable { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\nthis : Countable ↑s\n⊢ (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ ℵ₀"],"content":"← mk_le_aleph0_iff,"},{"tailPos":14608,"headPos":14590,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\nthis : Countable ↑s\n⊢ (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ ℵ₀"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\nthis : Countable ↑s\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ ℵ₀"],"content":"← lift_le_aleph0"},{"tailPos":14609,"headPos":14608,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\nthis : Countable ↑s\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ ℵ₀"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\nthis : Countable ↑s\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ ℵ₀"],"content":"]"},{"tailPos":14609,"headPos":14564,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\nthis : Countable ↑s\n⊢ Countable { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\nthis : Countable ↑s\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ ℵ₀"],"content":"rw [← mk_le_aleph0_iff, ← lift_le_aleph0]"},{"tailPos":14667,"headPos":14612,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\nthis : Countable ↑s\n⊢ lift (#{ x // x ∈ LowerAdjoint.toFun (closure L) s }) ≤ ℵ₀"],"goalsAfter":[],"content":"exact lift_card_closure_le_card_term.trans mk_le_aleph0"},{"tailPos":14667,"headPos":14526,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\n⊢ Countable { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"goalsAfter":[],"content":"haveI : Countable s := h.to_subtype\n  rw [← mk_le_aleph0_iff, ← lift_le_aleph0]\n  exact lift_card_closure_le_card_term.trans mk_le_aleph0"},{"tailPos":14523,"headPos":14521,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\n⊢ Countable { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"goalsAfter":[],"content":"by"},{"tailPos":14667,"headPos":14521,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.35964\nP : Type ?u.35967\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\nS : Substructure L M\ns : Set M\ninst✝ : Countable ((l : ℕ) × Functions L l)\nh : Set.Countable s\n⊢ Countable { x // x ∈ LowerAdjoint.toFun (closure L) s }"],"goalsAfter":[],"content":"by\n  haveI : Countable s := h.to_subtype\n  rw [← mk_le_aleph0_iff, ← lift_le_aleph0]\n  exact lift_card_closure_le_card_term.trans mk_le_aleph0"},{"tailPos":15869,"headPos":15781,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.37249\nP : Type ?u.37252\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns✝ : Set M\np : M → Prop\nx : M\ns : Set M\nhs : LowerAdjoint.toFun (closure L) s = ⊤\nHs : ∀ (x : M), x ∈ s → p x\nHfun : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f (setOf p)\n⊢ p x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.37249\nP : Type ?u.37252\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns✝ : Set M\np : M → Prop\nx : M\ns : Set M\nhs : LowerAdjoint.toFun (closure L) s = ⊤\nHs : ∀ (x : M), x ∈ s → p x\nHfun : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f (setOf p)\nthis : ∀ (x : M), x ∈ LowerAdjoint.toFun (closure L) s → p x\n⊢ p x"],"content":"have : ∀ x ∈ closure L s, p x := fun x hx => closure_induction hx Hs fun {n} => Hfun"},{"tailPos":15895,"headPos":15872,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.37249\nP : Type ?u.37252\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns✝ : Set M\np : M → Prop\nx : M\ns : Set M\nhs : LowerAdjoint.toFun (closure L) s = ⊤\nHs : ∀ (x : M), x ∈ s → p x\nHfun : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f (setOf p)\nthis : ∀ (x : M), x ∈ LowerAdjoint.toFun (closure L) s → p x\n⊢ p x"],"goalsAfter":[],"content":"simpa only [hs, mem_top, forall_true_left] using this x"},{"tailPos":15895,"headPos":15781,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.37249\nP : Type ?u.37252\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns✝ : Set M\np : M → Prop\nx : M\ns : Set M\nhs : LowerAdjoint.toFun (closure L) s = ⊤\nHs : ∀ (x : M), x ∈ s → p x\nHfun : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f (setOf p)\n⊢ p x"],"goalsAfter":[],"content":"have : ∀ x ∈ closure L s, p x := fun x hx => closure_induction hx Hs fun {n} => Hfun\n  simpa [hs] using this x"},{"tailPos":15778,"headPos":15776,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.37249\nP : Type ?u.37252\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns✝ : Set M\np : M → Prop\nx : M\ns : Set M\nhs : LowerAdjoint.toFun (closure L) s = ⊤\nHs : ∀ (x : M), x ∈ s → p x\nHfun : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f (setOf p)\n⊢ p x"],"goalsAfter":[],"content":"by"},{"tailPos":15895,"headPos":15776,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.37249\nP : Type ?u.37252\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns✝ : Set M\np : M → Prop\nx : M\ns : Set M\nhs : LowerAdjoint.toFun (closure L) s = ⊤\nHs : ∀ (x : M), x ∈ s → p x\nHfun : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f (setOf p)\n⊢ p x"],"goalsAfter":[],"content":"by\n  have : ∀ x ∈ closure L s, p x := fun x hx => closure_induction hx Hs fun {n} => Hfun\n  simpa [hs] using this x"},{"tailPos":17549,"headPos":17532,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55031\nP : Type ?u.55034\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ Small { x // x ∈ ⊥ }"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.55031\nP : Type ?u.55034\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ Small { x // x ∈ LowerAdjoint.toFun (closure L) ∅ }"],"content":"← closure_empty"},{"tailPos":17550,"headPos":17549,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55031\nP : Type ?u.55034\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ Small { x // x ∈ LowerAdjoint.toFun (closure L) ∅ }"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.55031\nP : Type ?u.55034\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ Small { x // x ∈ LowerAdjoint.toFun (closure L) ∅ }"],"content":"]"},{"tailPos":17550,"headPos":17528,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55031\nP : Type ?u.55034\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ Small { x // x ∈ ⊥ }"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.55031\nP : Type ?u.55034\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ Small { x // x ∈ LowerAdjoint.toFun (closure L) ∅ }"],"content":"rw [← closure_empty]"},{"tailPos":17608,"headPos":17553,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55031\nP : Type ?u.55034\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ Small { x // x ∈ LowerAdjoint.toFun (closure L) ∅ }"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.55031\nP : Type ?u.55034\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nthis : Small ↑∅\n⊢ Small { x // x ∈ LowerAdjoint.toFun (closure L) ∅ }"],"content":"haveI : Small.{u} (∅ : Set M) := small_subsingleton _"},{"tailPos":17643,"headPos":17611,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55031\nP : Type ?u.55034\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nthis : Small ↑∅\n⊢ Small { x // x ∈ LowerAdjoint.toFun (closure L) ∅ }"],"goalsAfter":[],"content":"exact Substructure.small_closure"},{"tailPos":17643,"headPos":17528,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55031\nP : Type ?u.55034\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ Small { x // x ∈ ⊥ }"],"goalsAfter":[],"content":"rw [← closure_empty]\n  haveI : Small.{u} (∅ : Set M) := small_subsingleton _\n  exact Substructure.small_closure"},{"tailPos":17525,"headPos":17523,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55031\nP : Type ?u.55034\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ Small { x // x ∈ ⊥ }"],"goalsAfter":[],"content":"by"},{"tailPos":17643,"headPos":17523,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55031\nP : Type ?u.55034\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\n⊢ Small { x // x ∈ ⊥ }"],"goalsAfter":[],"content":"by\n  rw [← closure_empty]\n  haveI : Small.{u} (∅ : Set M) := small_subsingleton _\n  exact Substructure.small_closure"},{"tailPos":18006,"headPos":17993,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55831\nP : Type ?u.55834\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑φ ⁻¹' ↑S\n⊢ funMap f x ∈ ↑φ ⁻¹' ↑S"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.55831\nP : Type ?u.55834\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑φ ⁻¹' ↑S\n⊢ ↑φ (funMap f x) ∈ ↑S"],"content":"mem_preimage,"},{"tailPos":18017,"headPos":18007,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55831\nP : Type ?u.55834\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑φ ⁻¹' ↑S\n⊢ ↑φ (funMap f x) ∈ ↑S"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.55831\nP : Type ?u.55834\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑φ ⁻¹' ↑S\n⊢ funMap f (↑φ ∘ x) ∈ ↑S"],"content":"φ.map_fun"},{"tailPos":18018,"headPos":18017,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55831\nP : Type ?u.55834\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑φ ⁻¹' ↑S\n⊢ funMap f (↑φ ∘ x) ∈ ↑S"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.55831\nP : Type ?u.55834\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑φ ⁻¹' ↑S\n⊢ funMap f (↑φ ∘ x) ∈ ↑S"],"content":"]"},{"tailPos":18018,"headPos":17989,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55831\nP : Type ?u.55834\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑φ ⁻¹' ↑S\n⊢ funMap f x ∈ ↑φ ⁻¹' ↑S"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.55831\nP : Type ?u.55834\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑φ ⁻¹' ↑S\n⊢ funMap f (↑φ ∘ x) ∈ ↑S"],"content":"rw [mem_preimage, φ.map_fun]"},{"tailPos":18054,"headPos":18023,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55831\nP : Type ?u.55834\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑φ ⁻¹' ↑S\n⊢ funMap f (↑φ ∘ x) ∈ ↑S"],"goalsAfter":[],"content":"exact S.fun_mem f (φ ∘ x) hx"},{"tailPos":18054,"headPos":17989,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55831\nP : Type ?u.55834\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑φ ⁻¹' ↑S\n⊢ funMap f x ∈ ↑φ ⁻¹' ↑S"],"goalsAfter":[],"content":"rw [mem_preimage, φ.map_fun]\n    exact S.fun_mem f (φ ∘ x) hx"},{"tailPos":17984,"headPos":17982,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55831\nP : Type ?u.55834\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑φ ⁻¹' ↑S\n⊢ funMap f x ∈ ↑φ ⁻¹' ↑S"],"goalsAfter":[],"content":"by"},{"tailPos":18054,"headPos":17982,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.55831\nP : Type ?u.55834\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑φ ⁻¹' ↑S\n⊢ funMap f x ∈ ↑φ ⁻¹' ↑S"],"goalsAfter":[],"content":"by\n    rw [mem_preimage, φ.map_fun]\n    exact S.fun_mem f (φ ∘ x) hx"},{"tailPos":18774,"headPos":18770,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.100902\nP : Type u_1\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L P\n⊢ ∀ (x : P), x ∈ comap (Hom.id L P) S ↔ x ∈ S"],"goalsAfter":[],"content":"simp only [mem_comap, Hom.id_apply, implies_true]"},{"tailPos":18769,"headPos":18767,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.100902\nP : Type u_1\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L P\n⊢ ∀ (x : P), x ∈ comap (Hom.id L P) S ↔ x ∈ S"],"goalsAfter":[],"content":"by"},{"tailPos":18774,"headPos":18767,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.100902\nP : Type u_1\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nS : Substructure L P\n⊢ ∀ (x : P), x ∈ comap (Hom.id L P) S ↔ x ∈ S"],"goalsAfter":[],"content":"by simp"},{"tailPos":19264,"headPos":19224,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.102777\nP : Type ?u.102780\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L M\nn : ℕ\nf : Functions L n\nx : Fin n → N\nhx : ∀ (i : Fin n), x i ∈ ↑φ '' ↑S\n⊢ (fun a => ↑φ a) (funMap f fun i => Classical.choose (_ : x i ∈ ↑φ '' ↑S)) = funMap f x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.102777\nP : Type ?u.102780\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L M\nn : ℕ\nf : Functions L n\nx : Fin n → N\nhx : ∀ (i : Fin n), x i ∈ ↑φ '' ↑S\n⊢ funMap f (↑φ ∘ fun i => Classical.choose (_ : ∃ x_1, (fun x_2 => x_2 ∈ S ∧ ↑φ x_2 = x i) x_1)) = funMap f x"],"content":"simp only [Hom.map_fun, SetLike.mem_coe]"},{"tailPos":19339,"headPos":19273,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.102777\nP : Type ?u.102780\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L M\nn : ℕ\nf : Functions L n\nx : Fin n → N\nhx : ∀ (i : Fin n), x i ∈ ↑φ '' ↑S\n⊢ funMap f (↑φ ∘ fun i => Classical.choose (_ : ∃ x_1, (fun x_2 => x_2 ∈ S ∧ ↑φ x_2 = x i) x_1)) = funMap f x"],"goalsAfter":[],"content":"exact congr rfl (funext fun i => (Classical.choose_spec (hx i)).2)"},{"tailPos":19339,"headPos":19224,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.102777\nP : Type ?u.102780\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L M\nn : ℕ\nf : Functions L n\nx : Fin n → N\nhx : ∀ (i : Fin n), x i ∈ ↑φ '' ↑S\n⊢ (fun a => ↑φ a) (funMap f fun i => Classical.choose (_ : x i ∈ ↑φ '' ↑S)) = funMap f x"],"goalsAfter":[],"content":"simp only [Hom.map_fun, SetLike.mem_coe]\n        exact congr rfl (funext fun i => (Classical.choose_spec (hx i)).2)"},{"tailPos":19215,"headPos":19213,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.102777\nP : Type ?u.102780\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L M\nn : ℕ\nf : Functions L n\nx : Fin n → N\nhx : ∀ (i : Fin n), x i ∈ ↑φ '' ↑S\n⊢ (fun a => ↑φ a) (funMap f fun i => Classical.choose (_ : x i ∈ ↑φ '' ↑S)) = funMap f x"],"goalsAfter":[],"content":"by"},{"tailPos":19339,"headPos":19213,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.102777\nP : Type ?u.102780\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nφ : M →[L] N\nS : Substructure L M\nn : ℕ\nf : Functions L n\nx : Fin n → N\nhx : ∀ (i : Fin n), x i ∈ ↑φ '' ↑S\n⊢ (fun a => ↑φ a) (funMap f fun i => Classical.choose (_ : x i ∈ ↑φ '' ↑S)) = funMap f x"],"goalsAfter":[],"content":"by\n        simp only [Hom.map_fun, SetLike.mem_coe]\n        exact congr rfl (funext fun i => (Classical.choose_spec (hx i)).2)"},{"tailPos":25167,"headPos":25131,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.395979\nP : Type ?u.395982\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nι : Type ?u.396023\nf : M →[L] N\nhf : Function.Injective ↑f\nS : Substructure L M\nx : M\n⊢ x ∈ comap f (map f S) → x ∈ S"],"goalsAfter":[],"content":"simp [mem_comap, mem_map, hf.eq_iff]"},{"tailPos":25130,"headPos":25128,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.395979\nP : Type ?u.395982\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nι : Type ?u.396023\nf : M →[L] N\nhf : Function.Injective ↑f\nS : Substructure L M\nx : M\n⊢ x ∈ comap f (map f S) → x ∈ S"],"goalsAfter":[],"content":"by"},{"tailPos":25167,"headPos":25128,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.395979\nP : Type ?u.395982\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nι : Type ?u.396023\nf : M →[L] N\nhf : Function.Injective ↑f\nS : Substructure L M\nx : M\n⊢ x ∈ comap f (map f S) → x ∈ S"],"goalsAfter":[],"content":"by simp [mem_comap, mem_map, hf.eq_iff]"},{"tailPos":27899,"headPos":27887,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.526603\nP : Type ?u.526606\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nι : Type ?u.526647\nf : M →[L] N\nhf : Function.Surjective ↑f\nS : Substructure L N\nx : N\nh : x ∈ S\ny : M\nhy : ↑f y = x\n⊢ y ∈ comap f S ∧ ↑f y = x"],"goalsAfter":[],"content":"simp [hy, h]"},{"tailPos":27886,"headPos":27884,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.526603\nP : Type ?u.526606\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nι : Type ?u.526647\nf : M →[L] N\nhf : Function.Surjective ↑f\nS : Substructure L N\nx : N\nh : x ∈ S\ny : M\nhy : ↑f y = x\n⊢ y ∈ comap f S ∧ ↑f y = x"],"goalsAfter":[],"content":"by"},{"tailPos":27899,"headPos":27884,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.526603\nP : Type ?u.526606\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ : Substructure L M\ns : Set M\nι : Type ?u.526647\nf : M →[L] N\nhf : Function.Surjective ↑f\nS : Substructure L N\nx : N\nh : x ∈ S\ny : M\nhy : ↑f y = x\n⊢ y ∈ comap f S ∧ ↑f y = x"],"goalsAfter":[],"content":"by simp [hy, h]"},{"tailPos":31371,"headPos":31367,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.646891\nP : Type ?u.646894\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nm : { x // x ∈ ⊤ }\n⊢ (fun m => { val := m, property := (_ : m ∈ ⊤) }) (↑(subtype ⊤) m) = m"],"goalsAfter":[],"content":"simp only [coeSubtype, coe_top, Subtype.coe_eta]"},{"tailPos":31366,"headPos":31364,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.646891\nP : Type ?u.646894\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nm : { x // x ∈ ⊤ }\n⊢ (fun m => { val := m, property := (_ : m ∈ ⊤) }) (↑(subtype ⊤) m) = m"],"goalsAfter":[],"content":"by"},{"tailPos":31371,"headPos":31364,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.646891\nP : Type ?u.646894\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns : Set M\nm : { x // x ∈ ⊤ }\n⊢ (fun m => { val := m, property := (_ : m ∈ ⊤) }) (↑(subtype ⊤) m) = m"],"goalsAfter":[],"content":"by simp"},{"tailPos":32147,"headPos":32077,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.648999\nP : Type ?u.649002\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns✝ s : Set M\np : (x : M) → x ∈ LowerAdjoint.toFun (closure L) s → Prop\nHs : ∀ (x : M) (h : x ∈ s), p x (_ : x ∈ ↑(LowerAdjoint.toFun (closure L) s))\nHfun : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f {x | ∃ hx, p x hx}\nx : M\nhx : x ∈ LowerAdjoint.toFun (closure L) s\n⊢ p x hx"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.648999\nP : Type ?u.649002\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns✝ s : Set M\np : (x : M) → x ∈ LowerAdjoint.toFun (closure L) s → Prop\nHs : ∀ (x : M) (h : x ∈ s), p x (_ : x ∈ ↑(LowerAdjoint.toFun (closure L) s))\nHfun : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f {x | ∃ hx, p x hx}\nx : M\nhx : x ∈ LowerAdjoint.toFun (closure L) s\n⊢ ∃ x_1, p x x_1"],"content":"refine' Exists.elim _ fun (hx : x ∈ closure L s) (hc : p x hx) => hc"},{"tailPos":32229,"headPos":32150,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.648999\nP : Type ?u.649002\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns✝ s : Set M\np : (x : M) → x ∈ LowerAdjoint.toFun (closure L) s → Prop\nHs : ∀ (x : M) (h : x ∈ s), p x (_ : x ∈ ↑(LowerAdjoint.toFun (closure L) s))\nHfun : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f {x | ∃ hx, p x hx}\nx : M\nhx : x ∈ LowerAdjoint.toFun (closure L) s\n⊢ ∃ x_1, p x x_1"],"goalsAfter":[],"content":"exact closure_induction hx (fun x hx => ⟨subset_closure hx, Hs x hx⟩) @Hfun"},{"tailPos":32229,"headPos":32077,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.648999\nP : Type ?u.649002\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns✝ s : Set M\np : (x : M) → x ∈ LowerAdjoint.toFun (closure L) s → Prop\nHs : ∀ (x : M) (h : x ∈ s), p x (_ : x ∈ ↑(LowerAdjoint.toFun (closure L) s))\nHfun : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f {x | ∃ hx, p x hx}\nx : M\nhx : x ∈ LowerAdjoint.toFun (closure L) s\n⊢ p x hx"],"goalsAfter":[],"content":"refine' Exists.elim _ fun (hx : x ∈ closure L s) (hc : p x hx) => hc\n  exact closure_induction hx (fun x hx => ⟨subset_closure hx, Hs x hx⟩) @Hfun"},{"tailPos":32074,"headPos":32072,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.648999\nP : Type ?u.649002\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns✝ s : Set M\np : (x : M) → x ∈ LowerAdjoint.toFun (closure L) s → Prop\nHs : ∀ (x : M) (h : x ∈ s), p x (_ : x ∈ ↑(LowerAdjoint.toFun (closure L) s))\nHfun : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f {x | ∃ hx, p x hx}\nx : M\nhx : x ∈ LowerAdjoint.toFun (closure L) s\n⊢ p x hx"],"goalsAfter":[],"content":"by"},{"tailPos":32229,"headPos":32072,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.648999\nP : Type ?u.649002\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\ns✝ s : Set M\np : (x : M) → x ∈ LowerAdjoint.toFun (closure L) s → Prop\nHs : ∀ (x : M) (h : x ∈ s), p x (_ : x ∈ ↑(LowerAdjoint.toFun (closure L) s))\nHfun : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f {x | ∃ hx, p x hx}\nx : M\nhx : x ∈ LowerAdjoint.toFun (closure L) s\n⊢ p x hx"],"goalsAfter":[],"content":"by\n  refine' Exists.elim _ fun (hx : x ∈ closure L s) (hc : p x hx) => hc\n  exact closure_induction hx (fun x hx => ⟨subset_closure hx, Hs x hx⟩) @Hfun"},{"tailPos":32778,"headPos":32736,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS : Substructure L' M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑S\n⊢ funMap f x ∈ ↑S"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS : Substructure L' M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑S\nh : funMap (onFunction φ f) x ∈ ↑S\n⊢ funMap f x ∈ ↑S"],"content":"have h := S.fun_mem (φ.onFunction f) x hx"},{"tailPos":32849,"headPos":32787,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS : Substructure L' M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑S\nh : funMap (onFunction φ f) x ∈ ↑S\n⊢ funMap f x ∈ ↑S"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS : Substructure L' M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑S\nh : funMap f x ∈ S\n⊢ funMap f x ∈ ↑S"],"content":"simp only [LHom.map_onFunction, Substructure.mem_carrier] at h"},{"tailPos":32865,"headPos":32858,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS : Substructure L' M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑S\nh : funMap f x ∈ S\n⊢ funMap f x ∈ ↑S"],"goalsAfter":[],"content":"exact h"},{"tailPos":32865,"headPos":32736,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS : Substructure L' M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑S\n⊢ funMap f x ∈ ↑S"],"goalsAfter":[],"content":"have h := S.fun_mem (φ.onFunction f) x hx\n        simp only [LHom.map_onFunction, Substructure.mem_carrier] at h\n        exact h"},{"tailPos":32727,"headPos":32725,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS : Substructure L' M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑S\n⊢ funMap f x ∈ ↑S"],"goalsAfter":[],"content":"by"},{"tailPos":32865,"headPos":32725,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS : Substructure L' M\nn : ℕ\nf : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ ↑S\n⊢ funMap f x ∈ ↑S"],"goalsAfter":[],"content":"by\n        have h := S.fun_mem (φ.onFunction f) x hx\n        simp only [LHom.map_onFunction, Substructure.mem_carrier] at h\n        exact h"},{"tailPos":32949,"headPos":32891,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS T : Substructure L' M\nh :\n  (fun S =>\n        { carrier := ↑S,\n          fun_mem := (_ : ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M), (∀ (i : Fin n), x i ∈ ↑S) → funMap f x ∈ S) })\n      S =\n    (fun S =>\n        { carrier := ↑S,\n          fun_mem := (_ : ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M), (∀ (i : Fin n), x i ∈ ↑S) → funMap f x ∈ S) })\n      T\n⊢ S = T"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS T : Substructure L' M\nh : S = T\n⊢ S = T"],"content":"simp only [SetLike.coe_set_eq, Substructure.mk.injEq] at h"},{"tailPos":32961,"headPos":32954,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS T : Substructure L' M\nh : S = T\n⊢ S = T"],"goalsAfter":[],"content":"exact h"},{"tailPos":32961,"headPos":32891,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS T : Substructure L' M\nh :\n  (fun S =>\n        { carrier := ↑S,\n          fun_mem := (_ : ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M), (∀ (i : Fin n), x i ∈ ↑S) → funMap f x ∈ S) })\n      S =\n    (fun S =>\n        { carrier := ↑S,\n          fun_mem := (_ : ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M), (∀ (i : Fin n), x i ∈ ↑S) → funMap f x ∈ S) })\n      T\n⊢ S = T"],"goalsAfter":[],"content":"simp only [SetLike.coe_set_eq, Substructure.mk.injEq] at h\n    exact h"},{"tailPos":32886,"headPos":32884,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS T : Substructure L' M\nh :\n  (fun S =>\n        { carrier := ↑S,\n          fun_mem := (_ : ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M), (∀ (i : Fin n), x i ∈ ↑S) → funMap f x ∈ S) })\n      S =\n    (fun S =>\n        { carrier := ↑S,\n          fun_mem := (_ : ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M), (∀ (i : Fin n), x i ∈ ↑S) → funMap f x ∈ S) })\n      T\n⊢ S = T"],"goalsAfter":[],"content":"by"},{"tailPos":32961,"headPos":32884,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.649885\nP : Type ?u.649888\ninst✝⁴ : Structure L M\ninst✝³ : Structure L N\ninst✝² : Structure L P\nS✝ : Substructure L M\nL' : Language\ninst✝¹ : Structure L' M\nφ : L →ᴸ L'\ninst✝ : IsExpansionOn φ M\nS T : Substructure L' M\nh :\n  (fun S =>\n        { carrier := ↑S,\n          fun_mem := (_ : ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M), (∀ (i : Fin n), x i ∈ ↑S) → funMap f x ∈ S) })\n      S =\n    (fun S =>\n        { carrier := ↑S,\n          fun_mem := (_ : ∀ {n : ℕ} (f : Functions L n) (x : Fin n → M), (∀ (i : Fin n), x i ∈ ↑S) → funMap f x ∈ S) })\n      T\n⊢ S = T"],"goalsAfter":[],"content":"by\n    simp only [SetLike.coe_set_eq, Substructure.mk.injEq] at h\n    exact h"},{"tailPos":33830,"headPos":33813,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions (L[[↑A]]) n\n⊢ ClosedUnder f ↑S"],"goalsAfter":["case inl\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions L n\n⊢ ClosedUnder (Sum.inl f) ↑S","case inr\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions (constantsOn ↑A) n\n⊢ ClosedUnder (Sum.inr f) ↑S"],"content":"cases' f with f f"},{"tailPos":33837,"headPos":33835,"goalsBefore":["case inl\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions L n\n⊢ ClosedUnder (Sum.inl f) ↑S","case inr\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions (constantsOn ↑A) n\n⊢ ClosedUnder (Sum.inr f) ↑S"],"goalsAfter":["case inl\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions L n\n⊢ ClosedUnder (Sum.inl f) ↑S"],"content":"·"},{"tailPos":33855,"headPos":33838,"goalsBefore":["case inl\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions L n\n⊢ ClosedUnder (Sum.inl f) ↑S"],"goalsAfter":[],"content":"exact S.fun_mem f"},{"tailPos":33855,"headPos":33835,"goalsBefore":["case inl\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions L n\n⊢ ClosedUnder (Sum.inl f) ↑S","case inr\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions (constantsOn ↑A) n\n⊢ ClosedUnder (Sum.inr f) ↑S"],"goalsAfter":["case inr\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions (constantsOn ↑A) n\n⊢ ClosedUnder (Sum.inr f) ↑S"],"content":"· exact S.fun_mem f"},{"tailPos":33862,"headPos":33860,"goalsBefore":["case inr\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions (constantsOn ↑A) n\n⊢ ClosedUnder (Sum.inr f) ↑S"],"goalsAfter":["case inr\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions (constantsOn ↑A) n\n⊢ ClosedUnder (Sum.inr f) ↑S"],"content":"·"},{"tailPos":33870,"headPos":33863,"goalsBefore":["case inr\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions (constantsOn ↑A) n\n⊢ ClosedUnder (Sum.inr f) ↑S"],"goalsAfter":["case inr.zero\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nf : Functions (constantsOn ↑A) Nat.zero\n⊢ ClosedUnder (Sum.inr f) ↑S","case inr.succ\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn✝ : ℕ\nf : Functions (constantsOn ↑A) (Nat.succ n✝)\n⊢ ClosedUnder (Sum.inr f) ↑S"],"content":"cases n"},{"tailPos":33879,"headPos":33877,"goalsBefore":["case inr.zero\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nf : Functions (constantsOn ↑A) Nat.zero\n⊢ ClosedUnder (Sum.inr f) ↑S","case inr.succ\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn✝ : ℕ\nf : Functions (constantsOn ↑A) (Nat.succ n✝)\n⊢ ClosedUnder (Sum.inr f) ↑S"],"goalsAfter":["case inr.zero\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nf : Functions (constantsOn ↑A) Nat.zero\n⊢ ClosedUnder (Sum.inr f) ↑S"],"content":"·"},{"tailPos":33902,"headPos":33880,"goalsBefore":["case inr.zero\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nf : Functions (constantsOn ↑A) Nat.zero\n⊢ ClosedUnder (Sum.inr f) ↑S"],"goalsAfter":[],"content":"exact fun _ _ => h f.2"},{"tailPos":33902,"headPos":33877,"goalsBefore":["case inr.zero\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nf : Functions (constantsOn ↑A) Nat.zero\n⊢ ClosedUnder (Sum.inr f) ↑S","case inr.succ\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn✝ : ℕ\nf : Functions (constantsOn ↑A) (Nat.succ n✝)\n⊢ ClosedUnder (Sum.inr f) ↑S"],"goalsAfter":["case inr.succ\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn✝ : ℕ\nf : Functions (constantsOn ↑A) (Nat.succ n✝)\n⊢ ClosedUnder (Sum.inr f) ↑S"],"content":"· exact fun _ _ => h f.2"},{"tailPos":33911,"headPos":33909,"goalsBefore":["case inr.succ\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn✝ : ℕ\nf : Functions (constantsOn ↑A) (Nat.succ n✝)\n⊢ ClosedUnder (Sum.inr f) ↑S"],"goalsAfter":["case inr.succ\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn✝ : ℕ\nf : Functions (constantsOn ↑A) (Nat.succ n✝)\n⊢ ClosedUnder (Sum.inr f) ↑S"],"content":"·"},{"tailPos":33931,"headPos":33912,"goalsBefore":["case inr.succ\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn✝ : ℕ\nf : Functions (constantsOn ↑A) (Nat.succ n✝)\n⊢ ClosedUnder (Sum.inr f) ↑S"],"goalsAfter":[],"content":"exact isEmptyElim f"},{"tailPos":33931,"headPos":33909,"goalsBefore":["case inr.succ\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn✝ : ℕ\nf : Functions (constantsOn ↑A) (Nat.succ n✝)\n⊢ ClosedUnder (Sum.inr f) ↑S"],"goalsAfter":[],"content":"· exact isEmptyElim f"},{"tailPos":33931,"headPos":33863,"goalsBefore":["case inr\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions (constantsOn ↑A) n\n⊢ ClosedUnder (Sum.inr f) ↑S"],"goalsAfter":[],"content":"cases n\n      · exact fun _ _ => h f.2\n      · exact isEmptyElim f"},{"tailPos":33931,"headPos":33860,"goalsBefore":["case inr\nL : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions (constantsOn ↑A) n\n⊢ ClosedUnder (Sum.inr f) ↑S"],"goalsAfter":[],"content":"· cases n\n      · exact fun _ _ => h f.2\n      · exact isEmptyElim f"},{"tailPos":33931,"headPos":33813,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions (L[[↑A]]) n\n⊢ ClosedUnder f ↑S"],"goalsAfter":[],"content":"cases' f with f f\n    · exact S.fun_mem f\n    · cases n\n      · exact fun _ _ => h f.2\n      · exact isEmptyElim f"},{"tailPos":33808,"headPos":33806,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions (L[[↑A]]) n\n⊢ ClosedUnder f ↑S"],"goalsAfter":[],"content":"by"},{"tailPos":33931,"headPos":33806,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.669305\nP : Type ?u.669308\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nA : Set M\nh : A ⊆ ↑S\nn : ℕ\nf : Functions (L[[↑A]]) n\n⊢ ClosedUnder f ↑S"],"goalsAfter":[],"content":"by\n    cases' f with f f\n    · exact S.fun_mem f\n    · cases n\n      · exact fun _ _ => h f.2\n      · exact isEmptyElim f"},{"tailPos":34602,"headPos":34599,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.671067\nP : Type ?u.671070\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ ↑(LHom.substructureReduct (lhomWithConstants L ↑A)) (withConstants S h) = S"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.671067\nP : Type ?u.671070\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\nx✝ : M\n⊢ x✝ ∈ ↑(LHom.substructureReduct (lhomWithConstants L ↑A)) (withConstants S h) ↔ x✝ ∈ S"],"content":"ext"},{"tailPos":34609,"headPos":34605,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.671067\nP : Type ?u.671070\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\nx✝ : M\n⊢ x✝ ∈ ↑(LHom.substructureReduct (lhomWithConstants L ↑A)) (withConstants S h) ↔ x✝ ∈ S"],"goalsAfter":[],"content":"simp only [LHom.mem_substructureReduct, mem_withConstants]"},{"tailPos":34609,"headPos":34599,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.671067\nP : Type ?u.671070\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ ↑(LHom.substructureReduct (lhomWithConstants L ↑A)) (withConstants S h) = S"],"goalsAfter":[],"content":"ext\n  simp"},{"tailPos":34596,"headPos":34594,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.671067\nP : Type ?u.671070\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ ↑(LHom.substructureReduct (lhomWithConstants L ↑A)) (withConstants S h) = S"],"goalsAfter":[],"content":"by"},{"tailPos":34609,"headPos":34594,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.671067\nP : Type ?u.671070\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ ↑(LHom.substructureReduct (lhomWithConstants L ↑A)) (withConstants S h) = S"],"goalsAfter":[],"content":"by\n  ext\n  simp"},{"tailPos":34810,"headPos":34800,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.681989\nP : Type ?u.681992\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ A ⊆ ↑(LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.681989\nP : Type ?u.681992\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\na : M\nha : a ∈ A\n⊢ a ∈ ↑(LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"content":"intro a ha"},{"tailPos":34840,"headPos":34813,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.681989\nP : Type ?u.681992\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\na : M\nha : a ∈ A\n⊢ a ∈ ↑(LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.681989\nP : Type ?u.681992\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\na : M\nha : a ∈ A\n⊢ a ∈ LowerAdjoint.toFun (closure (L[[↑A]])) s"],"content":"simp only [SetLike.mem_coe]"},{"tailPos":34891,"headPos":34843,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.681989\nP : Type ?u.681992\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\na : M\nha : a ∈ A\n⊢ a ∈ LowerAdjoint.toFun (closure (L[[↑A]])) s"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.681989\nP : Type ?u.681992\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\na : M\nha : a ∈ A\na' : Language.Constants (L[[↑A]]) := Sum.inr { val := a, property := ha }\n⊢ a ∈ LowerAdjoint.toFun (closure (L[[↑A]])) s"],"content":"let a' : L[[A]].Constants := Sum.inr ⟨a, ha⟩"},{"tailPos":34916,"headPos":34894,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.681989\nP : Type ?u.681992\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\na : M\nha : a ∈ A\na' : Language.Constants (L[[↑A]]) := Sum.inr { val := a, property := ha }\n⊢ a ∈ LowerAdjoint.toFun (closure (L[[↑A]])) s"],"goalsAfter":[],"content":"exact constants_mem a'"},{"tailPos":34916,"headPos":34800,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.681989\nP : Type ?u.681992\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ A ⊆ ↑(LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"goalsAfter":[],"content":"intro a ha\n  simp only [SetLike.mem_coe]\n  let a' : L[[A]].Constants := Sum.inr ⟨a, ha⟩\n  exact constants_mem a'"},{"tailPos":34797,"headPos":34795,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.681989\nP : Type ?u.681992\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ A ⊆ ↑(LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"goalsAfter":[],"content":"by"},{"tailPos":34916,"headPos":34795,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.681989\nP : Type ?u.681992\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ A ⊆ ↑(LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"goalsAfter":[],"content":"by\n  intro a ha\n  simp only [SetLike.mem_coe]\n  let a' : L[[A]].Constants := Sum.inr ⟨a, ha⟩\n  exact constants_mem a'"},{"tailPos":35282,"headPos":35208,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ LowerAdjoint.toFun (closure (L[[↑A]])) s =\n    withConstants (LowerAdjoint.toFun (closure L) (A ∪ s)) (_ : A ⊆ ↑(LowerAdjoint.toFun (closure L) (A ∪ s)))"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ withConstants (LowerAdjoint.toFun (closure L) (A ∪ s)) (_ : A ⊆ ↑(LowerAdjoint.toFun (closure L) (A ∪ s))) ≤\n    LowerAdjoint.toFun (closure (L[[↑A]])) s"],"content":"refine' closure_eq_of_le ((A.subset_union_right s).trans subset_closure) _"},{"tailPos":35345,"headPos":35289,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ withConstants (LowerAdjoint.toFun (closure L) (A ∪ s)) (_ : A ⊆ ↑(LowerAdjoint.toFun (closure L) (A ∪ s))) ≤\n    LowerAdjoint.toFun (closure (L[[↑A]])) s"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ ↑(LHom.substructureReduct (lhomWithConstants L ↑A))\n      (withConstants (LowerAdjoint.toFun (closure L) (A ∪ s)) (_ : A ⊆ ↑(LowerAdjoint.toFun (closure L) (A ∪ s)))) ≤\n    ↑(LHom.substructureReduct (lhomWithConstants L ↑A)) (LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"content":"← (L.lhomWithConstants A).substructureReduct.le_iff_le"},{"tailPos":35346,"headPos":35345,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ ↑(LHom.substructureReduct (lhomWithConstants L ↑A))\n      (withConstants (LowerAdjoint.toFun (closure L) (A ∪ s)) (_ : A ⊆ ↑(LowerAdjoint.toFun (closure L) (A ∪ s)))) ≤\n    ↑(LHom.substructureReduct (lhomWithConstants L ↑A)) (LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ ↑(LHom.substructureReduct (lhomWithConstants L ↑A))\n      (withConstants (LowerAdjoint.toFun (closure L) (A ∪ s)) (_ : A ⊆ ↑(LowerAdjoint.toFun (closure L) (A ∪ s)))) ≤\n    ↑(LHom.substructureReduct (lhomWithConstants L ↑A)) (LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"content":"]"},{"tailPos":35346,"headPos":35285,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ withConstants (LowerAdjoint.toFun (closure L) (A ∪ s)) (_ : A ⊆ ↑(LowerAdjoint.toFun (closure L) (A ∪ s))) ≤\n    LowerAdjoint.toFun (closure (L[[↑A]])) s"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ ↑(LHom.substructureReduct (lhomWithConstants L ↑A))\n      (withConstants (LowerAdjoint.toFun (closure L) (A ∪ s)) (_ : A ⊆ ↑(LowerAdjoint.toFun (closure L) (A ∪ s)))) ≤\n    ↑(LHom.substructureReduct (lhomWithConstants L ↑A)) (LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"content":"rw [← (L.lhomWithConstants A).substructureReduct.le_iff_le]"},{"tailPos":35478,"headPos":35349,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ ↑(LHom.substructureReduct (lhomWithConstants L ↑A))\n      (withConstants (LowerAdjoint.toFun (closure L) (A ∪ s)) (_ : A ⊆ ↑(LowerAdjoint.toFun (closure L) (A ∪ s)))) ≤\n    ↑(LHom.substructureReduct (lhomWithConstants L ↑A)) (LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ A ⊆ ↑(LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"content":"simp only [subset_closure, reduct_withConstants, closure_le, LHom.coe_substructureReduct,\n    Set.union_subset_iff, and_true_iff]"},{"tailPos":35483,"headPos":35481,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ A ⊆ ↑(LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ A ⊆ ↑(LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"content":"·"},{"tailPos":35518,"headPos":35484,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ A ⊆ ↑(LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"goalsAfter":[],"content":"exact subset_closure_withConstants"},{"tailPos":35518,"headPos":35481,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ A ⊆ ↑(LowerAdjoint.toFun (closure (L[[↑A]])) s)"],"goalsAfter":[],"content":"· exact subset_closure_withConstants"},{"tailPos":35518,"headPos":35208,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ LowerAdjoint.toFun (closure (L[[↑A]])) s =\n    withConstants (LowerAdjoint.toFun (closure L) (A ∪ s)) (_ : A ⊆ ↑(LowerAdjoint.toFun (closure L) (A ∪ s)))"],"goalsAfter":[],"content":"refine' closure_eq_of_le ((A.subset_union_right s).trans subset_closure) _\n  rw [← (L.lhomWithConstants A).substructureReduct.le_iff_le]\n  simp only [subset_closure, reduct_withConstants, closure_le, LHom.coe_substructureReduct,\n    Set.union_subset_iff, and_true_iff]\n  · exact subset_closure_withConstants"},{"tailPos":35205,"headPos":35203,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ LowerAdjoint.toFun (closure (L[[↑A]])) s =\n    withConstants (LowerAdjoint.toFun (closure L) (A ∪ s)) (_ : A ⊆ ↑(LowerAdjoint.toFun (closure L) (A ∪ s)))"],"goalsAfter":[],"content":"by"},{"tailPos":35518,"headPos":35203,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.683008\nP : Type ?u.683011\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nA s : Set M\nh : A ⊆ ↑S\n⊢ LowerAdjoint.toFun (closure (L[[↑A]])) s =\n    withConstants (LowerAdjoint.toFun (closure L) (A ∪ s)) (_ : A ⊆ ↑(LowerAdjoint.toFun (closure L) (A ∪ s)))"],"goalsAfter":[],"content":"by\n  refine' closure_eq_of_le ((A.subset_union_right s).trans subset_closure) _\n  rw [← (L.lhomWithConstants A).substructureReduct.le_iff_le]\n  simp only [subset_closure, reduct_withConstants, closure_le, LHom.coe_substructureReduct,\n    Set.union_subset_iff, and_true_iff]\n  · exact subset_closure_withConstants"},{"tailPos":36362,"headPos":36357,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.708501\nP : Type ?u.708504\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf✝ : M →[L] N\nh : ∀ (c : M), ↑f✝ c ∈ p\nn : ℕ\nf : Functions L n\nx : Fin n → M\n⊢ (fun c => { val := ↑f✝ c, property := (_ : ↑f✝ c ∈ p) }) (funMap f x) =\n    funMap f ((fun c => { val := ↑f✝ c, property := (_ : ↑f✝ c ∈ p) }) ∘ x)"],"goalsAfter":[],"content":"aesop"},{"tailPos":36356,"headPos":36354,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.708501\nP : Type ?u.708504\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf✝ : M →[L] N\nh : ∀ (c : M), ↑f✝ c ∈ p\nn : ℕ\nf : Functions L n\nx : Fin n → M\n⊢ (fun c => { val := ↑f✝ c, property := (_ : ↑f✝ c ∈ p) }) (funMap f x) =\n    funMap f ((fun c => { val := ↑f✝ c, property := (_ : ↑f✝ c ∈ p) }) ∘ x)"],"goalsAfter":[],"content":"by"},{"tailPos":36362,"headPos":36354,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.708501\nP : Type ?u.708504\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf✝ : M →[L] N\nh : ∀ (c : M), ↑f✝ c ∈ p\nn : ℕ\nf : Functions L n\nx : Fin n → M\n⊢ (fun c => { val := ↑f✝ c, property := (_ : ↑f✝ c ∈ p) }) (funMap f x) =\n    funMap f ((fun c => { val := ↑f✝ c, property := (_ : ↑f✝ c ∈ p) }) ∘ x)"],"goalsAfter":[],"content":"by aesop"},{"tailPos":37862,"headPos":37859,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.835752\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ range f = Substructure.map f ⊤"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type u_1\nP : Type ?u.835752\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\nx✝ : N\n⊢ x✝ ∈ range f ↔ x✝ ∈ Substructure.map f ⊤"],"content":"ext"},{"tailPos":37869,"headPos":37865,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type u_1\nP : Type ?u.835752\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\nx✝ : N\n⊢ x✝ ∈ range f ↔ x✝ ∈ Substructure.map f ⊤"],"goalsAfter":[],"content":"simp only [mem_range, mem_map, mem_top, true_and]"},{"tailPos":37869,"headPos":37859,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.835752\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ range f = Substructure.map f ⊤"],"goalsAfter":[],"content":"ext\n  simp"},{"tailPos":37856,"headPos":37854,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.835752\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ range f = Substructure.map f ⊤"],"goalsAfter":[],"content":"by"},{"tailPos":37869,"headPos":37854,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.835752\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ range f = Substructure.map f ⊤"],"goalsAfter":[],"content":"by\n  ext\n  simp"},{"tailPos":38885,"headPos":38868,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.972917\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ range f = ⊤ ↔ Function.Surjective ↑f"],"goalsAfter":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.972917\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ ↑(range f) = ↑⊤ ↔ Function.Surjective ↑f"],"content":"SetLike.ext'_iff,"},{"tailPos":38896,"headPos":38886,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.972917\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ ↑(range f) = ↑⊤ ↔ Function.Surjective ↑f"],"goalsAfter":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.972917\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ Set.range ↑f = ↑⊤ ↔ Function.Surjective ↑f"],"content":"range_coe,"},{"tailPos":38905,"headPos":38897,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.972917\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ Set.range ↑f = ↑⊤ ↔ Function.Surjective ↑f"],"goalsAfter":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.972917\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ Set.range ↑f = Set.univ ↔ Function.Surjective ↑f"],"content":"coe_top,"},{"tailPos":38930,"headPos":38906,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.972917\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ Set.range ↑f = Set.univ ↔ Function.Surjective ↑f"],"goalsAfter":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.972917\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ Function.Surjective ↑f ↔ Function.Surjective ↑f"],"content":"Set.range_iff_surjective"},{"tailPos":38931,"headPos":38930,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.972917\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ Function.Surjective ↑f ↔ Function.Surjective ↑f"],"goalsAfter":[],"content":"]"},{"tailPos":38931,"headPos":38864,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.972917\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ range f = ⊤ ↔ Function.Surjective ↑f"],"goalsAfter":[],"content":"rw [SetLike.ext'_iff, range_coe, coe_top, Set.range_iff_surjective]"},{"tailPos":38861,"headPos":38859,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.972917\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ range f = ⊤ ↔ Function.Surjective ↑f"],"goalsAfter":[],"content":"by"},{"tailPos":38931,"headPos":38859,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.972917\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\n⊢ range f = ⊤ ↔ Function.Surjective ↑f"],"goalsAfter":[],"content":"by\n  rw [SetLike.ext'_iff, range_coe, coe_top, Set.range_iff_surjective]"},{"tailPos":39143,"headPos":39130,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.984407\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\np : Substructure L N\n⊢ range f ≤ p ↔ comap f p = ⊤"],"goalsAfter":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.984407\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\np : Substructure L N\n⊢ Substructure.map f ⊤ ≤ p ↔ comap f p = ⊤"],"content":"range_eq_map,"},{"tailPos":39164,"headPos":39144,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.984407\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\np : Substructure L N\n⊢ Substructure.map f ⊤ ≤ p ↔ comap f p = ⊤"],"goalsAfter":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.984407\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\np : Substructure L N\n⊢ ⊤ ≤ comap f p ↔ comap f p = ⊤"],"content":"map_le_iff_le_comap,"},{"tailPos":39175,"headPos":39165,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.984407\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\np : Substructure L N\n⊢ ⊤ ≤ comap f p ↔ comap f p = ⊤"],"goalsAfter":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.984407\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\np : Substructure L N\n⊢ ⊤ ≤ comap f p ↔ ⊤ ≤ comap f p"],"content":"eq_top_iff"},{"tailPos":39176,"headPos":39175,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.984407\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\np : Substructure L N\n⊢ ⊤ ≤ comap f p ↔ ⊤ ≤ comap f p"],"goalsAfter":[],"content":"]"},{"tailPos":39176,"headPos":39126,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.984407\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\np : Substructure L N\n⊢ range f ≤ p ↔ comap f p = ⊤"],"goalsAfter":[],"content":"rw [range_eq_map, map_le_iff_le_comap, eq_top_iff]"},{"tailPos":39123,"headPos":39121,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.984407\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\np : Substructure L N\n⊢ range f ≤ p ↔ comap f p = ⊤"],"goalsAfter":[],"content":"by"},{"tailPos":39176,"headPos":39121,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.984407\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M →[L] N\np : Substructure L N\n⊢ range f ≤ p ↔ comap f p = ⊤"],"goalsAfter":[],"content":"by\n  rw [range_eq_map, map_le_iff_le_comap, eq_top_iff]"},{"tailPos":39720,"headPos":39717,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\n⊢ ↑f ∘ x = ↑g ∘ x"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ (↑f ∘ x) x✝ = (↑g ∘ x) x✝"],"content":"ext"},{"tailPos":39758,"headPos":39739,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ (↑f ∘ x) x✝ = (↑g ∘ x) x✝"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = (↑g ∘ x) x✝"],"content":"Function.comp_apply"},{"tailPos":39759,"headPos":39758,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = (↑g ∘ x) x✝"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = (↑g ∘ x) x✝"],"content":"]"},{"tailPos":39759,"headPos":39735,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ (↑f ∘ x) x✝ = (↑g ∘ x) x✝"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = (↑g ∘ x) x✝"],"content":"rw [Function.comp_apply]"},{"tailPos":39758,"headPos":39739,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = (↑g ∘ x) x✝"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = ↑g (x x✝)"],"content":"Function.comp_apply"},{"tailPos":39759,"headPos":39758,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = ↑g (x x✝)"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = ↑g (x x✝)"],"content":"]"},{"tailPos":39759,"headPos":39735,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = (↑g ∘ x) x✝"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = ↑g (x x✝)"],"content":"rw [Function.comp_apply]"},{"tailPos":39758,"headPos":39739,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = ↑g (x x✝)"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = ↑g (x x✝)"],"content":"Function.comp_apply"},{"tailPos":39759,"headPos":39735,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = ↑g (x x✝)"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = ↑g (x x✝)"],"content":"rw [Function.comp_apply]"},{"tailPos":39759,"headPos":39727,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ (↑f ∘ x) x✝ = (↑g ∘ x) x✝"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = ↑g (x x✝)"],"content":"repeat' rw [Function.comp_apply]"},{"tailPos":39774,"headPos":39766,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nx✝ : Fin n\n⊢ ↑f (x x✝) = ↑g (x x✝)"],"goalsAfter":[],"content":"apply hx"},{"tailPos":39774,"headPos":39717,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\n⊢ ↑f ∘ x = ↑g ∘ x"],"goalsAfter":[],"content":"ext\n      repeat' rw [Function.comp_apply]\n      apply hx"},{"tailPos":39710,"headPos":39708,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\n⊢ ↑f ∘ x = ↑g ∘ x"],"goalsAfter":[],"content":"by"},{"tailPos":39774,"headPos":39708,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\n⊢ ↑f ∘ x = ↑g ∘ x"],"goalsAfter":[],"content":"by\n      ext\n      repeat' rw [Function.comp_apply]\n      apply hx"},{"tailPos":39774,"headPos":39678,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\n⊢ funMap fn x ∈ {x | ↑f x = ↑g x}"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nh : ↑f ∘ x = ↑g ∘ x\n⊢ funMap fn x ∈ {x | ↑f x = ↑g x}"],"content":"have h : f ∘ x = g ∘ x := by\n      ext\n      repeat' rw [Function.comp_apply]\n      apply hx"},{"tailPos":39787,"headPos":39779,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\nh : ↑f ∘ x = ↑g ∘ x\n⊢ funMap fn x ∈ {x | ↑f x = ↑g x}"],"goalsAfter":[],"content":"simp [h]"},{"tailPos":39787,"headPos":39678,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\n⊢ funMap fn x ∈ {x | ↑f x = ↑g x}"],"goalsAfter":[],"content":"have h : f ∘ x = g ∘ x := by\n      ext\n      repeat' rw [Function.comp_apply]\n      apply hx\n    simp [h]"},{"tailPos":39673,"headPos":39671,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\n⊢ funMap fn x ∈ {x | ↑f x = ↑g x}"],"goalsAfter":[],"content":"by"},{"tailPos":39787,"headPos":39671,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1030622\nP : Type ?u.1030625\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf g : M →[L] N\nn : ℕ\nfn : Functions L n\nx : Fin n → M\nhx : ∀ (i : Fin n), x i ∈ {x | ↑f x = ↑g x}\n⊢ funMap fn x ∈ {x | ↑f x = ↑g x}"],"goalsAfter":[],"content":"by\n    have h : f ∘ x = g ∘ x := by\n      ext\n      repeat' rw [Function.comp_apply]\n      apply hx\n    simp [h]"},{"tailPos":41650,"headPos":41641,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r\n      ({ toFun := ↑(Hom.codRestrict p (toHom f) h),\n            inj' :=\n              (_ :\n                ∀ (a b : M), ↑(Hom.codRestrict p (toHom f) h) a = ↑(Hom.codRestrict p (toHom f) h) b → a = b) }.toFun ∘\n        x) ↔\n    RelMap r x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(Hom.codRestrict p (toHom f) h) ∘ x) ↔ RelMap r x"],"content":"simp only"},{"tailPos":41680,"headPos":41659,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(Hom.codRestrict p (toHom f) h) ∘ x) ↔ RelMap r x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(subtype p) ∘ ↑(Hom.codRestrict p (toHom f) h) ∘ x) ↔ RelMap r x"],"content":"← p.subtype.map_rel"},{"tailPos":41681,"headPos":41680,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(subtype p) ∘ ↑(Hom.codRestrict p (toHom f) h) ∘ x) ↔ RelMap r x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(subtype p) ∘ ↑(Hom.codRestrict p (toHom f) h) ∘ x) ↔ RelMap r x"],"content":"]"},{"tailPos":41681,"headPos":41655,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(Hom.codRestrict p (toHom f) h) ∘ x) ↔ RelMap r x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(subtype p) ∘ ↑(Hom.codRestrict p (toHom f) h) ∘ x) ↔ RelMap r x"],"content":"rw [← p.subtype.map_rel]"},{"tailPos":41766,"headPos":41686,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(subtype p) ∘ ↑(Hom.codRestrict p (toHom f) h) ∘ x) ↔ RelMap r x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(Hom.comp (toHom (subtype p)) (Hom.codRestrict p (toHom f) h)) ∘ x) ↔ RelMap r x"],"content":"change RelMap r (Hom.comp p.subtype.toHom (f.toHom.codRestrict p h) ∘ x) ↔ _"},{"tailPos":41804,"headPos":41775,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(Hom.comp (toHom (subtype p)) (Hom.codRestrict p (toHom f) h)) ∘ x) ↔ RelMap r x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(toHom f) ∘ x) ↔ RelMap r x"],"content":"Hom.subtype_comp_codRestrict,"},{"tailPos":41818,"headPos":41805,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(toHom f) ∘ x) ↔ RelMap r x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(toHom f) ∘ x) ↔ RelMap r (↑f ∘ x)"],"content":"← f.map_rel"},{"tailPos":41819,"headPos":41818,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(toHom f) ∘ x) ↔ RelMap r (↑f ∘ x)"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(toHom f) ∘ x) ↔ RelMap r (↑f ∘ x)"],"content":"]"},{"tailPos":41819,"headPos":41771,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(Hom.comp (toHom (subtype p)) (Hom.codRestrict p (toHom f) h)) ∘ x) ↔ RelMap r x"],"goalsAfter":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(toHom f) ∘ x) ↔ RelMap r (↑f ∘ x)"],"content":"rw [Hom.subtype_comp_codRestrict, ← f.map_rel]"},{"tailPos":41827,"headPos":41824,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r (↑(toHom f) ∘ x) ↔ RelMap r (↑f ∘ x)"],"goalsAfter":[],"content":"rfl"},{"tailPos":41827,"headPos":41641,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r\n      ({ toFun := ↑(Hom.codRestrict p (toHom f) h),\n            inj' :=\n              (_ :\n                ∀ (a b : M), ↑(Hom.codRestrict p (toHom f) h) a = ↑(Hom.codRestrict p (toHom f) h) b → a = b) }.toFun ∘\n        x) ↔\n    RelMap r x"],"goalsAfter":[],"content":"simp only\n    rw [← p.subtype.map_rel]\n    change RelMap r (Hom.comp p.subtype.toHom (f.toHom.codRestrict p h) ∘ x) ↔ _\n    rw [Hom.subtype_comp_codRestrict, ← f.map_rel]\n    rfl"},{"tailPos":41636,"headPos":41634,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r\n      ({ toFun := ↑(Hom.codRestrict p (toHom f) h),\n            inj' :=\n              (_ :\n                ∀ (a b : M), ↑(Hom.codRestrict p (toHom f) h) a = ↑(Hom.codRestrict p (toHom f) h) b → a = b) }.toFun ∘\n        x) ↔\n    RelMap r x"],"goalsAfter":[],"content":"by"},{"tailPos":41827,"headPos":41634,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1124039\nP : Type ?u.1124042\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\np : Substructure L N\nf : M ↪[L] N\nh : ∀ (c : M), ↑f c ∈ p\nn : ℕ\nr : Relations L n\nx : Fin n → M\n⊢ RelMap r\n      ({ toFun := ↑(Hom.codRestrict p (toHom f) h),\n            inj' :=\n              (_ :\n                ∀ (a b : M), ↑(Hom.codRestrict p (toHom f) h) a = ↑(Hom.codRestrict p (toHom f) h) b → a = b) }.toFun ∘\n        x) ↔\n    RelMap r x"],"goalsAfter":[],"content":"by\n    simp only\n    rw [← p.subtype.map_rel]\n    change RelMap r (Hom.comp p.subtype.toHom (f.toHom.codRestrict p h) ∘ x) ↔ _\n    rw [Hom.subtype_comp_codRestrict, ← f.map_rel]\n    rfl"},{"tailPos":43518,"headPos":43513,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1127022\nP : Type ?u.1127025\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf✝ : M ↪[L] N\ns : Substructure L M\nn : ℕ\nf : Functions L n\nx : Fin n → { x // x ∈ s }\n⊢ Equiv.toFun\n      {\n        toFun :=\n          ↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n              (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s)),\n        invFun := fun n =>\n          { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n            property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) },\n        left_inv :=\n          (_ :\n            ∀ (x : { x // x ∈ s }),\n              (fun n =>\n                    { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                      property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) })\n                  (↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                        (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s))\n                    x) =\n                x),\n        right_inv :=\n          (_ :\n            ∀ (x : { x // x ∈ Substructure.map (toHom f✝) s }),\n              ↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                      (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s))\n                  ((fun n =>\n                      { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                        property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) })\n                    x) =\n                x) }\n      (funMap f x) =\n    funMap f\n      ({\n            toFun :=\n              ↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                  (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s)),\n            invFun := fun n =>\n              { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) },\n            left_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ s }),\n                  (fun n =>\n                        { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                          property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) })\n                      (↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                            (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s))\n                        x) =\n                    x),\n            right_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ Substructure.map (toHom f✝) s }),\n                  ↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                          (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s))\n                      ((fun n =>\n                          { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                            property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) })\n                        x) =\n                    x) }.toFun ∘\n        x)"],"goalsAfter":[],"content":"aesop"},{"tailPos":43512,"headPos":43510,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1127022\nP : Type ?u.1127025\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf✝ : M ↪[L] N\ns : Substructure L M\nn : ℕ\nf : Functions L n\nx : Fin n → { x // x ∈ s }\n⊢ Equiv.toFun\n      {\n        toFun :=\n          ↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n              (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s)),\n        invFun := fun n =>\n          { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n            property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) },\n        left_inv :=\n          (_ :\n            ∀ (x : { x // x ∈ s }),\n              (fun n =>\n                    { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                      property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) })\n                  (↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                        (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s))\n                    x) =\n                x),\n        right_inv :=\n          (_ :\n            ∀ (x : { x // x ∈ Substructure.map (toHom f✝) s }),\n              ↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                      (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s))\n                  ((fun n =>\n                      { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                        property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) })\n                    x) =\n                x) }\n      (funMap f x) =\n    funMap f\n      ({\n            toFun :=\n              ↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                  (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s)),\n            invFun := fun n =>\n              { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) },\n            left_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ s }),\n                  (fun n =>\n                        { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                          property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) })\n                      (↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                            (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s))\n                        x) =\n                    x),\n            right_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ Substructure.map (toHom f✝) s }),\n                  ↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                          (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s))\n                      ((fun n =>\n                          { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                            property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) })\n                        x) =\n                    x) }.toFun ∘\n        x)"],"goalsAfter":[],"content":"by"},{"tailPos":43518,"headPos":43510,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1127022\nP : Type ?u.1127025\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf✝ : M ↪[L] N\ns : Substructure L M\nn : ℕ\nf : Functions L n\nx : Fin n → { x // x ∈ s }\n⊢ Equiv.toFun\n      {\n        toFun :=\n          ↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n              (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s)),\n        invFun := fun n =>\n          { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n            property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) },\n        left_inv :=\n          (_ :\n            ∀ (x : { x // x ∈ s }),\n              (fun n =>\n                    { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                      property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) })\n                  (↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                        (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s))\n                    x) =\n                x),\n        right_inv :=\n          (_ :\n            ∀ (x : { x // x ∈ Substructure.map (toHom f✝) s }),\n              ↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                      (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s))\n                  ((fun n =>\n                      { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                        property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) })\n                    x) =\n                x) }\n      (funMap f x) =\n    funMap f\n      ({\n            toFun :=\n              ↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                  (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s)),\n            invFun := fun n =>\n              { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) },\n            left_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ s }),\n                  (fun n =>\n                        { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                          property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) })\n                      (↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                            (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s))\n                        x) =\n                    x),\n            right_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ Substructure.map (toHom f✝) s }),\n                  ↑(codRestrict (Substructure.map (toHom f✝) s) (domRestrict f✝ s)\n                          (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f✝ s) x ∈ Substructure.map (toHom f✝) s))\n                      ((fun n =>\n                          { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s),\n                            property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f✝) s) ∈ ↑s) })\n                        x) =\n                    x) }.toFun ∘\n        x)"],"goalsAfter":[],"content":"by aesop"},{"tailPos":43549,"headPos":43544,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1127022\nP : Type ?u.1127025\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ↪[L] N\ns : Substructure L M\nn : ℕ\nR : Relations L n\nx : Fin n → { x // x ∈ s }\n⊢ RelMap R\n      ({\n            toFun :=\n              ↑(codRestrict (Substructure.map (toHom f) s) (domRestrict f s)\n                  (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f s) x ∈ Substructure.map (toHom f) s)),\n            invFun := fun n =>\n              { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s),\n                property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s) ∈ ↑s) },\n            left_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ s }),\n                  (fun n =>\n                        { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s),\n                          property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s) ∈ ↑s) })\n                      (↑(codRestrict (Substructure.map (toHom f) s) (domRestrict f s)\n                            (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f s) x ∈ Substructure.map (toHom f) s))\n                        x) =\n                    x),\n            right_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ Substructure.map (toHom f) s }),\n                  ↑(codRestrict (Substructure.map (toHom f) s) (domRestrict f s)\n                          (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f s) x ∈ Substructure.map (toHom f) s))\n                      ((fun n =>\n                          { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s),\n                            property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s) ∈ ↑s) })\n                        x) =\n                    x) }.toFun ∘\n        x) ↔\n    RelMap R x"],"goalsAfter":[],"content":"aesop"},{"tailPos":43543,"headPos":43541,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1127022\nP : Type ?u.1127025\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ↪[L] N\ns : Substructure L M\nn : ℕ\nR : Relations L n\nx : Fin n → { x // x ∈ s }\n⊢ RelMap R\n      ({\n            toFun :=\n              ↑(codRestrict (Substructure.map (toHom f) s) (domRestrict f s)\n                  (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f s) x ∈ Substructure.map (toHom f) s)),\n            invFun := fun n =>\n              { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s),\n                property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s) ∈ ↑s) },\n            left_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ s }),\n                  (fun n =>\n                        { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s),\n                          property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s) ∈ ↑s) })\n                      (↑(codRestrict (Substructure.map (toHom f) s) (domRestrict f s)\n                            (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f s) x ∈ Substructure.map (toHom f) s))\n                        x) =\n                    x),\n            right_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ Substructure.map (toHom f) s }),\n                  ↑(codRestrict (Substructure.map (toHom f) s) (domRestrict f s)\n                          (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f s) x ∈ Substructure.map (toHom f) s))\n                      ((fun n =>\n                          { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s),\n                            property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s) ∈ ↑s) })\n                        x) =\n                    x) }.toFun ∘\n        x) ↔\n    RelMap R x"],"goalsAfter":[],"content":"by"},{"tailPos":43549,"headPos":43541,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1127022\nP : Type ?u.1127025\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ↪[L] N\ns : Substructure L M\nn : ℕ\nR : Relations L n\nx : Fin n → { x // x ∈ s }\n⊢ RelMap R\n      ({\n            toFun :=\n              ↑(codRestrict (Substructure.map (toHom f) s) (domRestrict f s)\n                  (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f s) x ∈ Substructure.map (toHom f) s)),\n            invFun := fun n =>\n              { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s),\n                property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s) ∈ ↑s) },\n            left_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ s }),\n                  (fun n =>\n                        { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s),\n                          property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s) ∈ ↑s) })\n                      (↑(codRestrict (Substructure.map (toHom f) s) (domRestrict f s)\n                            (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f s) x ∈ Substructure.map (toHom f) s))\n                        x) =\n                    x),\n            right_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ Substructure.map (toHom f) s }),\n                  ↑(codRestrict (Substructure.map (toHom f) s) (domRestrict f s)\n                          (_ : ∀ (x : { x // x ∈ s }), ↑(domRestrict f s) x ∈ Substructure.map (toHom f) s))\n                      ((fun n =>\n                          { val := Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s),\n                            property := (_ : Classical.choose (_ : ↑n ∈ Substructure.map (toHom f) s) ∈ ↑s) })\n                        x) =\n                    x) }.toFun ∘\n        x) ↔\n    RelMap R x"],"goalsAfter":[],"content":"by aesop"},{"tailPos":44407,"headPos":44402,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1136836\nP : Type ?u.1136839\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf✝ : M ↪[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\n⊢ Equiv.toFun\n      { toFun := ↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝))),\n        invFun := fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝)),\n        left_inv :=\n          (_ :\n            ∀ (m : M),\n              (fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝)))\n                  (↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝))) m) =\n                m),\n        right_inv :=\n          (_ :\n            ∀ (x : { x // x ∈ Hom.range (toHom f✝) }),\n              ↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝)))\n                  ((fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝))) x) =\n                x) }\n      (funMap f x) =\n    funMap f\n      ({ toFun := ↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝))),\n            invFun := fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝)),\n            left_inv :=\n              (_ :\n                ∀ (m : M),\n                  (fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝)))\n                      (↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝)))\n                        m) =\n                    m),\n            right_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ Hom.range (toHom f✝) }),\n                  ↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝)))\n                      ((fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝))) x) =\n                    x) }.toFun ∘\n        x)"],"goalsAfter":[],"content":"aesop"},{"tailPos":44401,"headPos":44399,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1136836\nP : Type ?u.1136839\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf✝ : M ↪[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\n⊢ Equiv.toFun\n      { toFun := ↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝))),\n        invFun := fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝)),\n        left_inv :=\n          (_ :\n            ∀ (m : M),\n              (fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝)))\n                  (↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝))) m) =\n                m),\n        right_inv :=\n          (_ :\n            ∀ (x : { x // x ∈ Hom.range (toHom f✝) }),\n              ↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝)))\n                  ((fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝))) x) =\n                x) }\n      (funMap f x) =\n    funMap f\n      ({ toFun := ↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝))),\n            invFun := fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝)),\n            left_inv :=\n              (_ :\n                ∀ (m : M),\n                  (fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝)))\n                      (↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝)))\n                        m) =\n                    m),\n            right_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ Hom.range (toHom f✝) }),\n                  ↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝)))\n                      ((fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝))) x) =\n                    x) }.toFun ∘\n        x)"],"goalsAfter":[],"content":"by"},{"tailPos":44407,"headPos":44399,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1136836\nP : Type ?u.1136839\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf✝ : M ↪[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\n⊢ Equiv.toFun\n      { toFun := ↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝))),\n        invFun := fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝)),\n        left_inv :=\n          (_ :\n            ∀ (m : M),\n              (fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝)))\n                  (↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝))) m) =\n                m),\n        right_inv :=\n          (_ :\n            ∀ (x : { x // x ∈ Hom.range (toHom f✝) }),\n              ↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝)))\n                  ((fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝))) x) =\n                x) }\n      (funMap f x) =\n    funMap f\n      ({ toFun := ↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝))),\n            invFun := fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝)),\n            left_inv :=\n              (_ :\n                ∀ (m : M),\n                  (fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝)))\n                      (↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝)))\n                        m) =\n                    m),\n            right_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ Hom.range (toHom f✝) }),\n                  ↑(codRestrict (Hom.range (toHom f✝)) f✝ (_ : ∀ (x : M), ↑(toHom f✝) x ∈ Hom.range (toHom f✝)))\n                      ((fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f✝))) x) =\n                    x) }.toFun ∘\n        x)"],"goalsAfter":[],"content":"by aesop"},{"tailPos":44438,"headPos":44433,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1136836\nP : Type ?u.1136839\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ↪[L] N\nn : ℕ\nR : Relations L n\nx : Fin n → M\n⊢ RelMap R\n      ({ toFun := ↑(codRestrict (Hom.range (toHom f)) f (_ : ∀ (x : M), ↑(toHom f) x ∈ Hom.range (toHom f))),\n            invFun := fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f)),\n            left_inv :=\n              (_ :\n                ∀ (m : M),\n                  (fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f)))\n                      (↑(codRestrict (Hom.range (toHom f)) f (_ : ∀ (x : M), ↑(toHom f) x ∈ Hom.range (toHom f))) m) =\n                    m),\n            right_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ Hom.range (toHom f) }),\n                  ↑(codRestrict (Hom.range (toHom f)) f (_ : ∀ (x : M), ↑(toHom f) x ∈ Hom.range (toHom f)))\n                      ((fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f))) x) =\n                    x) }.toFun ∘\n        x) ↔\n    RelMap R x"],"goalsAfter":[],"content":"aesop"},{"tailPos":44432,"headPos":44430,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1136836\nP : Type ?u.1136839\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ↪[L] N\nn : ℕ\nR : Relations L n\nx : Fin n → M\n⊢ RelMap R\n      ({ toFun := ↑(codRestrict (Hom.range (toHom f)) f (_ : ∀ (x : M), ↑(toHom f) x ∈ Hom.range (toHom f))),\n            invFun := fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f)),\n            left_inv :=\n              (_ :\n                ∀ (m : M),\n                  (fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f)))\n                      (↑(codRestrict (Hom.range (toHom f)) f (_ : ∀ (x : M), ↑(toHom f) x ∈ Hom.range (toHom f))) m) =\n                    m),\n            right_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ Hom.range (toHom f) }),\n                  ↑(codRestrict (Hom.range (toHom f)) f (_ : ∀ (x : M), ↑(toHom f) x ∈ Hom.range (toHom f)))\n                      ((fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f))) x) =\n                    x) }.toFun ∘\n        x) ↔\n    RelMap R x"],"goalsAfter":[],"content":"by"},{"tailPos":44438,"headPos":44430,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1136836\nP : Type ?u.1136839\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ↪[L] N\nn : ℕ\nR : Relations L n\nx : Fin n → M\n⊢ RelMap R\n      ({ toFun := ↑(codRestrict (Hom.range (toHom f)) f (_ : ∀ (x : M), ↑(toHom f) x ∈ Hom.range (toHom f))),\n            invFun := fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f)),\n            left_inv :=\n              (_ :\n                ∀ (m : M),\n                  (fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f)))\n                      (↑(codRestrict (Hom.range (toHom f)) f (_ : ∀ (x : M), ↑(toHom f) x ∈ Hom.range (toHom f))) m) =\n                    m),\n            right_inv :=\n              (_ :\n                ∀ (x : { x // x ∈ Hom.range (toHom f) }),\n                  ↑(codRestrict (Hom.range (toHom f)) f (_ : ∀ (x : M), ↑(toHom f) x ∈ Hom.range (toHom f)))\n                      ((fun n => Classical.choose (_ : ↑n ∈ Hom.range (toHom f))) x) =\n                    x) }.toFun ∘\n        x) ↔\n    RelMap R x"],"goalsAfter":[],"content":"by aesop"},{"tailPos":44835,"headPos":44830,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.1142600\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ≃[L] N\n⊢ Hom.range (toHom f) = ⊤"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type u_1\nP : Type ?u.1142600\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ≃[L] N\nn : N\n⊢ n ∈ Hom.range (toHom f) ↔ n ∈ ⊤"],"content":"ext n"},{"tailPos":44910,"headPos":44838,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type u_1\nP : Type ?u.1142600\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ≃[L] N\nn : N\n⊢ n ∈ Hom.range (toHom f) ↔ n ∈ ⊤"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type u_1\nP : Type ?u.1142600\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ≃[L] N\nn : N\n⊢ ∃ y, ↑f y = n"],"content":"simp only [Hom.mem_range, coe_toHom, Substructure.mem_top, iff_true_iff]"},{"tailPos":44955,"headPos":44913,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type u_1\nP : Type ?u.1142600\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ≃[L] N\nn : N\n⊢ ∃ y, ↑f y = n"],"goalsAfter":[],"content":"exact ⟨f.symm n, apply_symm_apply _ _⟩"},{"tailPos":44955,"headPos":44830,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.1142600\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ≃[L] N\n⊢ Hom.range (toHom f) = ⊤"],"goalsAfter":[],"content":"ext n\n  simp only [Hom.mem_range, coe_toHom, Substructure.mem_top, iff_true_iff]\n  exact ⟨f.symm n, apply_symm_apply _ _⟩"},{"tailPos":44827,"headPos":44825,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.1142600\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ≃[L] N\n⊢ Hom.range (toHom f) = ⊤"],"goalsAfter":[],"content":"by"},{"tailPos":44955,"headPos":44825,"goalsBefore":["L : Language\nM : Type w\nN : Type u_1\nP : Type ?u.1142600\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS : Substructure L M\nf : M ≃[L] N\n⊢ Hom.range (toHom f) = ⊤"],"goalsAfter":[],"content":"by\n  ext n\n  simp only [Hom.mem_range, coe_toHom, Substructure.mem_top, iff_true_iff]\n  exact ⟨f.symm n, apply_symm_apply _ _⟩"},{"tailPos":45663,"headPos":45658,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1144938\nP : Type ?u.1144941\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\n⊢ Hom.range (Embedding.toHom (subtype S)) = S"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.1144938\nP : Type ?u.1144941\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nx : M\n⊢ x ∈ Hom.range (Embedding.toHom (subtype S)) ↔ x ∈ S"],"content":"ext x"},{"tailPos":45724,"headPos":45666,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.1144938\nP : Type ?u.1144941\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nx : M\n⊢ x ∈ Hom.range (Embedding.toHom (subtype S)) ↔ x ∈ S"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.1144938\nP : Type ?u.1144941\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nx : M\n⊢ (∃ y, ↑y = x) ↔ x ∈ S"],"content":"simp only [Hom.mem_range, Embedding.coe_toHom, coeSubtype]"},{"tailPos":45774,"headPos":45727,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.1144938\nP : Type ?u.1144941\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nx : M\n⊢ (∃ y, ↑y = x) ↔ x ∈ S"],"goalsAfter":["case h\nL : Language\nM : Type w\nN : Type ?u.1144938\nP : Type ?u.1144941\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nx : M\n⊢ (∃ y, ↑y = x) → x ∈ S"],"content":"refine' ⟨_, fun h => ⟨⟨x, h⟩, rfl⟩⟩"},{"tailPos":45806,"headPos":45777,"goalsBefore":["case h\nL : Language\nM : Type w\nN : Type ?u.1144938\nP : Type ?u.1144941\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\nx : M\n⊢ (∃ y, ↑y = x) → x ∈ S"],"goalsAfter":["case h.intro.mk\nL : Language\nM : Type w\nN : Type ?u.1144938\nP : Type ?u.1144941\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\ny : M\nhy : y ∈ S\n⊢ ↑{ val := y, property := hy } ∈ S"],"content":"rintro ⟨⟨y, hy⟩, rfl⟩"},{"tailPos":45817,"headPos":45809,"goalsBefore":["case h.intro.mk\nL : Language\nM : Type w\nN : Type ?u.1144938\nP : Type ?u.1144941\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\ny : M\nhy : y ∈ S\n⊢ ↑{ val := y, property := hy } ∈ S"],"goalsAfter":[],"content":"exact hy"},{"tailPos":45817,"headPos":45658,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1144938\nP : Type ?u.1144941\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\n⊢ Hom.range (Embedding.toHom (subtype S)) = S"],"goalsAfter":[],"content":"ext x\n  simp only [Hom.mem_range, Embedding.coe_toHom, coeSubtype]\n  refine' ⟨_, fun h => ⟨⟨x, h⟩, rfl⟩⟩\n  rintro ⟨⟨y, hy⟩, rfl⟩\n  exact hy"},{"tailPos":45655,"headPos":45653,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1144938\nP : Type ?u.1144941\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\n⊢ Hom.range (Embedding.toHom (subtype S)) = S"],"goalsAfter":[],"content":"by"},{"tailPos":45817,"headPos":45653,"goalsBefore":["L : Language\nM : Type w\nN : Type ?u.1144938\nP : Type ?u.1144941\ninst✝² : Structure L M\ninst✝¹ : Structure L N\ninst✝ : Structure L P\nS✝ S : Substructure L M\n⊢ Hom.range (Embedding.toHom (subtype S)) = S"],"goalsAfter":[],"content":"by\n  ext x\n  simp only [Hom.mem_range, Embedding.coe_toHom, coeSubtype]\n  refine' ⟨_, fun h => ⟨⟨x, h⟩, rfl⟩⟩\n  rintro ⟨⟨y, hy⟩, rfl⟩\n  exact hy"}]