[{"tailPos":3109,"headPos":3102,"goalsBefore":["L : Language\nM : Type ?u.9690\nN : Type ?u.9693\nP : Type ?u.9696\nQ : Type ?u.9699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf g : M ↪ₑ[L] N\nh : (fun f => ↑f) f = (fun f => ↑f) g\n⊢ f = g"],"goalsAfter":["case mk\nL : Language\nM : Type ?u.9690\nN : Type ?u.9693\nP : Type ?u.9696\nQ : Type ?u.9699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\ng : M ↪ₑ[L] N\ntoFun✝ : M → N\nmap_formula'✝ : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\nh : (fun f => ↑f) (mk toFun✝) = (fun f => ↑f) g\n⊢ mk toFun✝ = g"],"content":"cases f"},{"tailPos":3121,"headPos":3114,"goalsBefore":["case mk\nL : Language\nM : Type ?u.9690\nN : Type ?u.9693\nP : Type ?u.9696\nQ : Type ?u.9699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\ng : M ↪ₑ[L] N\ntoFun✝ : M → N\nmap_formula'✝ : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\nh : (fun f => ↑f) (mk toFun✝) = (fun f => ↑f) g\n⊢ mk toFun✝ = g"],"goalsAfter":["case mk.mk\nL : Language\nM : Type ?u.9690\nN : Type ?u.9693\nP : Type ?u.9696\nQ : Type ?u.9699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\ntoFun✝¹ : M → N\nmap_formula'✝¹ :\n  ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝¹ ∘ x) ↔ Formula.Realize φ x\ntoFun✝ : M → N\nmap_formula'✝ : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\nh : (fun f => ↑f) (mk toFun✝¹) = (fun f => ↑f) (mk toFun✝)\n⊢ mk toFun✝¹ = mk toFun✝"],"content":"cases g"},{"tailPos":3166,"headPos":3126,"goalsBefore":["case mk.mk\nL : Language\nM : Type ?u.9690\nN : Type ?u.9693\nP : Type ?u.9696\nQ : Type ?u.9699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\ntoFun✝¹ : M → N\nmap_formula'✝¹ :\n  ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝¹ ∘ x) ↔ Formula.Realize φ x\ntoFun✝ : M → N\nmap_formula'✝ : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\nh : (fun f => ↑f) (mk toFun✝¹) = (fun f => ↑f) (mk toFun✝)\n⊢ mk toFun✝¹ = mk toFun✝"],"goalsAfter":["case mk.mk\nL : Language\nM : Type ?u.9690\nN : Type ?u.9693\nP : Type ?u.9696\nQ : Type ?u.9699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\ntoFun✝¹ : M → N\nmap_formula'✝¹ :\n  ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝¹ ∘ x) ↔ Formula.Realize φ x\ntoFun✝ : M → N\nmap_formula'✝ : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\nh : (fun f => ↑f) (mk toFun✝¹) = (fun f => ↑f) (mk toFun✝)\n⊢ toFun✝¹ = toFun✝"],"content":"simp only [ElementaryEmbedding.mk.injEq]"},{"tailPos":3176,"headPos":3171,"goalsBefore":["case mk.mk\nL : Language\nM : Type ?u.9690\nN : Type ?u.9693\nP : Type ?u.9696\nQ : Type ?u.9699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\ntoFun✝¹ : M → N\nmap_formula'✝¹ :\n  ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝¹ ∘ x) ↔ Formula.Realize φ x\ntoFun✝ : M → N\nmap_formula'✝ : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\nh : (fun f => ↑f) (mk toFun✝¹) = (fun f => ↑f) (mk toFun✝)\n⊢ toFun✝¹ = toFun✝"],"goalsAfter":["case mk.mk.h\nL : Language\nM : Type ?u.9690\nN : Type ?u.9693\nP : Type ?u.9696\nQ : Type ?u.9699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\ntoFun✝¹ : M → N\nmap_formula'✝¹ :\n  ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝¹ ∘ x) ↔ Formula.Realize φ x\ntoFun✝ : M → N\nmap_formula'✝ : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\nh : (fun f => ↑f) (mk toFun✝¹) = (fun f => ↑f) (mk toFun✝)\nx : M\n⊢ toFun✝¹ x = toFun✝ x"],"content":"ext x"},{"tailPos":3212,"headPos":3181,"goalsBefore":["case mk.mk.h\nL : Language\nM : Type ?u.9690\nN : Type ?u.9693\nP : Type ?u.9696\nQ : Type ?u.9699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\ntoFun✝¹ : M → N\nmap_formula'✝¹ :\n  ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝¹ ∘ x) ↔ Formula.Realize φ x\ntoFun✝ : M → N\nmap_formula'✝ : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\nh : (fun f => ↑f) (mk toFun✝¹) = (fun f => ↑f) (mk toFun✝)\nx : M\n⊢ toFun✝¹ x = toFun✝ x"],"goalsAfter":[],"content":"exact Function.funext_iff.1 h x"},{"tailPos":3212,"headPos":3102,"goalsBefore":["L : Language\nM : Type ?u.9690\nN : Type ?u.9693\nP : Type ?u.9696\nQ : Type ?u.9699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf g : M ↪ₑ[L] N\nh : (fun f => ↑f) f = (fun f => ↑f) g\n⊢ f = g"],"goalsAfter":[],"content":"cases f\n    cases g\n    simp only [ElementaryEmbedding.mk.injEq]\n    ext x\n    exact Function.funext_iff.1 h x"},{"tailPos":3097,"headPos":3095,"goalsBefore":["L : Language\nM : Type ?u.9690\nN : Type ?u.9693\nP : Type ?u.9696\nQ : Type ?u.9699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf g : M ↪ₑ[L] N\nh : (fun f => ↑f) f = (fun f => ↑f) g\n⊢ f = g"],"goalsAfter":[],"content":"by"},{"tailPos":3212,"headPos":3095,"goalsBefore":["L : Language\nM : Type ?u.9690\nN : Type ?u.9693\nP : Type ?u.9696\nQ : Type ?u.9699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf g : M ↪ₑ[L] N\nh : (fun f => ↑f) f = (fun f => ↑f) g\n⊢ f = g"],"goalsAfter":[],"content":"by\n    cases f\n    cases g\n    simp only [ElementaryEmbedding.mk.injEq]\n    ext x\n    exact Function.funext_iff.1 h x"},{"tailPos":3681,"headPos":3623,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize φ (↑f ∘ v) (↑f ∘ xs) ↔ BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize\n      (BoundedFormula.restrictFreeVar φ\n        (Set.inclusion (_ : ↑(BoundedFormula.freeVarFinset φ) ⊆ ↑(BoundedFormula.freeVarFinset φ))))\n      ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) ↔\n    BoundedFormula.Realize φ v xs"],"content":"← BoundedFormula.realize_restrictFreeVar Set.Subset.rfl,"},{"tailPos":3702,"headPos":3682,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize\n      (BoundedFormula.restrictFreeVar φ\n        (Set.inclusion (_ : ↑(BoundedFormula.freeVarFinset φ) ⊆ ↑(BoundedFormula.freeVarFinset φ))))\n      ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) ↔\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) ↔\n    BoundedFormula.Realize φ v xs"],"content":"Set.inclusion_eq_id,"},{"tailPos":3712,"headPos":3703,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) ↔\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"iff_eq_eq"},{"tailPos":3713,"headPos":3712,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"]"},{"tailPos":3713,"headPos":3619,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize φ (↑f ∘ v) (↑f ∘ xs) ↔ BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"rw [← BoundedFormula.realize_restrictFreeVar Set.Subset.rfl, Set.inclusion_eq_id, iff_eq_eq]"},{"tailPos":3879,"headPos":3718,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  Formula.Realize\n      (Formula.relabel (↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)))\n        (BoundedFormula.toFormula (BoundedFormula.restrictFreeVar φ id)))\n      (↑f ∘\n        Sum.elim (v ∘ Subtype.val) xs ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ↔\n    Formula.Realize\n      (Formula.relabel (↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)))\n        (BoundedFormula.toFormula (BoundedFormula.restrictFreeVar φ id)))\n      (Sum.elim (v ∘ Subtype.val) xs ∘ ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"have h :=\n      f.map_formula' ((φ.restrictFreeVar id).toFormula.relabel (Fintype.equivFin _))\n        (Sum.elim (v ∘ (↑)) xs ∘ (Fintype.equivFin _).symm)"},{"tailPos":3969,"headPos":3884,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  Formula.Realize\n      (Formula.relabel (↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)))\n        (BoundedFormula.toFormula (BoundedFormula.restrictFreeVar φ id)))\n      (↑f ∘\n        Sum.elim (v ∘ Subtype.val) xs ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ↔\n    Formula.Realize\n      (Formula.relabel (↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)))\n        (BoundedFormula.toFormula (BoundedFormula.restrictFreeVar φ id)))\n      (Sum.elim (v ∘ Subtype.val) xs ∘ ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((↑f ∘\n            Sum.elim (v ∘ Subtype.val) xs ∘\n              ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((↑f ∘\n            Sum.elim (v ∘ Subtype.val) xs ∘\n              ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"simp only [Formula.realize_relabel, BoundedFormula.realize_toFormula, iff_eq_eq] at h"},{"tailPos":4032,"headPos":3978,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((↑f ∘\n            Sum.elim (v ∘ Subtype.val) xs ∘\n              ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((↑f ∘\n            Sum.elim (v ∘ Subtype.val) xs ∘\n              ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      ((((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      ((((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"← Function.comp.assoc _ _ (Fintype.equivFin _).symm,"},{"tailPos":4108,"headPos":4039,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      ((((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      ((((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"Function.comp.assoc _ (Fintype.equivFin _).symm (Fintype.equivFin _),"},{"tailPos":4130,"headPos":4109,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘ id) ∘ Sum.inl)\n      (((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘ id) ∘ Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"Equiv.symm_comp_self,"},{"tailPos":4160,"headPos":4137,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘ id) ∘ Sum.inl)\n      (((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘ id) ∘ Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘ Sum.inl)\n      ((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘ Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"Function.comp.right_id,"},{"tailPos":4181,"headPos":4161,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘ Sum.inl)\n      ((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘ Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (↑f ∘ Sum.elim (v ∘ Subtype.val) xs ∘ Sum.inl)\n      ((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘ Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"Function.comp.assoc,"},{"tailPos":4200,"headPos":4182,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (↑f ∘ Sum.elim (v ∘ Subtype.val) xs ∘ Sum.inl)\n      ((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘ Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (↑f ∘ v ∘ Subtype.val)\n      ((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘ Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"Sum.elim_comp_inl,"},{"tailPos":4239,"headPos":4207,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (↑f ∘ v ∘ Subtype.val)\n      ((↑f ∘ Sum.elim (v ∘ Subtype.val) xs) ∘ Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (↑f ∘ v ∘ Subtype.val)\n      (↑f ∘ Sum.elim (v ∘ Subtype.val) xs ∘ Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"Function.comp.assoc _ _ Sum.inr,"},{"tailPos":4258,"headPos":4240,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (↑f ∘ v ∘ Subtype.val)\n      (↑f ∘ Sum.elim (v ∘ Subtype.val) xs ∘ Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (↑f ∘ v ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"Sum.elim_comp_inr,"},{"tailPos":4282,"headPos":4259,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (↑f ∘ v ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"← Function.comp.assoc"},{"tailPos":4283,"headPos":4282,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"]"},{"tailPos":4288,"headPos":3974,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((↑f ∘\n            Sum.elim (v ∘ Subtype.val) xs ∘\n              ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((↑f ∘\n            Sum.elim (v ∘ Subtype.val) xs ∘\n              ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"content":"rw [← Function.comp.assoc _ _ (Fintype.equivFin _).symm,\n      Function.comp.assoc _ (Fintype.equivFin _).symm (Fintype.equivFin _), Equiv.symm_comp_self,\n      Function.comp.right_id, Function.comp.assoc, Sum.elim_comp_inl,\n      Function.comp.assoc _ _ Sum.inr, Sum.elim_comp_inr, ← Function.comp.assoc] at h"},{"tailPos":4310,"headPos":4293,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr) =\n    BoundedFormula.Realize φ v xs"],"content":"refine' h.trans _"},{"tailPos":4365,"headPos":4320,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      ((Sum.elim (v ∘ Subtype.val) xs ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      ((Sum.elim (v ∘ Subtype.val) xs ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr) =\n    BoundedFormula.Realize φ v xs"],"content":"Function.comp.assoc _ _ (Fintype.equivFin _),"},{"tailPos":4387,"headPos":4366,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      ((Sum.elim (v ∘ Subtype.val) xs ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      ((Sum.elim (v ∘ Subtype.val) xs ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((Sum.elim (v ∘ Subtype.val) xs ∘ id) ∘ Sum.inl)\n      ((Sum.elim (v ∘ Subtype.val) xs ∘ id) ∘ Sum.inr) =\n    BoundedFormula.Realize φ v xs"],"content":"Equiv.symm_comp_self,"},{"tailPos":4411,"headPos":4388,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((Sum.elim (v ∘ Subtype.val) xs ∘ id) ∘ Sum.inl)\n      ((Sum.elim (v ∘ Subtype.val) xs ∘ id) ∘ Sum.inr) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (Sum.elim (v ∘ Subtype.val) xs ∘ Sum.inl)\n      (Sum.elim (v ∘ Subtype.val) xs ∘ Sum.inr) =\n    BoundedFormula.Realize φ v xs"],"content":"Function.comp.right_id,"},{"tailPos":4436,"headPos":4418,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (Sum.elim (v ∘ Subtype.val) xs ∘ Sum.inl)\n      (Sum.elim (v ∘ Subtype.val) xs ∘ Sum.inr) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (v ∘ Subtype.val)\n      (Sum.elim (v ∘ Subtype.val) xs ∘ Sum.inr) =\n    BoundedFormula.Realize φ v xs"],"content":"Sum.elim_comp_inl,"},{"tailPos":4478,"headPos":4437,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (v ∘ Subtype.val)\n      (Sum.elim (v ∘ Subtype.val) xs ∘ Sum.inr) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (v ∘ Subtype.val) xs = BoundedFormula.Realize φ v xs"],"content":"Sum.elim_comp_inr (v ∘ Subtype.val) xs,"},{"tailPos":4574,"headPos":4485,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) (v ∘ Subtype.val) xs = BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize\n      (BoundedFormula.restrictFreeVar φ\n        (Set.inclusion (_ : ↑(BoundedFormula.freeVarFinset φ) ⊆ ↑(BoundedFormula.freeVarFinset φ))))\n      (v ∘ Subtype.val) xs =\n    BoundedFormula.Realize φ v xs"],"content":"← Set.inclusion_eq_id (s := (BoundedFormula.freeVarFinset φ : Set α)) Set.Subset.rfl,"},{"tailPos":4634,"headPos":4581,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize\n      (BoundedFormula.restrictFreeVar φ\n        (Set.inclusion (_ : ↑(BoundedFormula.freeVarFinset φ) ⊆ ↑(BoundedFormula.freeVarFinset φ))))\n      (v ∘ Subtype.val) xs =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize φ v xs = BoundedFormula.Realize φ v xs"],"content":"BoundedFormula.realize_restrictFreeVar Set.Subset.rfl"},{"tailPos":4635,"headPos":4634,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize φ v xs = BoundedFormula.Realize φ v xs"],"goalsAfter":[],"content":"]"},{"tailPos":4635,"headPos":4315,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\nh :\n  BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id) ((↑f ∘ v) ∘ Subtype.val) (↑f ∘ xs) =\n    BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr)\n⊢ BoundedFormula.Realize (BoundedFormula.restrictFreeVar φ id)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inl)\n      (((Sum.elim (v ∘ Subtype.val) xs ∘\n            ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n)).symm) ∘\n          ↑(Fintype.equivFin ({ x // x ∈ BoundedFormula.freeVarFinset φ } ⊕ Fin n))) ∘\n        Sum.inr) =\n    BoundedFormula.Realize φ v xs"],"goalsAfter":[],"content":"erw [Function.comp.assoc _ _ (Fintype.equivFin _), Equiv.symm_comp_self, Function.comp.right_id,\n      Sum.elim_comp_inl, Sum.elim_comp_inr (v ∘ Subtype.val) xs,\n      ← Set.inclusion_eq_id (s := (BoundedFormula.freeVarFinset φ : Set α)) Set.Subset.rfl,\n      BoundedFormula.realize_restrictFreeVar Set.Subset.rfl]"},{"tailPos":4635,"headPos":3619,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize φ (↑f ∘ v) (↑f ∘ xs) ↔ BoundedFormula.Realize φ v xs"],"goalsAfter":[],"content":"rw [← BoundedFormula.realize_restrictFreeVar Set.Subset.rfl, Set.inclusion_eq_id, iff_eq_eq]\n    have h :=\n      f.map_formula' ((φ.restrictFreeVar id).toFormula.relabel (Fintype.equivFin _))\n        (Sum.elim (v ∘ (↑)) xs ∘ (Fintype.equivFin _).symm)\n    simp only [Formula.realize_relabel, BoundedFormula.realize_toFormula, iff_eq_eq] at h\n    rw [← Function.comp.assoc _ _ (Fintype.equivFin _).symm,\n      Function.comp.assoc _ (Fintype.equivFin _).symm (Fintype.equivFin _), Equiv.symm_comp_self,\n      Function.comp.right_id, Function.comp.assoc, Sum.elim_comp_inl,\n      Function.comp.assoc _ _ Sum.inr, Sum.elim_comp_inr, ← Function.comp.assoc] at h\n    refine' h.trans _\n    erw [Function.comp.assoc _ _ (Fintype.equivFin _), Equiv.symm_comp_self, Function.comp.right_id,\n      Sum.elim_comp_inl, Sum.elim_comp_inr (v ∘ Subtype.val) xs,\n      ← Set.inclusion_eq_id (s := (BoundedFormula.freeVarFinset φ : Set α)) Set.Subset.rfl,\n      BoundedFormula.realize_restrictFreeVar Set.Subset.rfl]"},{"tailPos":4635,"headPos":3605,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize φ (↑f ∘ v) (↑f ∘ xs) ↔ BoundedFormula.Realize φ v xs"],"goalsAfter":[],"content":"classical\n    rw [← BoundedFormula.realize_restrictFreeVar Set.Subset.rfl, Set.inclusion_eq_id, iff_eq_eq]\n    have h :=\n      f.map_formula' ((φ.restrictFreeVar id).toFormula.relabel (Fintype.equivFin _))\n        (Sum.elim (v ∘ (↑)) xs ∘ (Fintype.equivFin _).symm)\n    simp only [Formula.realize_relabel, BoundedFormula.realize_toFormula, iff_eq_eq] at h\n    rw [← Function.comp.assoc _ _ (Fintype.equivFin _).symm,\n      Function.comp.assoc _ (Fintype.equivFin _).symm (Fintype.equivFin _), Equiv.symm_comp_self,\n      Function.comp.right_id, Function.comp.assoc, Sum.elim_comp_inl,\n      Function.comp.assoc _ _ Sum.inr, Sum.elim_comp_inr, ← Function.comp.assoc] at h\n    refine' h.trans _\n    erw [Function.comp.assoc _ _ (Fintype.equivFin _), Equiv.symm_comp_self, Function.comp.right_id,\n      Sum.elim_comp_inl, Sum.elim_comp_inr (v ∘ Subtype.val) xs,\n      ← Set.inclusion_eq_id (s := (BoundedFormula.freeVarFinset φ : Set α)) Set.Subset.rfl,\n      BoundedFormula.realize_restrictFreeVar Set.Subset.rfl]"},{"tailPos":3602,"headPos":3600,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize φ (↑f ∘ v) (↑f ∘ xs) ↔ BoundedFormula.Realize φ v xs"],"goalsAfter":[],"content":"by"},{"tailPos":4635,"headPos":3600,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.10715\nQ : Type ?u.10718\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nn : ℕ\nφ : BoundedFormula L α n\nv : α → M\nxs : Fin n → M\n⊢ BoundedFormula.Realize φ (↑f ∘ v) (↑f ∘ xs) ↔ BoundedFormula.Realize φ v xs"],"goalsAfter":[],"content":"by\n  classical\n    rw [← BoundedFormula.realize_restrictFreeVar Set.Subset.rfl, Set.inclusion_eq_id, iff_eq_eq]\n    have h :=\n      f.map_formula' ((φ.restrictFreeVar id).toFormula.relabel (Fintype.equivFin _))\n        (Sum.elim (v ∘ (↑)) xs ∘ (Fintype.equivFin _).symm)\n    simp only [Formula.realize_relabel, BoundedFormula.realize_toFormula, iff_eq_eq] at h\n    rw [← Function.comp.assoc _ _ (Fintype.equivFin _).symm,\n      Function.comp.assoc _ (Fintype.equivFin _).symm (Fintype.equivFin _), Equiv.symm_comp_self,\n      Function.comp.right_id, Function.comp.assoc, Sum.elim_comp_inl,\n      Function.comp.assoc _ _ Sum.inr, Sum.elim_comp_inr, ← Function.comp.assoc] at h\n    refine' h.trans _\n    erw [Function.comp.assoc _ _ (Fintype.equivFin _), Equiv.symm_comp_self, Function.comp.right_id,\n      Sum.elim_comp_inl, Sum.elim_comp_inr (v ∘ Subtype.val) xs,\n      ← Set.inclusion_eq_id (s := (BoundedFormula.freeVarFinset φ : Set α)) Set.Subset.rfl,\n      BoundedFormula.realize_restrictFreeVar Set.Subset.rfl]"},{"tailPos":4934,"headPos":4918,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.238691\nQ : Type ?u.238694\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nφ : Formula L α\nx : α → M\n⊢ Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.238691\nQ : Type ?u.238694\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nφ : Formula L α\nx : α → M\n⊢ BoundedFormula.Realize φ (↑f ∘ x) default ↔ Formula.Realize φ x"],"content":"Formula.Realize,"},{"tailPos":4951,"headPos":4935,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.238691\nQ : Type ?u.238694\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nφ : Formula L α\nx : α → M\n⊢ BoundedFormula.Realize φ (↑f ∘ x) default ↔ Formula.Realize φ x"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.238691\nQ : Type ?u.238694\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nφ : Formula L α\nx : α → M\n⊢ BoundedFormula.Realize φ (↑f ∘ x) default ↔ BoundedFormula.Realize φ x default"],"content":"Formula.Realize,"},{"tailPos":4977,"headPos":4952,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.238691\nQ : Type ?u.238694\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nφ : Formula L α\nx : α → M\n⊢ BoundedFormula.Realize φ (↑f ∘ x) default ↔ BoundedFormula.Realize φ x default"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.238691\nQ : Type ?u.238694\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nφ : Formula L α\nx : α → M\n⊢ BoundedFormula.Realize φ (↑f ∘ x) default ↔ BoundedFormula.Realize φ (↑f ∘ x) (↑f ∘ default)"],"content":"← f.map_boundedFormula,"},{"tailPos":5011,"headPos":4978,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.238691\nQ : Type ?u.238694\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nφ : Formula L α\nx : α → M\n⊢ BoundedFormula.Realize φ (↑f ∘ x) default ↔ BoundedFormula.Realize φ (↑f ∘ x) (↑f ∘ default)"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.238691\nQ : Type ?u.238694\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nφ : Formula L α\nx : α → M\n⊢ BoundedFormula.Realize φ (↑f ∘ x) default ↔ BoundedFormula.Realize φ (↑f ∘ x) default"],"content":"Unique.eq_default (f ∘ default)"},{"tailPos":5012,"headPos":5011,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.238691\nQ : Type ?u.238694\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nφ : Formula L α\nx : α → M\n⊢ BoundedFormula.Realize φ (↑f ∘ x) default ↔ BoundedFormula.Realize φ (↑f ∘ x) default"],"goalsAfter":[],"content":"]"},{"tailPos":5012,"headPos":4914,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.238691\nQ : Type ?u.238694\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nφ : Formula L α\nx : α → M\n⊢ Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"rw [Formula.Realize, Formula.Realize, ← f.map_boundedFormula, Unique.eq_default (f ∘ default)]"},{"tailPos":4911,"headPos":4909,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.238691\nQ : Type ?u.238694\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nφ : Formula L α\nx : α → M\n⊢ Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"by"},{"tailPos":5012,"headPos":4909,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.238691\nQ : Type ?u.238694\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nα : Type u_5\nφ : Formula L α\nx : α → M\n⊢ Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"by\n  rw [Formula.Realize, Formula.Realize, ← f.map_boundedFormula, Unique.eq_default (f ∘ default)]"},{"tailPos":5239,"headPos":5222,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.239981\nQ : Type ?u.239984\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nφ : Sentence L\n⊢ M ⊨ φ ↔ N ⊨ φ"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.239981\nQ : Type ?u.239984\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nφ : Sentence L\n⊢ Formula.Realize φ default ↔ N ⊨ φ"],"content":"Sentence.Realize,"},{"tailPos":5257,"headPos":5240,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.239981\nQ : Type ?u.239984\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nφ : Sentence L\n⊢ Formula.Realize φ default ↔ N ⊨ φ"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.239981\nQ : Type ?u.239984\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nφ : Sentence L\n⊢ Formula.Realize φ default ↔ Formula.Realize φ default"],"content":"Sentence.Realize,"},{"tailPos":5276,"headPos":5258,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.239981\nQ : Type ?u.239984\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nφ : Sentence L\n⊢ Formula.Realize φ default ↔ Formula.Realize φ default"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.239981\nQ : Type ?u.239984\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nφ : Sentence L\n⊢ Formula.Realize φ (↑f ∘ default) ↔ Formula.Realize φ default"],"content":"← f.map_formula,"},{"tailPos":5310,"headPos":5277,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.239981\nQ : Type ?u.239984\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nφ : Sentence L\n⊢ Formula.Realize φ (↑f ∘ default) ↔ Formula.Realize φ default"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.239981\nQ : Type ?u.239984\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nφ : Sentence L\n⊢ Formula.Realize φ default ↔ Formula.Realize φ default"],"content":"Unique.eq_default (f ∘ default)"},{"tailPos":5311,"headPos":5310,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.239981\nQ : Type ?u.239984\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nφ : Sentence L\n⊢ Formula.Realize φ default ↔ Formula.Realize φ default"],"goalsAfter":[],"content":"]"},{"tailPos":5311,"headPos":5218,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.239981\nQ : Type ?u.239984\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nφ : Sentence L\n⊢ M ⊨ φ ↔ N ⊨ φ"],"goalsAfter":[],"content":"rw [Sentence.Realize, Sentence.Realize, ← f.map_formula, Unique.eq_default (f ∘ default)]"},{"tailPos":5215,"headPos":5213,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.239981\nQ : Type ?u.239984\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nφ : Sentence L\n⊢ M ⊨ φ ↔ N ⊨ φ"],"goalsAfter":[],"content":"by"},{"tailPos":5311,"headPos":5213,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.239981\nQ : Type ?u.239984\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nφ : Sentence L\n⊢ M ⊨ φ ↔ N ⊨ φ"],"goalsAfter":[],"content":"by\n  rw [Sentence.Realize, Sentence.Realize, ← f.map_formula, Unique.eq_default (f ∘ default)]"},{"tailPos":5562,"headPos":5518,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.262800\nQ : Type ?u.262803\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nT : Theory L\n⊢ M ⊨ T ↔ N ⊨ T"],"goalsAfter":[],"content":"simp only [Theory.model_iff, f.map_sentence]"},{"tailPos":5515,"headPos":5513,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.262800\nQ : Type ?u.262803\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nT : Theory L\n⊢ M ⊨ T ↔ N ⊨ T"],"goalsAfter":[],"content":"by"},{"tailPos":5562,"headPos":5513,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.262800\nQ : Type ?u.262803\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nT : Theory L\n⊢ M ⊨ T ↔ N ⊨ T"],"goalsAfter":[],"content":"by\n  simp only [Theory.model_iff, f.map_sentence]"},{"tailPos":6067,"headPos":6058,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\n⊢ Function.Injective ↑φ"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\n⊢ ↑φ x = ↑φ y → x = y"],"content":"intro x y"},{"tailPos":6174,"headPos":6070,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\n⊢ ↑φ x = ↑φ y → x = y"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\nh :\n  Formula.Realize (Term.equal (var 0) (var 1)) (↑φ ∘ fun i => if i = 0 then x else y) ↔\n    Formula.Realize (Term.equal (var 0) (var 1)) fun i => if i = 0 then x else y\n⊢ ↑φ x = ↑φ y → x = y"],"content":"have h :=\n    φ.map_formula ((var 0).equal (var 1) : L.Formula (Fin 2)) fun i => if i = 0 then x else y"},{"tailPos":6203,"headPos":6181,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\nh :\n  Formula.Realize (Term.equal (var 0) (var 1)) (↑φ ∘ fun i => if i = 0 then x else y) ↔\n    Formula.Realize (Term.equal (var 0) (var 1)) fun i => if i = 0 then x else y\n⊢ ↑φ x = ↑φ y → x = y"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\nh :\n  Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 0) =\n      Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 1) ↔\n    Formula.Realize (Term.equal (var 0) (var 1)) fun i => if i = 0 then x else y\n⊢ ↑φ x = ↑φ y → x = y"],"content":"Formula.realize_equal,"},{"tailPos":6225,"headPos":6204,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\nh :\n  Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 0) =\n      Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 1) ↔\n    Formula.Realize (Term.equal (var 0) (var 1)) fun i => if i = 0 then x else y\n⊢ ↑φ x = ↑φ y → x = y"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\nh :\n  Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 0) =\n      Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 1) ↔\n    Term.realize (fun i => if i = 0 then x else y) (var 0) = Term.realize (fun i => if i = 0 then x else y) (var 1)\n⊢ ↑φ x = ↑φ y → x = y"],"content":"Formula.realize_equal"},{"tailPos":6226,"headPos":6225,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\nh :\n  Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 0) =\n      Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 1) ↔\n    Term.realize (fun i => if i = 0 then x else y) (var 0) = Term.realize (fun i => if i = 0 then x else y) (var 1)\n⊢ ↑φ x = ↑φ y → x = y"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\nh :\n  Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 0) =\n      Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 1) ↔\n    Term.realize (fun i => if i = 0 then x else y) (var 0) = Term.realize (fun i => if i = 0 then x else y) (var 1)\n⊢ ↑φ x = ↑φ y → x = y"],"content":"]"},{"tailPos":6231,"headPos":6177,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\nh :\n  Formula.Realize (Term.equal (var 0) (var 1)) (↑φ ∘ fun i => if i = 0 then x else y) ↔\n    Formula.Realize (Term.equal (var 0) (var 1)) fun i => if i = 0 then x else y\n⊢ ↑φ x = ↑φ y → x = y"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\nh :\n  Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 0) =\n      Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 1) ↔\n    Term.realize (fun i => if i = 0 then x else y) (var 0) = Term.realize (fun i => if i = 0 then x else y) (var 1)\n⊢ ↑φ x = ↑φ y → x = y"],"content":"rw [Formula.realize_equal, Formula.realize_equal] at h"},{"tailPos":6363,"headPos":6234,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\nh :\n  Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 0) =\n      Term.realize (↑φ ∘ fun i => if i = 0 then x else y) (var 1) ↔\n    Term.realize (fun i => if i = 0 then x else y) (var 0) = Term.realize (fun i => if i = 0 then x else y) (var 1)\n⊢ ↑φ x = ↑φ y → x = y"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\nh : ↑φ x = ↑φ y ↔ x = y\n⊢ ↑φ x = ↑φ y → x = y"],"content":"simp only [Nat.one_ne_zero, Term.realize, Fin.one_eq_zero_iff, if_true, eq_self_iff_true,\n    Function.comp_apply, if_false] at h"},{"tailPos":6375,"headPos":6366,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nx y : M\nh : ↑φ x = ↑φ y ↔ x = y\n⊢ ↑φ x = ↑φ y → x = y"],"goalsAfter":[],"content":"exact h.1"},{"tailPos":6375,"headPos":6058,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\n⊢ Function.Injective ↑φ"],"goalsAfter":[],"content":"intro x y\n  have h :=\n    φ.map_formula ((var 0).equal (var 1) : L.Formula (Fin 2)) fun i => if i = 0 then x else y\n  rw [Formula.realize_equal, Formula.realize_equal] at h\n  simp only [Nat.one_ne_zero, Term.realize, Fin.one_eq_zero_iff, if_true, eq_self_iff_true,\n    Function.comp_apply, if_false] at h\n  exact h.1"},{"tailPos":6055,"headPos":6053,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\n⊢ Function.Injective ↑φ"],"goalsAfter":[],"content":"by"},{"tailPos":6375,"headPos":6053,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.306353\nQ : Type ?u.306356\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\n⊢ Function.Injective ↑φ"],"goalsAfter":[],"content":"by\n  intro x y\n  have h :=\n    φ.map_formula ((var 0).equal (var 1) : L.Formula (Fin 2)) fun i => if i = 0 then x else y\n  rw [Formula.realize_equal, Formula.realize_equal] at h\n  simp only [Nat.one_ne_zero, Term.realize, Fin.one_eq_zero_iff, if_true, eq_self_iff_true,\n    Function.comp_apply, if_false] at h\n  exact h.1"},{"tailPos":6976,"headPos":6908,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh :\n  Formula.Realize (Formula.graph f) (↑φ ∘ Fin.cons (funMap f x) x) ↔\n    Formula.Realize (Formula.graph f) (Fin.cons (funMap f x) x)\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"content":"have h := φ.map_formula (Formula.graph f) (Fin.cons (funMap f x) x)"},{"tailPos":7005,"headPos":6983,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh :\n  Formula.Realize (Formula.graph f) (↑φ ∘ Fin.cons (funMap f x) x) ↔\n    Formula.Realize (Formula.graph f) (Fin.cons (funMap f x) x)\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : Formula.Realize (Formula.graph f) (↑φ ∘ Fin.cons (funMap f x) x) ↔ funMap f x = funMap f x\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"content":"Formula.realize_graph,"},{"tailPos":7020,"headPos":7006,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : Formula.Realize (Formula.graph f) (↑φ ∘ Fin.cons (funMap f x) x) ↔ funMap f x = funMap f x\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : Formula.Realize (Formula.graph f) (Fin.cons (↑φ (funMap f x)) (↑φ ∘ x)) ↔ funMap f x = funMap f x\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"content":"Fin.comp_cons,"},{"tailPos":7042,"headPos":7021,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : Formula.Realize (Formula.graph f) (Fin.cons (↑φ (funMap f x)) (↑φ ∘ x)) ↔ funMap f x = funMap f x\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : funMap f (↑φ ∘ x) = ↑φ (funMap f x) ↔ funMap f x = funMap f x\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"content":"Formula.realize_graph"},{"tailPos":7043,"headPos":7042,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : funMap f (↑φ ∘ x) = ↑φ (funMap f x) ↔ funMap f x = funMap f x\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : funMap f (↑φ ∘ x) = ↑φ (funMap f x) ↔ funMap f x = funMap f x\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"content":"]"},{"tailPos":7048,"headPos":6979,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh :\n  Formula.Realize (Formula.graph f) (↑φ ∘ Fin.cons (funMap f x) x) ↔\n    Formula.Realize (Formula.graph f) (Fin.cons (funMap f x) x)\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : funMap f (↑φ ∘ x) = ↑φ (funMap f x) ↔ funMap f x = funMap f x\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"content":"rw [Formula.realize_graph, Fin.comp_cons, Formula.realize_graph] at h"},{"tailPos":7063,"headPos":7055,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : funMap f (↑φ ∘ x) = ↑φ (funMap f x) ↔ funMap f x = funMap f x\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : funMap f (↑φ ∘ x) = ↑φ (funMap f x) ↔ funMap f x = funMap f x\n⊢ funMap f (↑φ ∘ x) = ↑φ (funMap f x)"],"content":"eq_comm,"},{"tailPos":7065,"headPos":7064,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : funMap f (↑φ ∘ x) = ↑φ (funMap f x) ↔ funMap f x = funMap f x\n⊢ funMap f (↑φ ∘ x) = ↑φ (funMap f x)"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : funMap f (↑φ ∘ x) = ↑φ (funMap f x) ↔ funMap f x = funMap f x\n⊢ funMap f x = funMap f x"],"content":"h"},{"tailPos":7066,"headPos":7065,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : funMap f (↑φ ∘ x) = ↑φ (funMap f x) ↔ funMap f x = funMap f x\n⊢ funMap f x = funMap f x"],"goalsAfter":[],"content":"]"},{"tailPos":7066,"headPos":7051,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\nh : funMap f (↑φ ∘ x) = ↑φ (funMap f x) ↔ funMap f x = funMap f x\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"goalsAfter":[],"content":"rw [eq_comm, h]"},{"tailPos":7066,"headPos":6908,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"goalsAfter":[],"content":"have h := φ.map_formula (Formula.graph f) (Fin.cons (funMap f x) x)\n  rw [Formula.realize_graph, Fin.comp_cons, Formula.realize_graph] at h\n  rw [eq_comm, h]"},{"tailPos":6905,"headPos":6903,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"goalsAfter":[],"content":"by"},{"tailPos":7066,"headPos":6903,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.308452\nQ : Type ?u.308455\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nφ : M ↪ₑ[L] N\nn : ℕ\nf : Functions L n\nx : Fin n → M\n⊢ ↑φ (funMap f x) = funMap f (↑φ ∘ x)"],"goalsAfter":[],"content":"by\n  have h := φ.map_formula (Formula.graph f) (Fin.cons (funMap f x) x)\n  rw [Formula.realize_graph, Fin.comp_cons, Formula.realize_graph] at h\n  rw [eq_comm, h]"},{"tailPos":8114,"headPos":8109,"goalsBefore":["L : Language\nM : Type ?u.310719\nN : Type ?u.310722\nP : Type ?u.310725\nQ : Type ?u.310728\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf✝ : M ↪ₑ[L] N\nx✝ : ℕ\nf : Functions L x✝\nx : Fin x✝ → M\n⊢ Function.Embedding.toFun { toFun := ↑f✝, inj' := (_ : Function.Injective ↑f✝) } (funMap f x) =\n    funMap f ({ toFun := ↑f✝, inj' := (_ : Function.Injective ↑f✝) }.toFun ∘ x)"],"goalsAfter":[],"content":"aesop"},{"tailPos":8108,"headPos":8106,"goalsBefore":["L : Language\nM : Type ?u.310719\nN : Type ?u.310722\nP : Type ?u.310725\nQ : Type ?u.310728\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf✝ : M ↪ₑ[L] N\nx✝ : ℕ\nf : Functions L x✝\nx : Fin x✝ → M\n⊢ Function.Embedding.toFun { toFun := ↑f✝, inj' := (_ : Function.Injective ↑f✝) } (funMap f x) =\n    funMap f ({ toFun := ↑f✝, inj' := (_ : Function.Injective ↑f✝) }.toFun ∘ x)"],"goalsAfter":[],"content":"by"},{"tailPos":8114,"headPos":8106,"goalsBefore":["L : Language\nM : Type ?u.310719\nN : Type ?u.310722\nP : Type ?u.310725\nQ : Type ?u.310728\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf✝ : M ↪ₑ[L] N\nx✝ : ℕ\nf : Functions L x✝\nx : Fin x✝ → M\n⊢ Function.Embedding.toFun { toFun := ↑f✝, inj' := (_ : Function.Injective ↑f✝) } (funMap f x) =\n    funMap f ({ toFun := ↑f✝, inj' := (_ : Function.Injective ↑f✝) }.toFun ∘ x)"],"goalsAfter":[],"content":"by aesop"},{"tailPos":8145,"headPos":8140,"goalsBefore":["L : Language\nM : Type ?u.310719\nN : Type ?u.310722\nP : Type ?u.310725\nQ : Type ?u.310728\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nx✝ : ℕ\nR : Relations L x✝\nx : Fin x✝ → M\n⊢ RelMap R ({ toFun := ↑f, inj' := (_ : Function.Injective ↑f) }.toFun ∘ x) ↔ RelMap R x"],"goalsAfter":[],"content":"aesop"},{"tailPos":8139,"headPos":8137,"goalsBefore":["L : Language\nM : Type ?u.310719\nN : Type ?u.310722\nP : Type ?u.310725\nQ : Type ?u.310728\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nx✝ : ℕ\nR : Relations L x✝\nx : Fin x✝ → M\n⊢ RelMap R ({ toFun := ↑f, inj' := (_ : Function.Injective ↑f) }.toFun ∘ x) ↔ RelMap R x"],"goalsAfter":[],"content":"by"},{"tailPos":8145,"headPos":8137,"goalsBefore":["L : Language\nM : Type ?u.310719\nN : Type ?u.310722\nP : Type ?u.310725\nQ : Type ?u.310728\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nx✝ : ℕ\nR : Relations L x✝\nx : Fin x✝ → M\n⊢ RelMap R ({ toFun := ↑f, inj' := (_ : Function.Injective ↑f) }.toFun ∘ x) ↔ RelMap R x"],"goalsAfter":[],"content":"by aesop"},{"tailPos":8420,"headPos":8415,"goalsBefore":["L : Language\nM : Type ?u.312084\nN : Type ?u.312087\nP : Type ?u.312090\nQ : Type ?u.312093\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf✝ : M ↪ₑ[L] N\nx✝ : ℕ\nf : Functions L x✝\nx : Fin x✝ → M\n⊢ ↑f✝ (funMap f x) = funMap f (↑f✝ ∘ x)"],"goalsAfter":[],"content":"aesop"},{"tailPos":8414,"headPos":8412,"goalsBefore":["L : Language\nM : Type ?u.312084\nN : Type ?u.312087\nP : Type ?u.312090\nQ : Type ?u.312093\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf✝ : M ↪ₑ[L] N\nx✝ : ℕ\nf : Functions L x✝\nx : Fin x✝ → M\n⊢ ↑f✝ (funMap f x) = funMap f (↑f✝ ∘ x)"],"goalsAfter":[],"content":"by"},{"tailPos":8420,"headPos":8412,"goalsBefore":["L : Language\nM : Type ?u.312084\nN : Type ?u.312087\nP : Type ?u.312090\nQ : Type ?u.312093\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf✝ : M ↪ₑ[L] N\nx✝ : ℕ\nf : Functions L x✝\nx : Fin x✝ → M\n⊢ ↑f✝ (funMap f x) = funMap f (↑f✝ ∘ x)"],"goalsAfter":[],"content":"by aesop"},{"tailPos":8451,"headPos":8446,"goalsBefore":["L : Language\nM : Type ?u.312084\nN : Type ?u.312087\nP : Type ?u.312090\nQ : Type ?u.312093\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nx✝ : ℕ\nR : Relations L x✝\nx : Fin x✝ → M\n⊢ RelMap R x → RelMap R (↑f ∘ x)"],"goalsAfter":[],"content":"aesop"},{"tailPos":8445,"headPos":8443,"goalsBefore":["L : Language\nM : Type ?u.312084\nN : Type ?u.312087\nP : Type ?u.312090\nQ : Type ?u.312093\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nx✝ : ℕ\nR : Relations L x✝\nx : Fin x✝ → M\n⊢ RelMap R x → RelMap R (↑f ∘ x)"],"goalsAfter":[],"content":"by"},{"tailPos":8451,"headPos":8443,"goalsBefore":["L : Language\nM : Type ?u.312084\nN : Type ?u.312087\nP : Type ?u.312090\nQ : Type ?u.312093\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪ₑ[L] N\nx✝ : ℕ\nR : Relations L x✝\nx : Fin x✝ → M\n⊢ RelMap R x → RelMap R (↑f ∘ x)"],"goalsAfter":[],"content":"by aesop"},{"tailPos":10513,"headPos":10491,"goalsBefore":["L : Language\nM : Type ?u.326690\nN : Type ?u.326693\nP : Type ?u.326696\nQ : Type ?u.326699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nhnp : N ↪ₑ[L] P\nhmn : M ↪ₑ[L] N\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((↑hnp ∘ ↑hmn) ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":["case mk\nL : Language\nM : Type ?u.326690\nN : Type ?u.326693\nP : Type ?u.326696\nQ : Type ?u.326699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nhmn : M ↪ₑ[L] N\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\ntoFun✝ : N → P\nhhnp : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → N), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\n⊢ Formula.Realize φ ((↑(mk toFun✝) ∘ ↑hmn) ∘ x) ↔ Formula.Realize φ x"],"content":"cases' hnp with _ hhnp"},{"tailPos":10540,"headPos":10518,"goalsBefore":["case mk\nL : Language\nM : Type ?u.326690\nN : Type ?u.326693\nP : Type ?u.326696\nQ : Type ?u.326699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nhmn : M ↪ₑ[L] N\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\ntoFun✝ : N → P\nhhnp : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → N), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\n⊢ Formula.Realize φ ((↑(mk toFun✝) ∘ ↑hmn) ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":["case mk.mk\nL : Language\nM : Type ?u.326690\nN : Type ?u.326693\nP : Type ?u.326696\nQ : Type ?u.326699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\ntoFun✝¹ : N → P\nhhnp : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → N), Formula.Realize φ (toFun✝¹ ∘ x) ↔ Formula.Realize φ x\ntoFun✝ : M → N\nhhmn : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\n⊢ Formula.Realize φ ((↑(mk toFun✝¹) ∘ ↑(mk toFun✝)) ∘ x) ↔ Formula.Realize φ x"],"content":"cases' hmn with _ hhmn"},{"tailPos":10555,"headPos":10550,"goalsBefore":["case mk.mk\nL : Language\nM : Type ?u.326690\nN : Type ?u.326693\nP : Type ?u.326696\nQ : Type ?u.326699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\ntoFun✝¹ : N → P\nhhnp : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → N), Formula.Realize φ (toFun✝¹ ∘ x) ↔ Formula.Realize φ x\ntoFun✝ : M → N\nhhmn : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\n⊢ Formula.Realize φ ((↑(mk toFun✝¹) ∘ ↑(mk toFun✝)) ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":["case mk.mk\nL : Language\nM : Type ?u.326690\nN : Type ?u.326693\nP : Type ?u.326696\nQ : Type ?u.326699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\ntoFun✝¹ : N → P\nhhnp : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → N), Formula.Realize φ (toFun✝¹ ∘ x) ↔ Formula.Realize φ x\ntoFun✝ : M → N\nhhmn : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\n⊢ (Formula.Realize φ fun x_1 => ↑(mk toFun✝) (x x_1)) ↔ Formula.Realize φ x"],"content":"hhnp,"},{"tailPos":10560,"headPos":10556,"goalsBefore":["case mk.mk\nL : Language\nM : Type ?u.326690\nN : Type ?u.326693\nP : Type ?u.326696\nQ : Type ?u.326699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\ntoFun✝¹ : N → P\nhhnp : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → N), Formula.Realize φ (toFun✝¹ ∘ x) ↔ Formula.Realize φ x\ntoFun✝ : M → N\nhhmn : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\n⊢ (Formula.Realize φ fun x_1 => ↑(mk toFun✝) (x x_1)) ↔ Formula.Realize φ x"],"goalsAfter":["case mk.mk\nL : Language\nM : Type ?u.326690\nN : Type ?u.326693\nP : Type ?u.326696\nQ : Type ?u.326699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\ntoFun✝¹ : N → P\nhhnp : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → N), Formula.Realize φ (toFun✝¹ ∘ x) ↔ Formula.Realize φ x\ntoFun✝ : M → N\nhhmn : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\n⊢ (Formula.Realize φ fun x_1 => x x_1) ↔ Formula.Realize φ x"],"content":"hhmn"},{"tailPos":10561,"headPos":10560,"goalsBefore":["case mk.mk\nL : Language\nM : Type ?u.326690\nN : Type ?u.326693\nP : Type ?u.326696\nQ : Type ?u.326699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\ntoFun✝¹ : N → P\nhhnp : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → N), Formula.Realize φ (toFun✝¹ ∘ x) ↔ Formula.Realize φ x\ntoFun✝ : M → N\nhhmn : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\n⊢ (Formula.Realize φ fun x_1 => x x_1) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"]"},{"tailPos":10561,"headPos":10545,"goalsBefore":["case mk.mk\nL : Language\nM : Type ?u.326690\nN : Type ?u.326693\nP : Type ?u.326696\nQ : Type ?u.326699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\ntoFun✝¹ : N → P\nhhnp : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → N), Formula.Realize φ (toFun✝¹ ∘ x) ↔ Formula.Realize φ x\ntoFun✝ : M → N\nhhmn : ∀ ⦃n : ℕ⦄ (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (toFun✝ ∘ x) ↔ Formula.Realize φ x\n⊢ Formula.Realize φ ((↑(mk toFun✝¹) ∘ ↑(mk toFun✝)) ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"erw [hhnp, hhmn]"},{"tailPos":10561,"headPos":10491,"goalsBefore":["L : Language\nM : Type ?u.326690\nN : Type ?u.326693\nP : Type ?u.326696\nQ : Type ?u.326699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nhnp : N ↪ₑ[L] P\nhmn : M ↪ₑ[L] N\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((↑hnp ∘ ↑hmn) ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"cases' hnp with _ hhnp\n    cases' hmn with _ hhmn\n    erw [hhnp, hhmn]"},{"tailPos":10486,"headPos":10484,"goalsBefore":["L : Language\nM : Type ?u.326690\nN : Type ?u.326693\nP : Type ?u.326696\nQ : Type ?u.326699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nhnp : N ↪ₑ[L] P\nhmn : M ↪ₑ[L] N\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((↑hnp ∘ ↑hmn) ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"by"},{"tailPos":10561,"headPos":10484,"goalsBefore":["L : Language\nM : Type ?u.326690\nN : Type ?u.326693\nP : Type ?u.326696\nQ : Type ?u.326699\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nhnp : N ↪ₑ[L] P\nhmn : M ↪ₑ[L] N\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((↑hnp ∘ ↑hmn) ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"by\n    cases' hnp with _ hhnp\n    cases' hmn with _ hhmn\n    erw [hhnp, hhmn]"},{"tailPos":12097,"headPos":11873,"goalsBefore":["L : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    N ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x))","case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ M ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) ↔\n    Formula.Realize φ x"],"content":"refine'\n      _root_.trans _\n        ((realize_iff_of_model_completeTheory M N\n              (((L.lhomWithConstants M).onBoundedFormula φ).subst\n                  (Constants.term ∘ Sum.inr ∘ x)).alls).trans\n          _)"},{"tailPos":12104,"headPos":12102,"goalsBefore":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    N ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x))","case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ M ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) ↔\n    Formula.Realize φ x"],"goalsAfter":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    N ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x))"],"content":"·"},{"tailPos":12114,"headPos":12105,"goalsBefore":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    N ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x))"],"goalsAfter":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    N ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x))"],"content":"simp_rw ["},{"tailPos":12131,"headPos":12114,"goalsBefore":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    N ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x))"],"goalsAfter":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    Formula.Realize\n      (BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)))\n      default"],"content":"Sentence.Realize,"},{"tailPos":12160,"headPos":12132,"goalsBefore":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    Formula.Realize\n      (BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)))\n      default"],"goalsAfter":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    ∀ (xs : Fin 0 → N),\n      BoundedFormula.Realize\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) default\n        xs"],"content":"BoundedFormula.realize_alls,"},{"tailPos":12190,"headPos":12161,"goalsBefore":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    ∀ (xs : Fin 0 → N),\n      BoundedFormula.Realize\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) default\n        xs"],"goalsAfter":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    ∀ (xs : Fin 0 → N),\n      BoundedFormula.Realize (LHom.onBoundedFormula (lhomWithConstants L M) φ)\n        (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) xs"],"content":"BoundedFormula.realize_subst,"},{"tailPos":12229,"headPos":12199,"goalsBefore":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    ∀ (xs : Fin 0 → N),\n      BoundedFormula.Realize (LHom.onBoundedFormula (lhomWithConstants L M) φ)\n        (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) xs"],"goalsAfter":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    ∀ (xs : Fin 0 → N), BoundedFormula.Realize φ (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) xs"],"content":"LHom.realize_onBoundedFormula,"},{"tailPos":12246,"headPos":12230,"goalsBefore":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    ∀ (xs : Fin 0 → N), BoundedFormula.Realize φ (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) xs"],"goalsAfter":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ BoundedFormula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) default ↔\n    ∀ (xs : Fin 0 → N), BoundedFormula.Realize φ (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) xs"],"content":"Formula.Realize,"},{"tailPos":12265,"headPos":12247,"goalsBefore":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ BoundedFormula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) default ↔\n    ∀ (xs : Fin 0 → N), BoundedFormula.Realize φ (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) xs"],"goalsAfter":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ BoundedFormula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) default ↔\n    BoundedFormula.Realize φ (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) default"],"content":"Unique.forall_iff,"},{"tailPos":12280,"headPos":12266,"goalsBefore":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ BoundedFormula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) default ↔\n    BoundedFormula.Realize φ (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) default"],"goalsAfter":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ BoundedFormula.Realize φ (fun x_1 => ↑(Sum.inr (x x_1))) default ↔\n    BoundedFormula.Realize φ (fun a => Term.realize default (Constants.term (Sum.inr (x a)))) default"],"content":"Function.comp,"},{"tailPos":12311,"headPos":12289,"goalsBefore":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ BoundedFormula.Realize φ (fun x_1 => ↑(Sum.inr (x x_1))) default ↔\n    BoundedFormula.Realize φ (fun a => Term.realize default (Constants.term (Sum.inr (x a)))) default"],"goalsAfter":[],"content":"simp only [Term.realize_constants]"},{"tailPos":12312,"headPos":12105,"goalsBefore":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    N ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x))"],"goalsAfter":[],"content":"simp_rw [Sentence.Realize, BoundedFormula.realize_alls, BoundedFormula.realize_subst,\n        LHom.realize_onBoundedFormula, Formula.Realize, Unique.forall_iff, Function.comp,\n        Term.realize_constants]"},{"tailPos":12312,"headPos":12102,"goalsBefore":["case refine'_1\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔\n    N ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x))","case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ M ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) ↔\n    Formula.Realize φ x"],"goalsAfter":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ M ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) ↔\n    Formula.Realize φ x"],"content":"· simp_rw [Sentence.Realize, BoundedFormula.realize_alls, BoundedFormula.realize_subst,\n        LHom.realize_onBoundedFormula, Formula.Realize, Unique.forall_iff, Function.comp,\n        Term.realize_constants]"},{"tailPos":12319,"headPos":12317,"goalsBefore":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ M ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) ↔\n    Formula.Realize φ x"],"goalsAfter":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ M ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) ↔\n    Formula.Realize φ x"],"content":"·"},{"tailPos":12329,"headPos":12320,"goalsBefore":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ M ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) ↔\n    Formula.Realize φ x"],"goalsAfter":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ M ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) ↔\n    Formula.Realize φ x"],"content":"simp_rw ["},{"tailPos":12346,"headPos":12329,"goalsBefore":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ M ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) ↔\n    Formula.Realize φ x"],"goalsAfter":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize\n      (BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)))\n      default ↔\n    Formula.Realize φ x"],"content":"Sentence.Realize,"},{"tailPos":12375,"headPos":12347,"goalsBefore":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize\n      (BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)))\n      default ↔\n    Formula.Realize φ x"],"goalsAfter":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ (∀ (xs : Fin 0 → M),\n      BoundedFormula.Realize\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) default\n        xs) ↔\n    Formula.Realize φ x"],"content":"BoundedFormula.realize_alls,"},{"tailPos":12405,"headPos":12376,"goalsBefore":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ (∀ (xs : Fin 0 → M),\n      BoundedFormula.Realize\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) default\n        xs) ↔\n    Formula.Realize φ x"],"goalsAfter":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ (∀ (xs : Fin 0 → M),\n      BoundedFormula.Realize (LHom.onBoundedFormula (lhomWithConstants L M) φ)\n        (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) xs) ↔\n    Formula.Realize φ x"],"content":"BoundedFormula.realize_subst,"},{"tailPos":12444,"headPos":12414,"goalsBefore":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ (∀ (xs : Fin 0 → M),\n      BoundedFormula.Realize (LHom.onBoundedFormula (lhomWithConstants L M) φ)\n        (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) xs) ↔\n    Formula.Realize φ x"],"goalsAfter":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ (∀ (xs : Fin 0 → M), BoundedFormula.Realize φ (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) xs) ↔\n    Formula.Realize φ x"],"content":"LHom.realize_onBoundedFormula,"},{"tailPos":12461,"headPos":12445,"goalsBefore":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ (∀ (xs : Fin 0 → M), BoundedFormula.Realize φ (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) xs) ↔\n    Formula.Realize φ x"],"goalsAfter":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ (∀ (xs : Fin 0 → M), BoundedFormula.Realize φ (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) xs) ↔\n    BoundedFormula.Realize φ x default"],"content":"Formula.Realize,"},{"tailPos":12479,"headPos":12462,"goalsBefore":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ (∀ (xs : Fin 0 → M), BoundedFormula.Realize φ (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) xs) ↔\n    BoundedFormula.Realize φ x default"],"goalsAfter":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ BoundedFormula.Realize φ (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) default ↔\n    BoundedFormula.Realize φ x default"],"content":"simp only [Unique.forall_iff]"},{"tailPos":12480,"headPos":12320,"goalsBefore":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ M ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) ↔\n    Formula.Realize φ x"],"goalsAfter":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ BoundedFormula.Realize φ (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) default ↔\n    BoundedFormula.Realize φ x default"],"content":"simp_rw [Sentence.Realize, BoundedFormula.realize_alls, BoundedFormula.realize_subst,\n        LHom.realize_onBoundedFormula, Formula.Realize, Unique.forall_iff]"},{"tailPos":12490,"headPos":12487,"goalsBefore":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ BoundedFormula.Realize φ (fun a => Term.realize default ((Constants.term ∘ Sum.inr ∘ x) a)) default ↔\n    BoundedFormula.Realize φ x default"],"goalsAfter":[],"content":"rfl"},{"tailPos":12490,"headPos":12320,"goalsBefore":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ M ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) ↔\n    Formula.Realize φ x"],"goalsAfter":[],"content":"simp_rw [Sentence.Realize, BoundedFormula.realize_alls, BoundedFormula.realize_subst,\n        LHom.realize_onBoundedFormula, Formula.Realize, Unique.forall_iff]\n      rfl"},{"tailPos":12490,"headPos":12317,"goalsBefore":["case refine'_2\nL : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ M ⊨\n      BoundedFormula.alls\n        (BoundedFormula.subst (LHom.onBoundedFormula (lhomWithConstants L M) φ) (Constants.term ∘ Sum.inr ∘ x)) ↔\n    Formula.Realize φ x"],"goalsAfter":[],"content":"· simp_rw [Sentence.Realize, BoundedFormula.realize_alls, BoundedFormula.realize_subst,\n        LHom.realize_onBoundedFormula, Formula.Realize, Unique.forall_iff]\n      rfl"},{"tailPos":12490,"headPos":11873,"goalsBefore":["L : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"refine'\n      _root_.trans _\n        ((realize_iff_of_model_completeTheory M N\n              (((L.lhomWithConstants M).onBoundedFormula φ).subst\n                  (Constants.term ∘ Sum.inr ∘ x)).alls).trans\n          _)\n    · simp_rw [Sentence.Realize, BoundedFormula.realize_alls, BoundedFormula.realize_subst,\n        LHom.realize_onBoundedFormula, Formula.Realize, Unique.forall_iff, Function.comp,\n        Term.realize_constants]\n    · simp_rw [Sentence.Realize, BoundedFormula.realize_alls, BoundedFormula.realize_subst,\n        LHom.realize_onBoundedFormula, Formula.Realize, Unique.forall_iff]\n      rfl"},{"tailPos":11868,"headPos":11866,"goalsBefore":["L : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"by"},{"tailPos":12490,"headPos":11866,"goalsBefore":["L : Language\nM : Type ?u.328225\nN✝ : Type ?u.328228\nP : Type ?u.328231\nQ : Type ?u.328234\ninst✝⁷ : Structure L M\ninst✝⁶ : Structure L N✝\ninst✝⁵ : Structure L P\ninst✝⁴ : Structure L Q\nN : Type ?u.328265\ninst✝³ : Structure L N\ninst✝² : Structure (L[[M]]) N\ninst✝¹ : LHom.IsExpansionOn (lhomWithConstants L M) N\ninst✝ : N ⊨ elementaryDiagram L M\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ ((constantMap ∘ Sum.inr) ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"by\n    refine'\n      _root_.trans _\n        ((realize_iff_of_model_completeTheory M N\n              (((L.lhomWithConstants M).onBoundedFormula φ).subst\n                  (Constants.term ∘ Sum.inr ∘ x)).alls).trans\n          _)\n    · simp_rw [Sentence.Realize, BoundedFormula.realize_alls, BoundedFormula.realize_subst,\n        LHom.realize_onBoundedFormula, Formula.Realize, Unique.forall_iff, Function.comp,\n        Term.realize_constants]\n    · simp_rw [Sentence.Realize, BoundedFormula.realize_alls, BoundedFormula.realize_subst,\n        LHom.realize_onBoundedFormula, Formula.Realize, Unique.forall_iff]\n      rfl"},{"tailPos":13282,"headPos":13130,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\n⊢ ∀ {n : ℕ} (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nh :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty n) (xs : Fin n → M),\n    BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\n⊢ ∀ {n : ℕ} (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x","case h\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\n⊢ ∀ (n : ℕ) (φ : BoundedFormula L Empty n) (xs : Fin n → M),\n    BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs"],"content":"suffices h :\n    ∀ (n : ℕ) (φ : L.BoundedFormula Empty n) (xs : Fin n → M),\n      φ.Realize (f ∘ default) (f ∘ xs) ↔ φ.Realize default xs"},{"tailPos":13287,"headPos":13285,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nh :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty n) (xs : Fin n → M),\n    BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\n⊢ ∀ {n : ℕ} (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x","case h\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\n⊢ ∀ (n : ℕ) (φ : BoundedFormula L Empty n) (xs : Fin n → M),\n    BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nh :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty n) (xs : Fin n → M),\n    BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\n⊢ ∀ {n : ℕ} (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"content":"·"},{"tailPos":13300,"headPos":13288,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nh :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty n) (xs : Fin n → M),\n    BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\n⊢ ∀ {n : ℕ} (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nh :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty n) (xs : Fin n → M),\n    BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"content":"intro n φ x"},{"tailPos":13402,"headPos":13305,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nh :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty n) (xs : Fin n → M),\n    BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"refine' φ.realize_relabel_sum_inr.symm.trans (_root_.trans (h n _ _) φ.realize_relabel_sum_inr)"},{"tailPos":13402,"headPos":13288,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nh :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty n) (xs : Fin n → M),\n    BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\n⊢ ∀ {n : ℕ} (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"intro n φ x\n    refine' φ.realize_relabel_sum_inr.symm.trans (_root_.trans (h n _ _) φ.realize_relabel_sum_inr)"},{"tailPos":13402,"headPos":13285,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nh :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty n) (xs : Fin n → M),\n    BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\n⊢ ∀ {n : ℕ} (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x","case h\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\n⊢ ∀ (n : ℕ) (φ : BoundedFormula L Empty n) (xs : Fin n → M),\n    BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs"],"goalsAfter":["case h\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\n⊢ ∀ (n : ℕ) (φ : BoundedFormula L Empty n) (xs : Fin n → M),\n    BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs"],"content":"· intro n φ x\n    refine' φ.realize_relabel_sum_inr.symm.trans (_root_.trans (h n _ _) φ.realize_relabel_sum_inr)"},{"tailPos":13443,"headPos":13405,"goalsBefore":["case h\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\n⊢ ∀ (n : ℕ) (φ : BoundedFormula L Empty n) (xs : Fin n → M),\n    BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs"],"goalsAfter":["case h.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (xs : Fin n → M),\n    BoundedFormula.Realize BoundedFormula.falsum (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize BoundedFormula.falsum default xs","case h.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (t₁ t₂ : Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) default xs","case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n l : ℕ} (R : Relations L l) (ts : Fin l → Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.rel R ts) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.rel R ts) default xs","case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs","case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"content":"refine' fun n φ => φ.recOn _ _ _ _ _"},{"tailPos":13448,"headPos":13446,"goalsBefore":["case h.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (xs : Fin n → M),\n    BoundedFormula.Realize BoundedFormula.falsum (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize BoundedFormula.falsum default xs","case h.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (t₁ t₂ : Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) default xs","case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n l : ℕ} (R : Relations L l) (ts : Fin l → Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.rel R ts) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.rel R ts) default xs","case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs","case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"goalsAfter":["case h.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (xs : Fin n → M),\n    BoundedFormula.Realize BoundedFormula.falsum (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize BoundedFormula.falsum default xs"],"content":"·"},{"tailPos":13475,"headPos":13449,"goalsBefore":["case h.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (xs : Fin n → M),\n    BoundedFormula.Realize BoundedFormula.falsum (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize BoundedFormula.falsum default xs"],"goalsAfter":[],"content":"exact fun {_} _ => Iff.rfl"},{"tailPos":13475,"headPos":13446,"goalsBefore":["case h.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (xs : Fin n → M),\n    BoundedFormula.Realize BoundedFormula.falsum (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize BoundedFormula.falsum default xs","case h.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (t₁ t₂ : Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) default xs","case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n l : ℕ} (R : Relations L l) (ts : Fin l → Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.rel R ts) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.rel R ts) default xs","case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs","case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"goalsAfter":["case h.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (t₁ t₂ : Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) default xs","case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n l : ℕ} (R : Relations L l) (ts : Fin l → Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.rel R ts) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.rel R ts) default xs","case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs","case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"content":"· exact fun {_} _ => Iff.rfl"},{"tailPos":13480,"headPos":13478,"goalsBefore":["case h.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (t₁ t₂ : Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) default xs","case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n l : ℕ} (R : Relations L l) (ts : Fin l → Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.rel R ts) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.rel R ts) default xs","case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs","case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"goalsAfter":["case h.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (t₁ t₂ : Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) default xs"],"content":"·"},{"tailPos":13487,"headPos":13481,"goalsBefore":["case h.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (t₁ t₂ : Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) default xs"],"goalsAfter":["case h.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\nn✝ : ℕ\nt₁✝ t₂✝ : Term L (Empty ⊕ Fin n✝)\nxs✝ : Fin n✝ → M\n⊢ BoundedFormula.Realize (BoundedFormula.equal t₁✝ t₂✝) (↑f ∘ default) (↑f ∘ xs✝) ↔\n    BoundedFormula.Realize (BoundedFormula.equal t₁✝ t₂✝) default xs✝"],"content":"intros"},{"tailPos":13564,"headPos":13492,"goalsBefore":["case h.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\nn✝ : ℕ\nt₁✝ t₂✝ : Term L (Empty ⊕ Fin n✝)\nxs✝ : Fin n✝ → M\n⊢ BoundedFormula.Realize (BoundedFormula.equal t₁✝ t₂✝) (↑f ∘ default) (↑f ∘ xs✝) ↔\n    BoundedFormula.Realize (BoundedFormula.equal t₁✝ t₂✝) default xs✝"],"goalsAfter":[],"content":"simp [BoundedFormula.Realize, ← Sum.comp_elim, Embedding.realize_term]"},{"tailPos":13564,"headPos":13481,"goalsBefore":["case h.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (t₁ t₂ : Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) default xs"],"goalsAfter":[],"content":"intros\n    simp [BoundedFormula.Realize, ← Sum.comp_elim, Embedding.realize_term]"},{"tailPos":13564,"headPos":13478,"goalsBefore":["case h.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (t₁ t₂ : Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.equal t₁ t₂) default xs","case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n l : ℕ} (R : Relations L l) (ts : Fin l → Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.rel R ts) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.rel R ts) default xs","case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs","case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"goalsAfter":["case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n l : ℕ} (R : Relations L l) (ts : Fin l → Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.rel R ts) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.rel R ts) default xs","case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs","case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"content":"· intros\n    simp [BoundedFormula.Realize, ← Sum.comp_elim, Embedding.realize_term]"},{"tailPos":13569,"headPos":13567,"goalsBefore":["case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n l : ℕ} (R : Relations L l) (ts : Fin l → Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.rel R ts) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.rel R ts) default xs","case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs","case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"goalsAfter":["case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n l : ℕ} (R : Relations L l) (ts : Fin l → Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.rel R ts) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.rel R ts) default xs"],"content":"·"},{"tailPos":13576,"headPos":13570,"goalsBefore":["case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n l : ℕ} (R : Relations L l) (ts : Fin l → Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.rel R ts) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.rel R ts) default xs"],"goalsAfter":["case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\nn✝ l✝ : ℕ\nR✝ : Relations L l✝\nts✝ : Fin l✝ → Term L (Empty ⊕ Fin n✝)\nxs✝ : Fin n✝ → M\n⊢ BoundedFormula.Realize (BoundedFormula.rel R✝ ts✝) (↑f ∘ default) (↑f ∘ xs✝) ↔\n    BoundedFormula.Realize (BoundedFormula.rel R✝ ts✝) default xs✝"],"content":"intros"},{"tailPos":13653,"headPos":13581,"goalsBefore":["case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\nn✝ l✝ : ℕ\nR✝ : Relations L l✝\nts✝ : Fin l✝ → Term L (Empty ⊕ Fin n✝)\nxs✝ : Fin n✝ → M\n⊢ BoundedFormula.Realize (BoundedFormula.rel R✝ ts✝) (↑f ∘ default) (↑f ∘ xs✝) ↔\n    BoundedFormula.Realize (BoundedFormula.rel R✝ ts✝) default xs✝"],"goalsAfter":["case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\nn✝ l✝ : ℕ\nR✝ : Relations L l✝\nts✝ : Fin l✝ → Term L (Empty ⊕ Fin n✝)\nxs✝ : Fin n✝ → M\n⊢ (RelMap R✝ fun i => ↑f (Term.realize (Sum.elim default xs✝) (ts✝ i))) ↔\n    RelMap R✝ fun i => Term.realize (Sum.elim default xs✝) (ts✝ i)"],"content":"simp [BoundedFormula.Realize, ← Sum.comp_elim, Embedding.realize_term]"},{"tailPos":13672,"headPos":13663,"goalsBefore":["case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\nn✝ l✝ : ℕ\nR✝ : Relations L l✝\nts✝ : Fin l✝ → Term L (Empty ⊕ Fin n✝)\nxs✝ : Fin n✝ → M\n⊢ (RelMap R✝ fun i => ↑f (Term.realize (Sum.elim default xs✝) (ts✝ i))) ↔\n    RelMap R✝ fun i => Term.realize (Sum.elim default xs✝) (ts✝ i)"],"goalsAfter":["case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\nn✝ l✝ : ℕ\nR✝ : Relations L l✝\nts✝ : Fin l✝ → Term L (Empty ⊕ Fin n✝)\nxs✝ : Fin n✝ → M\n⊢ (RelMap R✝ fun i => Term.realize (Sum.elim default xs✝) (ts✝ i)) ↔\n    RelMap R✝ fun i => Term.realize (Sum.elim default xs✝) (ts✝ i)"],"content":"map_rel f"},{"tailPos":13673,"headPos":13672,"goalsBefore":["case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\nn✝ l✝ : ℕ\nR✝ : Relations L l✝\nts✝ : Fin l✝ → Term L (Empty ⊕ Fin n✝)\nxs✝ : Fin n✝ → M\n⊢ (RelMap R✝ fun i => Term.realize (Sum.elim default xs✝) (ts✝ i)) ↔\n    RelMap R✝ fun i => Term.realize (Sum.elim default xs✝) (ts✝ i)"],"goalsAfter":[],"content":"]"},{"tailPos":13673,"headPos":13658,"goalsBefore":["case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\nn✝ l✝ : ℕ\nR✝ : Relations L l✝\nts✝ : Fin l✝ → Term L (Empty ⊕ Fin n✝)\nxs✝ : Fin n✝ → M\n⊢ (RelMap R✝ fun i => ↑f (Term.realize (Sum.elim default xs✝) (ts✝ i))) ↔\n    RelMap R✝ fun i => Term.realize (Sum.elim default xs✝) (ts✝ i)"],"goalsAfter":[],"content":"erw [map_rel f]"},{"tailPos":13673,"headPos":13570,"goalsBefore":["case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n l : ℕ} (R : Relations L l) (ts : Fin l → Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.rel R ts) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.rel R ts) default xs"],"goalsAfter":[],"content":"intros\n    simp [BoundedFormula.Realize, ← Sum.comp_elim, Embedding.realize_term]\n    erw [map_rel f]"},{"tailPos":13673,"headPos":13567,"goalsBefore":["case h.refine'_3\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n l : ℕ} (R : Relations L l) (ts : Fin l → Term L (Empty ⊕ Fin n)) (xs : Fin n → M),\n    BoundedFormula.Realize (BoundedFormula.rel R ts) (↑f ∘ default) (↑f ∘ xs) ↔\n      BoundedFormula.Realize (BoundedFormula.rel R ts) default xs","case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs","case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"goalsAfter":["case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs","case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"content":"· intros\n    simp [BoundedFormula.Realize, ← Sum.comp_elim, Embedding.realize_term]\n    erw [map_rel f]"},{"tailPos":13678,"headPos":13676,"goalsBefore":["case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs","case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"goalsAfter":["case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs"],"content":"·"},{"tailPos":13700,"headPos":13679,"goalsBefore":["case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs"],"goalsAfter":["case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\nn✝ : ℕ\nf₁✝ f₂✝ : BoundedFormula L Empty n✝\nih1 : ∀ (xs : Fin n✝ → M), BoundedFormula.Realize f₁✝ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁✝ default xs\nih2 : ∀ (xs : Fin n✝ → M), BoundedFormula.Realize f₂✝ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂✝ default xs\nxs✝ : Fin n✝ → M\n⊢ BoundedFormula.Realize (f₁✝ ⟹ f₂✝) (↑f ∘ default) (↑f ∘ xs✝) ↔ BoundedFormula.Realize (f₁✝ ⟹ f₂✝) default xs✝"],"content":"intro _ _ _ ih1 ih2 _"},{"tailPos":13720,"headPos":13705,"goalsBefore":["case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\nn✝ : ℕ\nf₁✝ f₂✝ : BoundedFormula L Empty n✝\nih1 : ∀ (xs : Fin n✝ → M), BoundedFormula.Realize f₁✝ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁✝ default xs\nih2 : ∀ (xs : Fin n✝ → M), BoundedFormula.Realize f₂✝ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂✝ default xs\nxs✝ : Fin n✝ → M\n⊢ BoundedFormula.Realize (f₁✝ ⟹ f₂✝) (↑f ∘ default) (↑f ∘ xs✝) ↔ BoundedFormula.Realize (f₁✝ ⟹ f₂✝) default xs✝"],"goalsAfter":[],"content":"simp [ih1, ih2]"},{"tailPos":13720,"headPos":13679,"goalsBefore":["case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs"],"goalsAfter":[],"content":"intro _ _ _ ih1 ih2 _\n    simp [ih1, ih2]"},{"tailPos":13720,"headPos":13676,"goalsBefore":["case h.refine'_4\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f₁ f₂ : BoundedFormula L Empty n),\n    (∀ (xs : Fin n → M), BoundedFormula.Realize f₁ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₁ default xs) →\n      (∀ (xs : Fin n → M), BoundedFormula.Realize f₂ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f₂ default xs) →\n        ∀ (xs : Fin n → M),\n          BoundedFormula.Realize (f₁ ⟹ f₂) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (f₁ ⟹ f₂) default xs","case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"goalsAfter":["case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"content":"· intro _ _ _ ih1 ih2 _\n    simp [ih1, ih2]"},{"tailPos":13725,"headPos":13723,"goalsBefore":["case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"goalsAfter":["case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"content":"·"},{"tailPos":13742,"headPos":13726,"goalsBefore":["case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"goalsAfter":["case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ BoundedFormula.Realize (∀'φ) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'φ) default xs"],"content":"intro n φ ih xs"},{"tailPos":13785,"headPos":13747,"goalsBefore":["case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ BoundedFormula.Realize (∀'φ) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'φ) default xs"],"goalsAfter":["case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ (∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)) ↔\n    ∀ (a : M), BoundedFormula.Realize φ default (Fin.snoc xs a)"],"content":"simp only [BoundedFormula.realize_all]"},{"tailPos":13819,"headPos":13790,"goalsBefore":["case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ (∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)) ↔\n    ∀ (a : M), BoundedFormula.Realize φ default (Fin.snoc xs a)"],"goalsAfter":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ default (Fin.snoc xs a)","case h.refine'_5.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ (∀ (a : M), BoundedFormula.Realize φ default (Fin.snoc xs a)) →\n    ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"content":"refine' ⟨fun h a => _, _⟩"},{"tailPos":13826,"headPos":13824,"goalsBefore":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ default (Fin.snoc xs a)","case h.refine'_5.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ (∀ (a : M), BoundedFormula.Realize φ default (Fin.snoc xs a)) →\n    ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ default (Fin.snoc xs a)"],"content":"·"},{"tailPos":13838,"headPos":13831,"goalsBefore":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ default (Fin.snoc xs a)"],"goalsAfter":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ Fin.snoc xs a)"],"content":"← ih,"},{"tailPos":13852,"headPos":13839,"goalsBefore":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ Fin.snoc xs a)"],"goalsAfter":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) (↑f a))"],"content":"Fin.comp_snoc"},{"tailPos":13853,"headPos":13852,"goalsBefore":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) (↑f a))"],"goalsAfter":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) (↑f a))"],"content":"]"},{"tailPos":13853,"headPos":13827,"goalsBefore":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ default (Fin.snoc xs a)"],"goalsAfter":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) (↑f a))"],"content":"rw [← ih, Fin.comp_snoc]"},{"tailPos":13873,"headPos":13860,"goalsBefore":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) (↑f a))"],"goalsAfter":[],"content":"exact h (f a)"},{"tailPos":13873,"headPos":13827,"goalsBefore":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ default (Fin.snoc xs a)"],"goalsAfter":[],"content":"rw [← ih, Fin.comp_snoc]\n      exact h (f a)"},{"tailPos":13873,"headPos":13824,"goalsBefore":["case h.refine'_5.refine'_1\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\nh : ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\na : M\n⊢ BoundedFormula.Realize φ default (Fin.snoc xs a)","case h.refine'_5.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ (∀ (a : M), BoundedFormula.Realize φ default (Fin.snoc xs a)) →\n    ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":["case h.refine'_5.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ (∀ (a : M), BoundedFormula.Realize φ default (Fin.snoc xs a)) →\n    ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"content":"· rw [← ih, Fin.comp_snoc]\n      exact h (f a)"},{"tailPos":13880,"headPos":13878,"goalsBefore":["case h.refine'_5.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ (∀ (a : M), BoundedFormula.Realize φ default (Fin.snoc xs a)) →\n    ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":["case h.refine'_5.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ (∀ (a : M), BoundedFormula.Realize φ default (Fin.snoc xs a)) →\n    ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"content":"·"},{"tailPos":13892,"headPos":13881,"goalsBefore":["case h.refine'_5.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ (∀ (a : M), BoundedFormula.Realize φ default (Fin.snoc xs a)) →\n    ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":["case h.refine'_5.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ (∃ a, ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)) →\n    ∃ a, ¬BoundedFormula.Realize φ default (Fin.snoc xs a)"],"content":"contrapose!"},{"tailPos":13917,"headPos":13899,"goalsBefore":["case h.refine'_5.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ (∃ a, ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)) →\n    ∃ a, ¬BoundedFormula.Realize φ default (Fin.snoc xs a)"],"goalsAfter":["case h.refine'_5.refine'_2.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ ∃ a, ¬BoundedFormula.Realize φ default (Fin.snoc xs a)"],"content":"rintro ⟨a, ha⟩"},{"tailPos":14009,"headPos":13982,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ ¬BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ xs) a)"],"content":"BoundedFormula.realize_not,"},{"tailPos":14047,"headPos":14010,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ ¬BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"content":"← Unique.eq_default (f ∘ default)"},{"tailPos":14048,"headPos":14047,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"content":"]"},{"tailPos":14048,"headPos":13978,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"content":"rw [BoundedFormula.realize_not, ← Unique.eq_default (f ∘ default)]"},{"tailPos":14067,"headPos":14059,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":[],"content":"exact ha"},{"tailPos":14067,"headPos":13978,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":[],"content":"rw [BoundedFormula.realize_not, ← Unique.eq_default (f ∘ default)]\n          exact ha"},{"tailPos":13967,"headPos":13965,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":[],"content":"by"},{"tailPos":14067,"headPos":13965,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":[],"content":"by\n          rw [BoundedFormula.realize_not, ← Unique.eq_default (f ∘ default)]\n          exact ha"},{"tailPos":14068,"headPos":13924,"goalsBefore":["case h.refine'_5.refine'_2.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\n⊢ ∃ a, ¬BoundedFormula.Realize φ default (Fin.snoc xs a)"],"goalsAfter":["case h.refine'_5.refine'_2.intro.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\nb : M\nhb : BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) (↑f b))\n⊢ ∃ a, ¬BoundedFormula.Realize φ default (Fin.snoc xs a)"],"content":"obtain ⟨b, hb⟩ := htv n φ.not xs a (by\n          rw [BoundedFormula.realize_not, ← Unique.eq_default (f ∘ default)]\n          exact ha)"},{"tailPos":14077,"headPos":14075,"goalsBefore":["case h.refine'_5.refine'_2.intro.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\nb : M\nhb : BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) (↑f b))\n⊢ ∃ a, ¬BoundedFormula.Realize φ default (Fin.snoc xs a)"],"goalsAfter":["case h.refine'_5.refine'_2.intro.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\nb : M\nhb : BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) (↑f b))\n⊢ ∃ a, ¬BoundedFormula.Realize φ default (Fin.snoc xs a)"],"content":"·"},{"tailPos":14129,"headPos":14078,"goalsBefore":["case h.refine'_5.refine'_2.intro.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\nb : M\nhb : BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) (↑f b))\n⊢ ∃ a, ¬BoundedFormula.Realize φ default (Fin.snoc xs a)"],"goalsAfter":["case h.refine'_5.refine'_2.intro.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\nb : M\nhb : BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) (↑f b))\nh : BoundedFormula.Realize φ default (Fin.snoc xs b)\n⊢ BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ Fin.snoc xs b) =\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ xs) (↑f b))"],"content":"refine' ⟨b, fun h => hb (Eq.mp _ ((ih _).2 h))⟩"},{"tailPos":14176,"headPos":14142,"goalsBefore":["case h.refine'_5.refine'_2.intro.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\nb : M\nhb : BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) (↑f b))\nh : BoundedFormula.Realize φ default (Fin.snoc xs b)\n⊢ BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ Fin.snoc xs b) =\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ xs) (↑f b))"],"goalsAfter":["case h.refine'_5.refine'_2.intro.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\nb : M\nhb : BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) (↑f b))\nh : BoundedFormula.Realize φ default (Fin.snoc xs b)\n⊢ BoundedFormula.Realize φ default (↑f ∘ Fin.snoc xs b) = BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ xs) (↑f b))"],"content":"Unique.eq_default (f ∘ default),"},{"tailPos":14190,"headPos":14177,"goalsBefore":["case h.refine'_5.refine'_2.intro.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\nb : M\nhb : BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) (↑f b))\nh : BoundedFormula.Realize φ default (Fin.snoc xs b)\n⊢ BoundedFormula.Realize φ default (↑f ∘ Fin.snoc xs b) = BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ xs) (↑f b))"],"goalsAfter":["case h.refine'_5.refine'_2.intro.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\nb : M\nhb : BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) (↑f b))\nh : BoundedFormula.Realize φ default (Fin.snoc xs b)\n⊢ BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ xs) (↑f b)) =\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ xs) (↑f b))"],"content":"Fin.comp_snoc"},{"tailPos":14191,"headPos":14190,"goalsBefore":["case h.refine'_5.refine'_2.intro.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\nb : M\nhb : BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) (↑f b))\nh : BoundedFormula.Realize φ default (Fin.snoc xs b)\n⊢ BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ xs) (↑f b)) =\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ xs) (↑f b))"],"goalsAfter":[],"content":"]"},{"tailPos":14191,"headPos":14138,"goalsBefore":["case h.refine'_5.refine'_2.intro.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\nb : M\nhb : BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) (↑f b))\nh : BoundedFormula.Realize φ default (Fin.snoc xs b)\n⊢ BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ Fin.snoc xs b) =\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ xs) (↑f b))"],"goalsAfter":[],"content":"rw [Unique.eq_default (f ∘ default), Fin.comp_snoc]"},{"tailPos":14191,"headPos":14078,"goalsBefore":["case h.refine'_5.refine'_2.intro.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\nb : M\nhb : BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) (↑f b))\n⊢ ∃ a, ¬BoundedFormula.Realize φ default (Fin.snoc xs a)"],"goalsAfter":[],"content":"refine' ⟨b, fun h => hb (Eq.mp _ ((ih _).2 h))⟩\n        rw [Unique.eq_default (f ∘ default), Fin.comp_snoc]"},{"tailPos":14191,"headPos":14075,"goalsBefore":["case h.refine'_5.refine'_2.intro.intro\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\na : N\nha : ¬BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)\nb : M\nhb : BoundedFormula.Realize (∼φ) default (Fin.snoc (↑f ∘ xs) (↑f b))\n⊢ ∃ a, ¬BoundedFormula.Realize φ default (Fin.snoc xs a)"],"goalsAfter":[],"content":"· refine' ⟨b, fun h => hb (Eq.mp _ ((ih _).2 h))⟩\n        rw [Unique.eq_default (f ∘ default), Fin.comp_snoc]"},{"tailPos":14191,"headPos":13881,"goalsBefore":["case h.refine'_5.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ (∀ (a : M), BoundedFormula.Realize φ default (Fin.snoc xs a)) →\n    ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":[],"content":"contrapose!\n      rintro ⟨a, ha⟩\n      obtain ⟨b, hb⟩ := htv n φ.not xs a (by\n          rw [BoundedFormula.realize_not, ← Unique.eq_default (f ∘ default)]\n          exact ha)\n      · refine' ⟨b, fun h => hb (Eq.mp _ ((ih _).2 h))⟩\n        rw [Unique.eq_default (f ∘ default), Fin.comp_snoc]"},{"tailPos":14191,"headPos":13878,"goalsBefore":["case h.refine'_5.refine'_2\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn✝ : ℕ\nφ✝ : BoundedFormula L Empty n✝\nn : ℕ\nφ : BoundedFormula L Empty (n + 1)\nih : ∀ (xs : Fin (n + 1) → M), BoundedFormula.Realize φ (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize φ default xs\nxs : Fin n → M\n⊢ (∀ (a : M), BoundedFormula.Realize φ default (Fin.snoc xs a)) →\n    ∀ (a : N), BoundedFormula.Realize φ (↑f ∘ default) (Fin.snoc (↑f ∘ xs) a)"],"goalsAfter":[],"content":"· contrapose!\n      rintro ⟨a, ha⟩\n      obtain ⟨b, hb⟩ := htv n φ.not xs a (by\n          rw [BoundedFormula.realize_not, ← Unique.eq_default (f ∘ default)]\n          exact ha)\n      · refine' ⟨b, fun h => hb (Eq.mp _ ((ih _).2 h))⟩\n        rw [Unique.eq_default (f ∘ default), Fin.comp_snoc]"},{"tailPos":14191,"headPos":13726,"goalsBefore":["case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"goalsAfter":[],"content":"intro n φ ih xs\n    simp only [BoundedFormula.realize_all]\n    refine' ⟨fun h a => _, _⟩\n    · rw [← ih, Fin.comp_snoc]\n      exact h (f a)\n    · contrapose!\n      rintro ⟨a, ha⟩\n      obtain ⟨b, hb⟩ := htv n φ.not xs a (by\n          rw [BoundedFormula.realize_not, ← Unique.eq_default (f ∘ default)]\n          exact ha)\n      · refine' ⟨b, fun h => hb (Eq.mp _ ((ih _).2 h))⟩\n        rw [Unique.eq_default (f ∘ default), Fin.comp_snoc]"},{"tailPos":14191,"headPos":13723,"goalsBefore":["case h.refine'_5\nL : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\nn : ℕ\nφ : BoundedFormula L Empty n\n⊢ ∀ {n : ℕ} (f_1 : BoundedFormula L Empty (n + 1)),\n    (∀ (xs : Fin (n + 1) → M),\n        BoundedFormula.Realize f_1 (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize f_1 default xs) →\n      ∀ (xs : Fin n → M),\n        BoundedFormula.Realize (∀'f_1) (↑f ∘ default) (↑f ∘ xs) ↔ BoundedFormula.Realize (∀'f_1) default xs"],"goalsAfter":[],"content":"· intro n φ ih xs\n    simp only [BoundedFormula.realize_all]\n    refine' ⟨fun h a => _, _⟩\n    · rw [← ih, Fin.comp_snoc]\n      exact h (f a)\n    · contrapose!\n      rintro ⟨a, ha⟩\n      obtain ⟨b, hb⟩ := htv n φ.not xs a (by\n          rw [BoundedFormula.realize_not, ← Unique.eq_default (f ∘ default)]\n          exact ha)\n      · refine' ⟨b, fun h => hb (Eq.mp _ ((ih _).2 h))⟩\n        rw [Unique.eq_default (f ∘ default), Fin.comp_snoc]"},{"tailPos":14191,"headPos":13130,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\n⊢ ∀ {n : ℕ} (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"suffices h :\n    ∀ (n : ℕ) (φ : L.BoundedFormula Empty n) (xs : Fin n → M),\n      φ.Realize (f ∘ default) (f ∘ xs) ↔ φ.Realize default xs\n  · intro n φ x\n    refine' φ.realize_relabel_sum_inr.symm.trans (_root_.trans (h n _ _) φ.realize_relabel_sum_inr)\n  refine' fun n φ => φ.recOn _ _ _ _ _\n  · exact fun {_} _ => Iff.rfl\n  · intros\n    simp [BoundedFormula.Realize, ← Sum.comp_elim, Embedding.realize_term]\n  · intros\n    simp [BoundedFormula.Realize, ← Sum.comp_elim, Embedding.realize_term]\n    erw [map_rel f]\n  · intro _ _ _ ih1 ih2 _\n    simp [ih1, ih2]\n  · intro n φ ih xs\n    simp only [BoundedFormula.realize_all]\n    refine' ⟨fun h a => _, _⟩\n    · rw [← ih, Fin.comp_snoc]\n      exact h (f a)\n    · contrapose!\n      rintro ⟨a, ha⟩\n      obtain ⟨b, hb⟩ := htv n φ.not xs a (by\n          rw [BoundedFormula.realize_not, ← Unique.eq_default (f ∘ default)]\n          exact ha)\n      · refine' ⟨b, fun h => hb (Eq.mp _ ((ih _).2 h))⟩\n        rw [Unique.eq_default (f ∘ default), Fin.comp_snoc]"},{"tailPos":13127,"headPos":13125,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\n⊢ ∀ {n : ℕ} (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"by"},{"tailPos":14191,"headPos":13125,"goalsBefore":["L : Language\nM : Type u_3\nN : Type u_4\nP : Type ?u.353970\nQ : Type ?u.353973\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ↪[L] N\nhtv :\n  ∀ (n : ℕ) (φ : BoundedFormula L Empty (n + 1)) (x : Fin n → M) (a : N),\n    BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) a) →\n      ∃ b, BoundedFormula.Realize φ default (Fin.snoc (↑f ∘ x) (↑f b))\n⊢ ∀ {n : ℕ} (φ : Formula L (Fin n)) (x : Fin n → M), Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"by\n  suffices h :\n    ∀ (n : ℕ) (φ : L.BoundedFormula Empty n) (xs : Fin n → M),\n      φ.Realize (f ∘ default) (f ∘ xs) ↔ φ.Realize default xs\n  · intro n φ x\n    refine' φ.realize_relabel_sum_inr.symm.trans (_root_.trans (h n _ _) φ.realize_relabel_sum_inr)\n  refine' fun n φ => φ.recOn _ _ _ _ _\n  · exact fun {_} _ => Iff.rfl\n  · intros\n    simp [BoundedFormula.Realize, ← Sum.comp_elim, Embedding.realize_term]\n  · intros\n    simp [BoundedFormula.Realize, ← Sum.comp_elim, Embedding.realize_term]\n    erw [map_rel f]\n  · intro _ _ _ ih1 ih2 _\n    simp [ih1, ih2]\n  · intro n φ ih xs\n    simp only [BoundedFormula.realize_all]\n    refine' ⟨fun h a => _, _⟩\n    · rw [← ih, Fin.comp_snoc]\n      exact h (f a)\n    · contrapose!\n      rintro ⟨a, ha⟩\n      obtain ⟨b, hb⟩ := htv n φ.not xs a (by\n          rw [BoundedFormula.realize_not, ← Unique.eq_default (f ∘ default)]\n          exact ha)\n      · refine' ⟨b, fun h => hb (Eq.mp _ ((ih _).2 h))⟩\n        rw [Unique.eq_default (f ∘ default), Fin.comp_snoc]"},{"tailPos":15084,"headPos":15079,"goalsBefore":["L : Language\nM : Type ?u.367969\nN : Type ?u.367972\nP : Type ?u.367975\nQ : Type ?u.367978\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ≃[L] N\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"aesop"},{"tailPos":15078,"headPos":15076,"goalsBefore":["L : Language\nM : Type ?u.367969\nN : Type ?u.367972\nP : Type ?u.367975\nQ : Type ?u.367978\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ≃[L] N\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"by"},{"tailPos":15084,"headPos":15076,"goalsBefore":["L : Language\nM : Type ?u.367969\nN : Type ?u.367972\nP : Type ?u.367975\nQ : Type ?u.367978\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nf : M ≃[L] N\nn : ℕ\nφ : Formula L (Fin n)\nx : Fin n → M\n⊢ Formula.Realize φ (↑f ∘ x) ↔ Formula.Realize φ x"],"goalsAfter":[],"content":"by aesop"},{"tailPos":16351,"headPos":16300,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.369446\nP : Type ?u.369449\nQ : Type ?u.369452\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nn : ℕ\nφ : BoundedFormula L α n\nv : α → { x // x ∈ ⊤ }\nxs : Fin n → { x // x ∈ ⊤ }\n⊢ BoundedFormula.Realize φ v xs ↔ BoundedFormula.Realize φ (Subtype.val ∘ v) (Subtype.val ∘ xs)"],"goalsAfter":["L : Language\nM : Type u_4\nN : Type ?u.369446\nP : Type ?u.369449\nQ : Type ?u.369452\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nn : ℕ\nφ : BoundedFormula L α n\nv : α → { x // x ∈ ⊤ }\nxs : Fin n → { x // x ∈ ⊤ }\n⊢ BoundedFormula.Realize φ (↑topEquiv ∘ v) (↑topEquiv ∘ xs) ↔\n    BoundedFormula.Realize φ (Subtype.val ∘ v) (Subtype.val ∘ xs)"],"content":"← Substructure.topEquiv.realize_boundedFormula φ"},{"tailPos":16352,"headPos":16351,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.369446\nP : Type ?u.369449\nQ : Type ?u.369452\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nn : ℕ\nφ : BoundedFormula L α n\nv : α → { x // x ∈ ⊤ }\nxs : Fin n → { x // x ∈ ⊤ }\n⊢ BoundedFormula.Realize φ (↑topEquiv ∘ v) (↑topEquiv ∘ xs) ↔\n    BoundedFormula.Realize φ (Subtype.val ∘ v) (Subtype.val ∘ xs)"],"goalsAfter":["L : Language\nM : Type u_4\nN : Type ?u.369446\nP : Type ?u.369449\nQ : Type ?u.369452\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nn : ℕ\nφ : BoundedFormula L α n\nv : α → { x // x ∈ ⊤ }\nxs : Fin n → { x // x ∈ ⊤ }\n⊢ BoundedFormula.Realize φ (↑topEquiv ∘ v) (↑topEquiv ∘ xs) ↔\n    BoundedFormula.Realize φ (Subtype.val ∘ v) (Subtype.val ∘ xs)"],"content":"]"},{"tailPos":16352,"headPos":16296,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.369446\nP : Type ?u.369449\nQ : Type ?u.369452\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nn : ℕ\nφ : BoundedFormula L α n\nv : α → { x // x ∈ ⊤ }\nxs : Fin n → { x // x ∈ ⊤ }\n⊢ BoundedFormula.Realize φ v xs ↔ BoundedFormula.Realize φ (Subtype.val ∘ v) (Subtype.val ∘ xs)"],"goalsAfter":["L : Language\nM : Type u_4\nN : Type ?u.369446\nP : Type ?u.369449\nQ : Type ?u.369452\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nn : ℕ\nφ : BoundedFormula L α n\nv : α → { x // x ∈ ⊤ }\nxs : Fin n → { x // x ∈ ⊤ }\n⊢ BoundedFormula.Realize φ (↑topEquiv ∘ v) (↑topEquiv ∘ xs) ↔\n    BoundedFormula.Realize φ (Subtype.val ∘ v) (Subtype.val ∘ xs)"],"content":"rw [← Substructure.topEquiv.realize_boundedFormula φ]"},{"tailPos":16359,"headPos":16355,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.369446\nP : Type ?u.369449\nQ : Type ?u.369452\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nn : ℕ\nφ : BoundedFormula L α n\nv : α → { x // x ∈ ⊤ }\nxs : Fin n → { x // x ∈ ⊤ }\n⊢ BoundedFormula.Realize φ (↑topEquiv ∘ v) (↑topEquiv ∘ xs) ↔\n    BoundedFormula.Realize φ (Subtype.val ∘ v) (Subtype.val ∘ xs)"],"goalsAfter":[],"content":"simp only [coe_topEquiv, coe_top]"},{"tailPos":16359,"headPos":16296,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.369446\nP : Type ?u.369449\nQ : Type ?u.369452\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nn : ℕ\nφ : BoundedFormula L α n\nv : α → { x // x ∈ ⊤ }\nxs : Fin n → { x // x ∈ ⊤ }\n⊢ BoundedFormula.Realize φ v xs ↔ BoundedFormula.Realize φ (Subtype.val ∘ v) (Subtype.val ∘ xs)"],"goalsAfter":[],"content":"rw [← Substructure.topEquiv.realize_boundedFormula φ]\n  simp"},{"tailPos":16293,"headPos":16291,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.369446\nP : Type ?u.369449\nQ : Type ?u.369452\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nn : ℕ\nφ : BoundedFormula L α n\nv : α → { x // x ∈ ⊤ }\nxs : Fin n → { x // x ∈ ⊤ }\n⊢ BoundedFormula.Realize φ v xs ↔ BoundedFormula.Realize φ (Subtype.val ∘ v) (Subtype.val ∘ xs)"],"goalsAfter":[],"content":"by"},{"tailPos":16359,"headPos":16291,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.369446\nP : Type ?u.369449\nQ : Type ?u.369452\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nn : ℕ\nφ : BoundedFormula L α n\nv : α → { x // x ∈ ⊤ }\nxs : Fin n → { x // x ∈ ⊤ }\n⊢ BoundedFormula.Realize φ v xs ↔ BoundedFormula.Realize φ (Subtype.val ∘ v) (Subtype.val ∘ xs)"],"goalsAfter":[],"content":"by\n  rw [← Substructure.topEquiv.realize_boundedFormula φ]\n  simp"},{"tailPos":16737,"headPos":16693,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.371937\nP : Type ?u.371940\nQ : Type ?u.371943\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nφ : Formula L α\nv : α → { x // x ∈ ⊤ }\n⊢ Formula.Realize φ v ↔ Formula.Realize φ (Subtype.val ∘ v)"],"goalsAfter":["L : Language\nM : Type u_4\nN : Type ?u.371937\nP : Type ?u.371940\nQ : Type ?u.371943\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nφ : Formula L α\nv : α → { x // x ∈ ⊤ }\n⊢ Formula.Realize φ (↑topEquiv ∘ v) ↔ Formula.Realize φ (Subtype.val ∘ v)"],"content":"← Substructure.topEquiv.realize_formula φ"},{"tailPos":16738,"headPos":16737,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.371937\nP : Type ?u.371940\nQ : Type ?u.371943\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nφ : Formula L α\nv : α → { x // x ∈ ⊤ }\n⊢ Formula.Realize φ (↑topEquiv ∘ v) ↔ Formula.Realize φ (Subtype.val ∘ v)"],"goalsAfter":["L : Language\nM : Type u_4\nN : Type ?u.371937\nP : Type ?u.371940\nQ : Type ?u.371943\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nφ : Formula L α\nv : α → { x // x ∈ ⊤ }\n⊢ Formula.Realize φ (↑topEquiv ∘ v) ↔ Formula.Realize φ (Subtype.val ∘ v)"],"content":"]"},{"tailPos":16738,"headPos":16689,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.371937\nP : Type ?u.371940\nQ : Type ?u.371943\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nφ : Formula L α\nv : α → { x // x ∈ ⊤ }\n⊢ Formula.Realize φ v ↔ Formula.Realize φ (Subtype.val ∘ v)"],"goalsAfter":["L : Language\nM : Type u_4\nN : Type ?u.371937\nP : Type ?u.371940\nQ : Type ?u.371943\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nφ : Formula L α\nv : α → { x // x ∈ ⊤ }\n⊢ Formula.Realize φ (↑topEquiv ∘ v) ↔ Formula.Realize φ (Subtype.val ∘ v)"],"content":"rw [← Substructure.topEquiv.realize_formula φ]"},{"tailPos":16745,"headPos":16741,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.371937\nP : Type ?u.371940\nQ : Type ?u.371943\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nφ : Formula L α\nv : α → { x // x ∈ ⊤ }\n⊢ Formula.Realize φ (↑topEquiv ∘ v) ↔ Formula.Realize φ (Subtype.val ∘ v)"],"goalsAfter":[],"content":"simp only [coe_topEquiv, coe_top]"},{"tailPos":16745,"headPos":16689,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.371937\nP : Type ?u.371940\nQ : Type ?u.371943\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nφ : Formula L α\nv : α → { x // x ∈ ⊤ }\n⊢ Formula.Realize φ v ↔ Formula.Realize φ (Subtype.val ∘ v)"],"goalsAfter":[],"content":"rw [← Substructure.topEquiv.realize_formula φ]\n  simp"},{"tailPos":16686,"headPos":16684,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.371937\nP : Type ?u.371940\nQ : Type ?u.371943\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nφ : Formula L α\nv : α → { x // x ∈ ⊤ }\n⊢ Formula.Realize φ v ↔ Formula.Realize φ (Subtype.val ∘ v)"],"goalsAfter":[],"content":"by"},{"tailPos":16745,"headPos":16684,"goalsBefore":["L : Language\nM : Type u_4\nN : Type ?u.371937\nP : Type ?u.371940\nQ : Type ?u.371943\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nα : Type u_1\nφ : Formula L α\nv : α → { x // x ∈ ⊤ }\n⊢ Formula.Realize φ v ↔ Formula.Realize φ (Subtype.val ∘ v)"],"goalsAfter":[],"content":"by\n  rw [← Substructure.topEquiv.realize_formula φ]\n  simp"},{"tailPos":18441,"headPos":18436,"goalsBefore":["L : Language\nM : Type ?u.375176\nN : Type ?u.375179\nP : Type ?u.375182\nQ : Type ?u.375185\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nx✝² x✝¹ : ElementarySubstructure L M\ns : Set M\nhs1 : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f s\nhs2 : Substructure.IsElementary { carrier := s, fun_mem := hs1 }\nt : Set M\nht1 : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f t\nisElementary'✝ : Substructure.IsElementary { carrier := t, fun_mem := ht1 }\nx✝ :\n  (fun x => ↑↑x) { toSubstructure := { carrier := s, fun_mem := hs1 }, isElementary' := hs2 } =\n    (fun x => ↑↑x) { toSubstructure := { carrier := t, fun_mem := ht1 }, isElementary' := isElementary'✝ }\n⊢ { toSubstructure := { carrier := s, fun_mem := hs1 }, isElementary' := hs2 } =\n    { toSubstructure := { carrier := t, fun_mem := ht1 }, isElementary' := isElementary'✝ }"],"goalsAfter":[],"content":"congr"},{"tailPos":18431,"headPos":18429,"goalsBefore":["L : Language\nM : Type ?u.375176\nN : Type ?u.375179\nP : Type ?u.375182\nQ : Type ?u.375185\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nx✝² x✝¹ : ElementarySubstructure L M\ns : Set M\nhs1 : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f s\nhs2 : Substructure.IsElementary { carrier := s, fun_mem := hs1 }\nt : Set M\nht1 : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f t\nisElementary'✝ : Substructure.IsElementary { carrier := t, fun_mem := ht1 }\nx✝ :\n  (fun x => ↑↑x) { toSubstructure := { carrier := s, fun_mem := hs1 }, isElementary' := hs2 } =\n    (fun x => ↑↑x) { toSubstructure := { carrier := t, fun_mem := ht1 }, isElementary' := isElementary'✝ }\n⊢ { toSubstructure := { carrier := s, fun_mem := hs1 }, isElementary' := hs2 } =\n    { toSubstructure := { carrier := t, fun_mem := ht1 }, isElementary' := isElementary'✝ }"],"goalsAfter":[],"content":"by"},{"tailPos":18441,"headPos":18429,"goalsBefore":["L : Language\nM : Type ?u.375176\nN : Type ?u.375179\nP : Type ?u.375182\nQ : Type ?u.375185\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nx✝² x✝¹ : ElementarySubstructure L M\ns : Set M\nhs1 : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f s\nhs2 : Substructure.IsElementary { carrier := s, fun_mem := hs1 }\nt : Set M\nht1 : ∀ {n : ℕ} (f : Functions L n), ClosedUnder f t\nisElementary'✝ : Substructure.IsElementary { carrier := t, fun_mem := ht1 }\nx✝ :\n  (fun x => ↑↑x) { toSubstructure := { carrier := s, fun_mem := hs1 }, isElementary' := hs2 } =\n    (fun x => ↑↑x) { toSubstructure := { carrier := t, fun_mem := ht1 }, isElementary' := isElementary'✝ }\n⊢ { toSubstructure := { carrier := s, fun_mem := hs1 }, isElementary' := hs2 } =\n    { toSubstructure := { carrier := t, fun_mem := ht1 }, isElementary' := isElementary'✝ }"],"goalsAfter":[],"content":"by\n    congr"},{"tailPos":20946,"headPos":20900,"goalsBefore":["L : Language\nM : Type u_3\nN : Type ?u.401025\nP : Type ?u.401028\nQ : Type ?u.401031\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nS : ElementarySubstructure L M\nT : Theory L\n⊢ { x // x ∈ S } ⊨ T ↔ M ⊨ T"],"goalsAfter":[],"content":"simp only [Theory.model_iff, realize_sentence]"},{"tailPos":20897,"headPos":20895,"goalsBefore":["L : Language\nM : Type u_3\nN : Type ?u.401025\nP : Type ?u.401028\nQ : Type ?u.401031\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nS : ElementarySubstructure L M\nT : Theory L\n⊢ { x // x ∈ S } ⊨ T ↔ M ⊨ T"],"goalsAfter":[],"content":"by"},{"tailPos":20946,"headPos":20895,"goalsBefore":["L : Language\nM : Type u_3\nN : Type ?u.401025\nP : Type ?u.401028\nQ : Type ?u.401031\ninst✝³ : Structure L M\ninst✝² : Structure L N\ninst✝¹ : Structure L P\ninst✝ : Structure L Q\nS : ElementarySubstructure L M\nT : Theory L\n⊢ { x // x ∈ S } ⊨ T ↔ M ⊨ T"],"goalsAfter":[],"content":"by\n  simp only [Theory.model_iff, realize_sentence]"}]